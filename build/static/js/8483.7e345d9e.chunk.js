"use strict";(self.webpackChunkmardoll_admin=self.webpackChunkmardoll_admin||[]).push([[8483],{47701:function(e,n,r){r.d(n,{x:function(){return s}});var t=r(1413),i=r(44925),a=(r(72791),r(93070)),l=r(61134),o=r(80184),c=["children","control","name","help","hasFeedback"],s=function(e){var n,r,s=e.children,u=e.control,d=e.name,f=e.help,h=e.hasFeedback,v=void 0!==h&&h,p=(0,i.Z)(e,c),m=(0,l.bc)({name:d,control:u}),g=m.field,x=m.fieldState,Z=m.formState.errors;return(0,o.jsx)(a.Z.Item,(0,t.Z)((0,t.Z)({hasFeedback:v,name:d,normalize:function(e){return g.onChange(e),e},validateStatus:x.invalid?"error":void 0,help:null!==(n=null===(r=Z[d])||void 0===r?void 0:r.message)&&void 0!==n?n:f},p),{},{children:s}))}},18483:function(e,n,r){r.r(n),r.d(n,{default:function(){return M}});var t=r(72791),i=r(1630),a=r(1413),l=r(74165),o=r(15861),c=r(93433),s=r(29439),u=r(71439),d=r(93070),f=r(4206),h=r(86005),v=r(5535),p=r(77128),m=r(31773),g=r(61431),x=r(2641),Z=r(98597),y=r(61134),w=r(44695),j=r(8007),S=r(66776),b=r(763),N=r(47701),C=r(54174),k=r(30276),I=r(79286),T=r(12481),z=r(20028),D=r(91933),F=r(54261),V=r(97892),E=r.n(V),L=r(60405),R=r(25850),P=r(29655),A=r(83430),O=r(80184),q=u.Z.Dragger,B=["A Line","Ballgown","V\xe1y c\xf4ng ch\xfaa"],G=[{value:"Size S",label:"Size S"},{value:"Size M",label:"Size M"},{value:"Size L",label:"Size L"},{value:"Size XL",label:"Size XL"}],_=j.Ry({dressName:j.Z_().required("Vui l\xf2ng nh\u1eadp t\xean v\xe1y c\u01b0\u1edbi"),dressCode:j.nK().required("Vui l\xf2ng nh\u1eadp ch\u1ecdn lo\u1ea1i v\xe1y c\u01b0\u1edbi"),dressImage:j.nK().required("Vui l\xf2ng upload file h\xecnh \u1ea3nh").test("fileEmpty","Vui l\xf2ng upload file h\xecnh \u1ea3nh",(function(e){return 0!==(null===e||void 0===e?void 0:e.length)})),dressShape:j.nK().required("Vui l\xf2ng ch\u1ecdn d\xe1ng v\xe1y c\u01b0\u1edbi")}).required();function J(){var e,n=(0,t.useRef)(null),r=d.Z.useForm(),i=(0,s.Z)(r,1)[0],u=f.ZP.useMessage(),j=(0,s.Z)(u,2),V=j[0],J=j[1],M=(0,t.useState)(!1),Q=(0,s.Z)(M,2),$=Q[0],H=Q[1],X=(0,t.useRef)({}),K=(0,T.hJ)(C.R,"weddingDress"),U=(0,z.b)(K),W=(0,A.m)().data,Y=(0,t.useState)([]),ee=(0,s.Z)(Y,2),ne=ee[0],re=ee[1],te=(0,L.e)().refetch,ie=(0,D.useQueryClient)(),ae=(0,F.Z)(),le=(0,t.useState)(""),oe=(0,s.Z)(le,2),ce=oe[0],se=oe[1],ue={dressName:"",dressCode:null===(e=W[0])||void 0===e?void 0:e.dressCodeName,dressPrice:"",dressPriceSale:"",description:"",dressImage:[],dressShape:"",sizes:[]},de=(0,t.useState)(B),fe=(0,s.Z)(de,2),he=fe[0],ve=fe[1],pe=(0,t.useState)({value:B[0],label:B[0]}),me=(0,s.Z)(pe,2),ge=me[0],xe=me[1],Ze=(0,t.useRef)(null),ye=function(e){se(e.target.value)},we=function(e){if(e.preventDefault(),!he.includes(ce))return ve((function(e){return[].concat((0,c.Z)(e),[ce||""])})),se(""),void setTimeout((function(){var e;null===(e=Ze.current)||void 0===e||e.focus()}),0);P.Am.error("D\xe1ng v\xe1y c\u01b0\u1edbi \u0111\xe3 t\u1ed3n t\u1ea1i tr\u1ecdng danh s\xe1ch vui l\xf2ng nh\u1eadp d\xe1ng v\xe1y c\u01b0\u1edbi kh\xe1c!",{position:P.Am.POSITION.TOP_RIGHT})};X.current.dressImage=[];var je=(0,y.cI)({defaultValues:ue,resolver:(0,w.X)(_)}),Se=je.control,be=je.handleSubmit,Ne=je.formState.errors,Ce=je.reset,ke=je.setValue;je.getValues;(0,t.useEffect)((function(){var e,n;i.setFieldsValue({dressCode:(null===W||void 0===W||null===(e=W[0])||void 0===e?void 0:e.dressCodeName)||""}),ke("dressCode",(null===W||void 0===W||null===(n=W[0])||void 0===n?void 0:n.dressCodeName)||"")}),[i,W]);var Ie=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(n){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"done"===n.file.status?(re((function(e){return[].concat((0,c.Z)(e),[{id:ae,url:n.file.url,name:n.file.name}])})),ke("dressImage",[].concat((0,c.Z)(ne),[{id:ae,url:n.file.url,name:n.file.name}])),f.ZP.success("".concat(n.file.name," file uploaded successfully"))):"error"===n.file.status&&f.ZP.error("".concat(n.file.name," file upload failed."));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Te=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(n){var r,t,i,a;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.file,t=n.onSuccess,i=n.onError;try{(a=new FileReader).readAsDataURL(r),a.onload=function(e){var n=new Image;n.src=e.target.result,n.onload=function(){var e,i,a=n.width/n.height;n.width>800||n.height>800?a>1?(e=800,i=800/a):(e=800*a,i=800):(e=n.width,i=n.height);var l=document.createElement("canvas"),o=l.getContext("2d");l.width=e,l.height=i,o.drawImage(n,0,0,e,i),l.toBlob((function(e){var n=new File([e],r.name,{type:r.type}),i=(0,k.iH)(C.t,"/manager-page/".concat(n.name)),a=(0,k.B0)(i,n);a.on("state_changed",(function(e){Math.round(e.bytesTransferred/e.totalBytes*100)}),(function(e){return console.log(e)}),(function(){(0,k.Jt)(a.snapshot.ref).then((function(e){t(),Ie({file:{status:"done",name:n.name,url:e}})}))}))}),r.type)}}}catch(l){console.error("Error uploading file:",l),i()}case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ze={name:"file",multiple:!0,listType:"picture-card",fileList:ne,customRequest:Te,onChange:function(e){var n=e.fileList;if(ne.length>0){var r=null===ne||void 0===ne?void 0:ne.reduce((function(e,r){return n.some((function(e){var n;return null===r||void 0===r||null===(n=r.name)||void 0===n?void 0:n.includes(e.name)}))&&e.push(r),e}),[]);re(r),ke("dressImage",r)}},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}};return(0,O.jsxs)(O.Fragment,{children:[J,(0,O.jsxs)(d.Z,{form:i,name:"control-contect-ref",ref:n,layout:"vertical",initialValues:ue,onFinish:be(function(){var e=(0,o.Z)((0,l.Z)().mark((function e(r){var t,c,s;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=(0,a.Z)((0,a.Z)({},r),{},{slug:(0,R.$5)((null===r||void 0===r?void 0:r.dressName)||""),dressImage:ne,dressCode:null===r||void 0===r?void 0:r.dressCode,dressShape:null===r||void 0===r||null===(t=r.dressShape)||void 0===t?void 0:t.value,createDate:E()().toISOString()}),U.mutate(s),ie.invalidateQueries("weddingDress"),setTimeout((0,o.Z)((0,l.Z)().mark((function e(){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),300),H(!0),V.open({type:"success",content:"T\u1ea1o v\xe1y c\u01b0\u1edbi th\xe0nh c\xf4ng!",duration:5}),H(!1),re([]),i.resetFields(),null===(c=n.current)||void 0===c||c.resetFields(),Ce();case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),children:[(0,O.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 xl:gap-6",children:[(0,O.jsx)(N.x,{control:Se,name:"dressName",label:"T\xean v\xe1y c\u01b0\u1edbi",children:(0,O.jsx)(h.Z,{allowClear:!0,placeholder:"Nh\u1eadp t\xean v\xe1y c\u01b0\u1edbi"})}),(0,O.jsx)(N.x,{control:Se,name:"dressCode",label:"Lo\u1ea1i v\xe1y c\u01b0\u1edbi",children:(0,O.jsx)(v.Z,{defaultValue:"Premium",children:W.map((function(e,n){return(0,O.jsx)(v.Z.Option,{value:null===e||void 0===e?void 0:e.dressCodeName,children:null===e||void 0===e?void 0:e.dressCodeName},n)}))})}),(0,O.jsx)(N.x,{control:Se,name:"dressShape",label:"Chi ti\u1ebft v\xe1y c\u01b0\u1edbi",children:(0,O.jsx)(v.Z,{defaultValue:ge,optionFilterProp:"children",placeholder:"Chi ti\u1ebft v\xe1y c\u01b0\u1edbi",onChange:function(e){xe(e)},labelInValue:!0,filterOption:!1,dropdownRender:function(e){return(0,O.jsxs)(O.Fragment,{children:[e,(0,O.jsx)(p.Z,{style:{margin:"8px 0"}}),(0,O.jsxs)(m.Z,{style:{padding:"0 8px 4px"},children:[(0,O.jsx)(g.Z,{title:"Nh\u1eadp chi ti\u1ebft v\xe1y c\u01b0\u1edbi",children:(0,O.jsx)(h.Z,{placeholder:"Nh\u1eadp chi ti\u1ebft v\xe1y c\u01b0\u1edbi",ref:Ze,value:ce,onChange:ye})}),(0,O.jsx)(x.ZP,{type:"text",icon:(0,O.jsx)(I.Z,{}),onClick:we,children:"Th\xeam"})]})]})},options:(0,b.map)(he,(function(e){return{value:e,label:e}}))})}),(0,O.jsx)(N.x,{control:Se,name:"description",label:"M\xf4 t\u1ea3 v\xe1y c\u01b0\u1edbi",children:(0,O.jsx)(h.Z.TextArea,{style:{height:120},allowClear:!0})})]}),(0,O.jsx)("div",{className:"py-6",children:(0,O.jsx)(N.x,{control:Se,name:"dressImage",label:"Upload h\xecnh \u1ea3nh",children:(0,O.jsxs)(q,(0,a.Z)((0,a.Z)({},ze),{},{children:[(0,O.jsx)("p",{className:"ant-upload-drag-icon",children:(0,O.jsx)(S.Z,{})}),(0,O.jsx)("p",{className:"ant-upload-text",children:"Nh\u1ea5p ho\u1eb7c k\xe9o t\u1ec7p v\xe0o khu v\u1ef1c n\xe0y \u0111\u1ec3 t\u1ea3i l\xean"}),(0,O.jsx)("p",{className:"ant-upload-hint",children:"H\u1ed7 tr\u1ee3 t\u1ea3i l\xean m\u1ed9t l\u1ea7n ho\u1eb7c h\xe0ng lo\u1ea1t. Nghi\xeam c\u1ea5m t\u1ea3i l\xean d\u1eef li\u1ec7u c\xf4ng ty ho\u1eb7c c\xe1c th\xf4ng tin kh\xe1c"})]}))})}),(0,O.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 xl:gap-6",children:[(0,O.jsx)(N.x,{control:Se,name:"dressPrice",label:"Gi\xe1",children:(0,O.jsx)(Z.Z,{style:{width:"100%"},placeholder:"Nh\u1eadp gi\xe1",formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")}})}),(0,O.jsx)(N.x,{control:Se,name:"dressPriceSale",label:"Gi\xe1 Sale",children:(0,O.jsx)(Z.Z,{style:{width:"100%"},placeholder:"Nh\u1eadp gi\xe1 sale",formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")}})}),(0,O.jsx)(N.x,{control:Se,name:"sizes",label:"Size",children:(0,O.jsx)(v.Z,{mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"Ch\u1ecdn size",options:G})})]}),(0,O.jsx)(x.ZP,{loading:$,disabled:!(0,b.isEmpty)(Ne),type:"primary",htmlType:"submit",block:!0,size:"large",children:"G\u1eedi"})]})]})}var M=function(){return(0,O.jsxs)("div",{className:"m-2 p-2 md:p-10 bg-white rounded-3xl",children:[(0,O.jsx)("div",{className:"mb-4",children:(0,O.jsx)(i.Z,{items:[{href:"/",title:"Trang ch\u1ee7"},{title:"T\u1ea1o v\xe1y c\u01b0\u1edbi"}]})}),(0,O.jsx)(J,{})]})}},60405:function(e,n,r){r.d(n,{e:function(){return s}});var t=r(74165),i=r(15861),a=r(1413),l=r(20028),o=r(12481),c=r(54174);function s(){var e=(0,o.IO)((0,o.hJ)(c.R,"weddingDress")),n=(0,l.sQ)(["weddingDress"],e),r=n.data,s=[];null===r||void 0===r||r.forEach((function(e){s.push((0,a.Z)({id:e.id},e.data()))}));var u=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.refetch();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error refetching wedding dress data:",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return{isError:n.isError,isLoading:n.isLoading,data:s,refetch:u}}},83430:function(e,n,r){r.d(n,{m:function(){return s}});var t=r(74165),i=r(15861),a=r(1413),l=r(20028),o=r(12481),c=r(54174);function s(){var e=(0,o.IO)((0,o.hJ)(c.R,"weddingDressType")),n=(0,l.sQ)(["weddingDressType"],e),r=n.data,s=[];null===r||void 0===r||r.forEach((function(e){s.push((0,a.Z)({id:e.id},e.data()))}));var u=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.refetch();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error refetching wedding dress data:",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return{isError:n.isError,isLoading:n.isLoading,data:s,refetch:u}}},25850:function(e,n,r){r.d(n,{$5:function(){return l},Dw:function(){return a},Gw:function(){return o},Hl:function(){return c},J5:function(){return f},Q_:function(){return m},Rf:function(){return p},cX:function(){return v},k7:function(){return h},uf:function(){return u},xG:function(){return s},yA:function(){return d},z2:function(){return i}});var t=r(763),i=function(){return{pending:"orange",active:"cyan",complete:"green",rejected:"red",canceled:"red"}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pending"]},a=function(){return{offline:"gray",online:"green"}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"offline"]};function l(e){var n,r,t;return e=null===(t=e=null===(n=e)||void 0===n||null===(r=n.normalize("NFD").replace(/[\u0300-\u036f]/g,""))||void 0===r?void 0:r.replace("\u0111","d"))||void 0===t?void 0:t.replace(/\s+/g,"-").toLowerCase()}var o=/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/,c=function(e){return/((^(\+84|84|0|0084){1})(3|5|7|8|9))+([0-9]{8})$/.test(e)},s=function(e){return(0,t.isNil)(e)||(0,t.isEmpty)(e)?"--":parseInt(e).toLocaleString("vi-VN",{style:"currency",currency:"VND"})},u=function(e){return 0===e?"".concat(e.toString()):e>=1e9?"".concat((e/1e9).toFixed(0)," t\u1ef7"):e>=1e6?"".concat((e/1e6).toFixed(0)," tr"):"".concat((e/1e3).toFixed(0)," k")},d=function(e,n){var r;return null===e||void 0===e||null===(r=e[n])||void 0===r?void 0:r.includes("create")},f=function(e,n){var r;return null===e||void 0===e||null===(r=e[n])||void 0===r?void 0:r.includes("edit")},h=function(e,n){var r;return null===e||void 0===e||null===(r=e[n])||void 0===r?void 0:r.includes("delete")},v=function(e,n,r){return function(e,n){var r;return null===e||void 0===e||null===(r=e[n])||void 0===r?void 0:r.includes("view")}(r,e)?n:null},p=function(e){return(0,t.chain)(e).replace(/\D/g,"").toArray().takeRight(3).join("").value()},m=function(e){return(0,t.chain)(e).trim().split(/\s+/).last().defaultTo("").value()}}}]);
//# sourceMappingURL=8483.7e345d9e.chunk.js.map