"use strict";(self.webpackChunkmardoll_admin=self.webpackChunkmardoll_admin||[]).push([[1672],{10049:function(e,n,t){var i=t(1413),r=t(44925),s=t(93296),a=t(41932),l=t(2641),c=(t(72791),t(80184)),o=["children","override"],d=s.Z.useToken;n.Z=function(e){var n=e.children,t=e.override,s=(0,r.Z)(e,o),u=d().token,m=(null===u||void 0===u?void 0:u[t])||t,h={token:(0,i.Z)((0,i.Z)({},u),{},{colorPrimary:m,colorPrimaryHover:m,colorPrimaryBorderHover:m,colorPrimaryTextHover:m})};return(0,c.jsx)(a.ZP,{theme:h,children:(0,c.jsx)(l.ZP,(0,i.Z)((0,i.Z)({},s),{},{children:n}))})}},47701:function(e,n,t){t.d(n,{x:function(){return o}});var i=t(1413),r=t(44925),s=(t(72791),t(93070)),a=t(61134),l=t(80184),c=["children","control","name","help","hasFeedback"],o=function(e){var n,t,o=e.children,d=e.control,u=e.name,m=e.help,h=e.hasFeedback,p=void 0!==h&&h,x=(0,r.Z)(e,c),v=(0,a.bc)({name:u,control:d}),g=v.field,f=v.fieldState,j=v.formState.errors;return(0,l.jsx)(s.Z.Item,(0,i.Z)((0,i.Z)({hasFeedback:p,name:u,normalize:function(e){return g.onChange(e),e},validateStatus:f.invalid?"error":void 0,help:null!==(n=null===(t=j[u])||void 0===t?void 0:t.message)&&void 0!==n?n:m},x),{},{children:o}))}},31672:function(e,n,t){t.r(n),t.d(n,{default:function(){return Ie}});var i=t(74165),r=t(15861),s=t(29439),a=t(72791),l=t(67441),c=t(49367),o=t(61431),d=t(91082),u=t(10183),m=t(56207),h=t(9773),p=t(91933),x=t(10049),v=t(61758),g=t(56355),f=t(16856),j=t(50624),y=t(28624),Z=t(12481),b=t(54174),w=t(1413),N=t(77154),k=t(98272),C=t(66776),O=t(44695),S=t(71439),P=t(93070),T=t(4206),q=t(86005),I=t(5535),Q=t(2641),z=t(30276),D=t(763),E=t(61134),M=t(54261),V=t(8007),F=t(47701),J=t(25850),L=t(71781),A=t(18106),H=t(80184),R=S.Z.Dragger,_=V.Ry({name:V.Z_().required("Vui l\xf2ng nh\u1eadp t\xean"),permission:V.Z_().required("Vui ch\u1ecdn quy\u1ec1n"),phone:V.Z_().required("Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i c\u1ee7a b\u1ea1n!").test("phone","S\u1ed1 \u0111i\xean tho\u1ea1i sai \u0111\u1ecbnh d\u1ea1ng",(function(e,n){return(0,J.Hl)(e)})),email:V.Z_().email("Sai \u0111\u1ecbnh dang email. V\xed d\u1ee5 abc@gmail.com").required("Vui l\xf2ng nh\u1eadp email c\u1ee7a b\u1ea1n"),password:V.Z_().min(8,"\u0110\u1ed9 d\xe0i t\u1eeb 8-50 k\xed t\u1ef1").max(50,"\u0110\u1ed9 d\xe0i t\u1eeb 8-50 k\xed t\u1ef1").matches(J.Gw,"Ch\u1ee9a \xedt nh\u1ea5t m\u1ed9t k\xed t\u1ef1 th\u01b0\u1eddng, m\u1ed9t k\xed t\u1ef1 hoa, m\u1ed9t k\xed t\u1ef1 \u0111\u1eb7c bi\u1ec7t v\xe0 m\u1ed9t s\u1ed1").required("Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u"),address:V.Z_().required("Vui l\xf2ng \u0111\u1ecba ch\u1ec9"),avatar:V.nK().required("Vui l\xf2ng upload file h\xecnh \u1ea3nh").test("fileEmpty","Vui l\xf2ng upload file h\xecnh \u1ea3nh",(function(e){return 0!==(null===e||void 0===e?void 0:e.length)}))}).required();function B(e){var n=e.defaultValues,t=e.handleCancel,l=e.refetch,c=(0,a.useRef)(null),o=P.Z.useForm(),d=(0,s.Z)(o,1)[0],u=T.ZP.useMessage(),m=(0,s.Z)(u,2),h=m[0],x=m[1],v=(0,a.useState)(!1),g=(0,s.Z)(v,2),f=g[0],j=g[1],y=(0,Z.hJ)(b.R,"employee"),S=(0,p.useQueryClient)(),V=(0,a.useState)([{uid:(0,M.Z)(),name:"xxx.png",status:"done",url:n.avatar}]),J=(0,s.Z)(V,2),B=J[0],U=J[1],X=(0,A.a)().user,G=(null===X||void 0===X?void 0:X.permission)||"",K=(0,E.cI)({defaultValues:n,resolver:(0,O.X)(_)}),$=K.control,Y=K.handleSubmit,W=K.formState.errors,ee=K.reset,ne=K.setValue;K.getValues;(0,a.useEffect)((function(){d.setFieldsValue({name:(null===n||void 0===n?void 0:n.name)||"",permission:(null===n||void 0===n?void 0:n.permission)||"",phone:(null===n||void 0===n?void 0:n.phone)||"",email:n.email||"",password:n.password||"",address:n.address||""}),U([{uid:(0,M.Z)(),name:"xxx.png",status:"done",url:n.avatar}]||0)}),[n,d]);var te=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"done"===n.file.status?(U([{id:(0,M.Z)(),status:"done",url:n.file.url,name:n.file.name}]),ne("avatar",[{id:(0,M.Z)(),status:"done",url:n.file.url,name:n.file.name}]),T.ZP.success("".concat(n.file.name," file uploaded successfully"))):"error"===n.file.status&&T.ZP.error("".concat(n.file.name," file upload failed."));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ie=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(n){var t,r,s,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.file,r=n.onSuccess,s=n.onError;try{(a=new FileReader).readAsDataURL(t),a.onload=function(e){var n=new Image;n.src=e.target.result,n.onload=function(){var e,i,s=n.width/n.height;n.width>800||n.height>800?s>1?(e=800,i=800/s):(e=800*s,i=800):(e=n.width,i=n.height);var a=document.createElement("canvas"),l=a.getContext("2d");a.width=e,a.height=i,l.drawImage(n,0,0,e,i),a.toBlob((function(e){var n=new File([e],t.name,{type:t.type}),i=(0,z.iH)(b.t,"/files/".concat(n.name)),s=(0,z.B0)(i,n);s.on("state_changed",(function(e){Math.round(e.bytesTransferred/e.totalBytes*100)}),(function(e){return console.log(e)}),(function(){(0,z.Jt)(s.snapshot.ref).then((function(e){r(),te({file:{status:"done",name:n.name,url:e}})}))}))}),t.type)}}}catch(i){console.error("Error uploading file:",i),s()}case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),re={name:"file",multiple:!1,listType:"picture-card",customRequest:ie,onChange:function(e){var n=e.fileList;if(B.length>0){var t=null===B||void 0===B?void 0:B.reduce((function(e,t){return n.some((function(e){var n;return null===t||void 0===t||null===(n=t.id)||void 0===n?void 0:n.includes(null===e||void 0===e?void 0:e.id)}))&&e.push(t),e}),[]);U(t),ne("avatar",t)}},fileList:B,onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}};return(0,H.jsxs)(H.Fragment,{children:[x,(0,H.jsxs)(P.Z,{form:d,name:"control-edit-employee-ref",ref:c,layout:"vertical",initialValues:n,onFinish:Y(function(){var e=(0,r.Z)((0,i.Z)().mark((function e(s){var a,o,u,m,p,x,v,g,f,b,N;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j(!0),console.log("data?.email",null===s||void 0===s?void 0:s.email,n.email),(null===s||void 0===s?void 0:s.email)===n.email){e.next=26;break}return v=(0,Z.IO)(y,(0,Z.ar)("email","==",null===s||void 0===s?void 0:s.email),(0,Z.b9)(1)),e.next=6,(0,Z.PL)(v);case 6:if(e.sent.empty){e.next=11;break}return h.open({type:"error",content:"Email ".concat(null===s||void 0===s?void 0:s.email," n\xe0y \u0111\xe3 t\u1ed3n t\u1ea1i trong h\u1ec7 th\u1ed1ng vui l\xf2ng nh\u1eadp email kh\xe1c!"),duration:5}),j(!1),e.abrupt("return");case 11:return g=(0,Z.JU)(y,n.id),f=(0,w.Z)((0,w.Z)({},s),{},{avatar:null===B||void 0===B||null===(p=B[0])||void 0===p?void 0:p.url}),e.next=15,(0,Z.r7)(g,f);case 15:return S.invalidateQueries("employee"),setTimeout((0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),300),j(!0),h.open({type:"success",content:"C\u1eadp nh\u1eadp nh\xe2n vi\xean th\xe0nh c\xf4ng!",duration:5}),j(!1),null===t||void 0===t||t(),d.resetFields(),null===(x=c.current)||void 0===x||x.resetFields(),ee(),j(!1),e.abrupt("return");case 26:return b=(0,Z.JU)(y,n.id),N=(0,w.Z)((0,w.Z)({},s),{},{permissions:(null===(a=(0,D.keyBy)(L.I,"id"))||void 0===a||null===(o=a[null===s||void 0===s?void 0:s.permission])||void 0===o?void 0:o.permissions)||"",avatar:null===B||void 0===B||null===(u=B[0])||void 0===u?void 0:u.url}),e.next=30,(0,Z.r7)(b,N);case 30:S.invalidateQueries("employee"),setTimeout((0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),300),j(!0),h.open({type:"success",content:"C\u1eadp nh\u1eadp nh\xe2n vi\xean th\xe0nh c\xf4ng!",duration:5}),j(!1),null===t||void 0===t||t(),d.resetFields(),null===(m=c.current)||void 0===m||m.resetFields(),ee(),j(!1);case 40:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),children:[(0,H.jsx)(F.x,{control:$,name:"email",label:"Email",children:(0,H.jsx)(q.Z,{placeholder:"Nh\u1eadp email"})}),(0,H.jsx)(F.x,{control:$,name:"password",label:"Password",children:(0,H.jsx)(q.Z.Password,{iconRender:function(e){return e?(0,H.jsx)(N.Z,{}):(0,H.jsx)(k.Z,{})},placeholder:"Nh\u1eadp email"})}),(0,H.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 xl:gap-6",children:[(0,H.jsx)(F.x,{control:$,name:"name",label:"T\xean nh\xe2n vi\xean",children:(0,H.jsx)(q.Z,{placeholder:"Nh\u1eadp t\xean nh\xe2n vi\xean"})}),(0,H.jsx)(F.x,{control:$,name:"phone",label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",children:(0,H.jsx)(q.Z,{placeholder:"Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i"})}),(0,H.jsx)(F.x,{control:$,name:"permission",label:"Quy\u1ec1n",children:(0,H.jsx)(I.Z,{children:"admin"===G?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(I.Z.Option,{value:"admin",children:"Qu\u1ea3n tr\u1ecb vi\xean"}),(0,H.jsx)(I.Z.Option,{value:"manager",children:"Qu\u1ea3n l\xfd"}),(0,H.jsx)(I.Z.Option,{value:"employee",children:"Th\u1ee3 ch\u1ee5p \u1ea3nh"}),(0,H.jsx)(I.Z.Option,{value:"sale",children:"Sale"}),(0,H.jsx)(I.Z.Option,{value:"marketing",children:"Marketing"})]}):"manager"===G?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(I.Z.Option,{value:"manager",children:"Qu\u1ea3n l\xfd"}),(0,H.jsx)(I.Z.Option,{value:"employee",children:"Th\u1ee3 ch\u1ee5p \u1ea3nh"}),(0,H.jsx)(I.Z.Option,{value:"sale",children:"Sale"}),(0,H.jsx)(I.Z.Option,{value:"marketing",children:"Marketing"})]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(I.Z.Option,{value:"employee",children:"Th\u1ee3 ch\u1ee5p \u1ea3nh"}),(0,H.jsx)(I.Z.Option,{value:"sale",children:"Sale"}),(0,H.jsx)(I.Z.Option,{value:"marketing",children:"Marketing"})]})})})]}),(0,H.jsx)(F.x,{control:$,name:"address",label:"\u0110\u1ecba ch\u1ec9",children:(0,H.jsx)(q.Z,{placeholder:"Nh\u1eadp \u0111\u1ecba ch\u1ec9"})}),(0,H.jsx)("div",{className:"py-6",children:(0,H.jsx)(F.x,{control:$,name:"avatar",label:"Upload h\xecnh \u1ea3nh",children:(0,H.jsxs)(R,(0,w.Z)((0,w.Z)({},re),{},{children:[(0,H.jsx)("p",{className:"ant-upload-drag-icon",children:(0,H.jsx)(C.Z,{})}),(0,H.jsx)("p",{className:"ant-upload-text",children:"Nh\u1ea5p ho\u1eb7c k\xe9o t\u1ec7p v\xe0o khu v\u1ef1c n\xe0y \u0111\u1ec3 t\u1ea3i l\xean"}),(0,H.jsx)("p",{className:"ant-upload-hint",children:"H\u1ed7 tr\u1ee3 t\u1ea3i l\xean m\u1ed9t l\u1ea7n ho\u1eb7c h\xe0ng lo\u1ea1t. Nghi\xeam c\u1ea5m t\u1ea3i l\xean d\u1eef li\u1ec7u c\xf4ng ty ho\u1eb7c c\xe1c th\xf4ng tin kh\xe1c"})]}))})}),(0,H.jsx)(Q.ZP,{loading:f,disabled:!(0,D.isEmpty)(W),type:"primary",htmlType:"submit",block:!0,size:"large",children:"C\u1eadp nh\u1eadt"})]})]})}var U=t(93433),X=t(4942),G=t(78302),K=t(30368),$=t(31773),Y=t(51678),W=t(71234),ee=t(36473),ne=t(66106),te=t(30914),ie=t(89862),re=t(77128),se=t(20952),ae=t(24215),le=t(79286),ce=t(31752),oe=t(82622),de=t(86533),ue=t(29529),me=t(13876),he=t(11890),pe=t(56200),xe=t(90897),ve=t(92414),ge=t(20292),fe=t(9168),je=t(40050),ye=t(4210),Ze=t(65323),be=t(29655),we=G.Z.Title,Ne=G.Z.Text,ke=G.Z.Paragraph,Ce=K.Z.TabPane,Oe=I.Z.Option,Se=[{id:"view",name:"Xem",icon:(0,H.jsx)(ae.Z,{}),color:"blue"},{id:"create",name:"Th\xeam",icon:(0,H.jsx)(le.Z,{}),color:"green"},{id:"edit",name:"S\u1eeda",icon:(0,H.jsx)(ce.Z,{}),color:"orange"},{id:"delete",name:"Xo\xe1",icon:(0,H.jsx)(oe.Z,{}),color:"red"}],Pe=[{id:"ecommerce",name:"Ecommerce",icon:(0,H.jsx)(de.Z,{className:"text-lg"}),description:"Qu\u1ea3n l\xfd c\u1eeda h\xe0ng tr\u1ef1c tuy\u1ebfn v\xe0 b\xe1n h\xe0ng"},{id:"employees",name:"Nh\xe2n vi\xean",icon:(0,H.jsx)(ue.Z,{className:"text-lg"}),description:"Qu\u1ea3n l\xfd th\xf4ng tin v\xe0 ph\xe2n quy\u1ec1n nh\xe2n vi\xean"},{id:"contracts",name:"H\u1ee3p \u0111\u1ed3ng",icon:(0,H.jsx)(me.Z,{className:"text-lg"}),description:"Qu\u1ea3n l\xfd h\u1ee3p \u0111\u1ed3ng v\xe0 t\xe0i li\u1ec7u ph\xe1p l\xfd"},{id:"wedding-dresses",name:"V\xe1y C\u01b0\u1edbi",icon:(0,H.jsx)(he.Z,{className:"text-lg"}),description:"Qu\u1ea3n l\xfd danh m\u1ee5c v\xe1y c\u01b0\u1edbi v\xe0 trang ph\u1ee5c"},{id:"member-management",name:"Qu\u1ea3n l\xfd th\xe0nh vi\xean",icon:(0,H.jsx)(pe.Z,{className:"text-lg"}),description:"Qu\u1ea3n l\xfd h\u1ed9i vi\xean v\xe0 kh\xe1ch h\xe0ng th\xe2n thi\u1ebft"},{id:"pricing",name:"B\u1ea3ng gi\xe1",icon:(0,H.jsx)(xe.Z,{className:"text-lg"}),description:"Qu\u1ea3n l\xfd gi\xe1 c\u1ea3 v\xe0 ch\xednh s\xe1ch gi\xe1"},{id:"page-management",name:"Qu\u1ea3n l\xfd Trang",icon:(0,H.jsx)(ve.Z,{className:"text-lg"}),description:"Qu\u1ea3n l\xfd n\u1ed9i dung trang web v\xe0 CMS"},{id:"customer-contact",name:"Th\xf4ng tin li\xean h\u1ec7 kh\xe1ch h\xe0ng",icon:(0,H.jsx)(ge.Z,{className:"text-lg"}),description:"Qu\u1ea3n l\xfd th\xf4ng tin li\xean h\u1ec7 v\xe0 CSKH"},{id:"booking-schedule",name:"L\u1ecbch \u0111\u1eb7t c\u1ee7a kh\xe1ch h\xe0ng",icon:(0,H.jsx)(fe.Z,{className:"text-lg"}),description:"Qu\u1ea3n l\xfd l\u1ecbch h\u1eb9n v\xe0 \u0111\u1eb7t ch\u1ed7"},{id:"machine-schedule",name:"L\u1ecbch b\u1ea5m m\xe1y c\u1ee7a kh\xe1ch h\xe0ng",icon:(0,H.jsx)(je.Z,{className:"text-lg"}),description:"Qu\u1ea3n l\xfd l\u1ecbch ch\u1ee5p \u1ea3nh v\xe0 s\u1eed d\u1ee5ng thi\u1ebft b\u1ecb"}],Te=function(e){switch(e){case"blue":return"bg-blue-50 border-blue-200 text-blue-700";case"green":return"bg-green-50 border-green-200 text-green-700";case"orange":return"bg-orange-50 border-orange-200 text-orange-700";case"red":return"bg-red-50 border-red-200 text-red-700";default:return"bg-gray-50 border-gray-200"}};function qe(e){var n,t,l,c=e.data,o=e.refetch,d=e.handleCancel,u=(0,p.useQueryClient)(),x=(0,Z.hJ)(b.R,"employee"),v=(0,a.useState)({}),g=(0,s.Z)(v,2),f=g[0],y=g[1],N=(0,a.useState)("permissions"),k=(0,s.Z)(N,2),C=k[0],O=k[1],S=(0,a.useState)(null),P=(0,s.Z)(S,2),T=P[0],q=P[1],z=(0,a.useState)(!0),D=(0,s.Z)(z,2),E=D[0],M=D[1],V=(0,a.useState)(!1),F=(0,s.Z)(V,2),J=F[0],A=F[1],R=(0,a.useState)(null),_=(0,s.Z)(R,2),B=_[0],G=_[1];(0,a.useEffect)((function(){if(null!==c&&void 0!==c&&c.permission){var e;q(null===c||void 0===c?void 0:c.permission);var n=L.I.find((function(e){return e.id===(null===c||void 0===c?void 0:c.permission)})),t=(0,w.Z)((0,w.Z)({},n),{},{permissions:null!==(e=null===c||void 0===c?void 0:c.permissions)&&void 0!==e?e:{}});if(n){var i=xe(t.permissions);y(i),console.log("Profile loaded:",n.name),console.log("Original permissions:",t.permissions),console.log("Mapped to UI:",i),console.log("Summary:",ve(i))}}}),[c]),(0,a.useEffect)((function(){if(T&&!E){var e=L.I.find((function(e){return e.id===T}));if(e){var n=xe(e.permissions);y(n),console.log("Profile loaded:",e.name),console.log("Original permissions:",e.permissions),console.log("Mapped to UI:",n),console.log("Summary:",ve(n))}}}),[T,E]);var de=function(e){q(e),M(!1)},ue=function(){M(!0)},me=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){var n,t,s,a,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T?L.I.find((function(e){return e.id===T})):null,s={baseProfile:t?{id:t.id,name:t.name,description:t.description}:null,isCustomized:E,permissions:f,summary:{totalModules:pe(),totalOperations:Object.values(f).flat().length,editableModules:Object.values(f).filter((function(e){return e.includes("edit")})).length,deletableModules:Object.values(f).filter((function(e){return e.includes("delete")})).length},timestamp:(new Date).toISOString()},a=(0,Z.JU)(x,c.id),l=(0,w.Z)((0,w.Z)({},c),{},{permission:null===s||void 0===s||null===(n=s.baseProfile)||void 0===n?void 0:n.id,permissions:null===s||void 0===s?void 0:s.permissions}),e.next=6,(0,Z.r7)(a,l);case 6:return u.invalidateQueries("employee"),setTimeout((0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),300),G(s),be.Am.success("\u0110\xe3 l\u01b0u c\u1ea5u h\xecnh quy\u1ec1n th\xe0nh c\xf4ng!",{position:be.Am.POSITION.TOP_RIGHT}),null===d||void 0===d||d(),e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){return Pe.filter((function(e){var n;return(null===(n=f[e.id])||void 0===n?void 0:n.length)>0}))},pe=function(){return Object.keys(f).filter((function(e){return f[e].length>0})).length},xe=function(e){var n={};return Pe.forEach((function(t){var i=(e[t.id]||[]).filter((function(e){return Se.some((function(n){return n.id===e}))}));i.length>0&&(n[t.id]=i)})),n},ve=function(e){var n=Object.keys(e).filter((function(n){return e[n].length>0})),t=Object.values(e).flat().length,i=Object.values(e).filter((function(e){return e.includes("edit")})).length,r=Object.values(e).filter((function(e){return e.includes("delete")})).length;return{totalModules:n.length,totalOperations:t,editableModules:i,deletableModules:r,modulesList:n}},ge=function(e){var n=L.I.find((function(n){return n.id===e}));if(n){console.group("\ud83c\udfaf DEMO MAPPING: ".concat(n.name)),console.log("\ud83d\udcc4 Original JSON Data:",n),console.log("\ud83d\udd0d Permissions Object:",n.permissions);var t=xe(n.permissions);console.log("\u2705 Mapped to UI:",t),Object.entries(n.permissions).forEach((function(e){var n,i=(0,s.Z)(e,2),r=i[0],a=i[1],l=(null===(n=Pe.find((function(e){return e.id===r})))||void 0===n?void 0:n.name)||r;console.log("\ud83d\udccb ".concat(l," (").concat(r,"):"),{original:a,mapped:t[r]||[],uiDisplay:a.map((function(e){var n=Se.find((function(n){return n.id===e}));return n?"".concat(n.name," (").concat(e,")"):e}))})}));var i=ve(t);console.log("\ufffd\ufffd Summary:",i),console.groupEnd(),de(e)}},fe=[{title:"T\xean",dataIndex:"name",key:"name",render:function(){return(0,H.jsx)("div",{className:"w-24 h-3 bg-gray-200 rounded animate-pulse"})}},{title:"Tr\u1ea1ng th\xe1i",dataIndex:"status",key:"status",render:function(){return(0,H.jsx)("div",{className:"w-16 h-3 bg-gray-200 rounded animate-pulse"})}},{title:"Ng\xe0y t\u1ea1o",dataIndex:"date",key:"date",render:function(){return(0,H.jsx)("div",{className:"w-20 h-3 bg-gray-200 rounded animate-pulse"})}},{title:"Thao t\xe1c",key:"action",render:function(){var e=he()[0],n=e&&f[e.id]||[];return(0,H.jsxs)($.Z,{children:[n.includes("view")&&(0,H.jsx)(Q.ZP,{type:"text",size:"small",icon:(0,H.jsx)(ae.Z,{})}),n.includes("edit")&&(0,H.jsx)(Q.ZP,{type:"text",size:"small",icon:(0,H.jsx)(ce.Z,{})}),n.includes("delete")&&(0,H.jsx)(Q.ZP,{type:"text",size:"small",danger:!0,icon:(0,H.jsx)(oe.Z,{})})]})}}],je=[{key:"1"},{key:"2"},{key:"3"}];return(0,H.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[(0,H.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-100",children:(0,H.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:(0,H.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,H.jsxs)("div",{className:"flex items-center gap-4",children:[(0,H.jsx)("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,H.jsx)(j.Z,{className:"text-white text-xl"})}),(0,H.jsxs)("div",{children:[(0,H.jsx)(we,{level:2,className:"!mb-1",children:"Qu\u1ea3n l\xfd quy\u1ec1n truy c\u1eadp"}),(0,H.jsx)(Ne,{type:"secondary",children:"C\u1ea5u h\xecnh v\xe0 xem tr\u01b0\u1edbc quy\u1ec1n h\u1ea1n ng\u01b0\u1eddi d\xf9ng"})]})]}),(0,H.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[(0,H.jsxs)("div",{className:"flex items-center gap-2",children:[(0,H.jsx)(ye.Z,{}),(0,H.jsx)(Ne,{strong:!0,children:"Ch\u1ecdn vai tr\xf2:"}),(0,H.jsx)(I.Z,{style:{width:200},placeholder:"Ch\u1ecdn vai tr\xf2 s\u1eb5n c\xf3",value:T,onChange:de,allowClear:!0,onClear:ue,children:L.I.map((function(e){return(0,H.jsx)(Oe,{value:e.id,children:e.name},e.id)}))})]}),(0,H.jsx)(Y.Z,{count:"".concat(pe()," quy\u1ec1n \u0111\xe3 ch\u1ecdn"),style:{backgroundColor:"#1890ff"}}),(0,H.jsx)(Q.ZP,{type:"primary",icon:(0,H.jsx)(Ze.Z,{}),onClick:me,disabled:0===pe(),children:"L\u01b0u quy\u1ec1n"}),(0,H.jsx)(Q.ZP,{type:"preview"===C?"primary":"default",icon:(0,H.jsx)(ae.Z,{}),onClick:function(){return O("preview"===C?"permissions":"preview")},children:"preview"===C?"Ch\u1ec9nh s\u1eeda quy\u1ec1n":"Xem tr\u01b0\u1edbc"})]})]})})}),(0,H.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:(0,H.jsxs)(K.Z,{activeKey:C,onChange:O,size:"large",className:"mb-8",children:[(0,H.jsx)(Ce,{tab:(0,H.jsxs)("span",{children:[(0,H.jsx)(j.Z,{}),"C\u1ea5u h\xecnh quy\u1ec1n"]}),children:(0,H.jsxs)($.Z,{direction:"vertical",size:"large",className:"w-full",children:[T&&!E&&(0,H.jsx)($.Z,{direction:"vertical",size:"middle",className:"w-full",children:(0,H.jsx)(W.Z,{type:"info",showIcon:!0,message:(0,H.jsxs)("div",{children:[(0,H.jsxs)(Ne,{strong:!0,children:["\u0110ang s\u1eed d\u1ee5ng vai tr\xf2: ",null===(n=L.I.find((function(e){return e.id===T})))||void 0===n?void 0:n.name]}),(0,H.jsx)("br",{}),(0,H.jsx)(Ne,{type:"secondary",children:null===(t=L.I.find((function(e){return e.id===T})))||void 0===t?void 0:t.description})]}),action:(0,H.jsx)(Q.ZP,{size:"small",onClick:ue,children:"T\xf9y ch\u1ec9nh quy\u1ec1n"})})}),E&&(0,H.jsx)(W.Z,{type:"warning",showIcon:!0,message:"Ch\u1ebf \u0111\u1ed9 t\xf9y ch\u1ec9nh".concat(T?" (D\u1ef1a tr\xean: ".concat(null===(l=L.I.find((function(e){return e.id===T})))||void 0===l?void 0:l.name,")"):""),description:T?"B\u1ea1n \u0111ang t\xf9y ch\u1ec9nh quy\u1ec1n d\u1ef1a tr\xean vai tr\xf2 \u0111\xe3 ch\u1ecdn. C\xe1c thay \u0111\u1ed5i s\u1ebd \u0111\u01b0\u1ee3c l\u01b0u ri\xeang bi\u1ec7t.":"B\u1ea1n \u0111ang t\xf9y ch\u1ec9nh quy\u1ec1n th\u1ee7 c\xf4ng. Ch\u1ecdn m\u1ed9t vai tr\xf2 \u1edf tr\xean \u0111\u1ec3 s\u1eed d\u1ee5ng c\u1ea5u h\xecnh c\xf3 s\u1eb5n l\xe0m c\u01a1 s\u1edf.",action:T?(0,H.jsx)(Q.ZP,{size:"small",onClick:function(){return M(!1)},children:"V\u1ec1 vai tr\xf2 g\u1ed1c"}):(0,H.jsxs)($.Z,{wrap:!0,children:[(0,H.jsx)(Q.ZP,{size:"small",type:"primary",onClick:function(){return ge("admin")},children:"Demo Admin"}),(0,H.jsx)(Q.ZP,{size:"small",onClick:function(){return ge("sale")},children:"Demo Sale"}),(0,H.jsx)(Q.ZP,{size:"small",onClick:function(){return ge("marketing")},children:"Demo Marketing"})]}),className:"mb-4"}),(0,H.jsxs)(ee.Z,{children:[(0,H.jsxs)(we,{level:4,className:"!mb-2",children:[(0,H.jsx)(j.Z,{className:"text-blue-600 mr-2"}),"Ch\u1ecdn quy\u1ec1n truy c\u1eadp"]}),(0,H.jsx)(ke,{type:"secondary",className:"!mb-6",children:"Ch\u1ecdn c\xe1c quy\u1ec1n m\xe0 ng\u01b0\u1eddi d\xf9ng c\xf3 th\u1ec3 truy c\u1eadp trong h\u1ec7 th\u1ed1ng"}),(0,H.jsx)(ne.Z,{gutter:[24,24],children:Pe.map((function(e){var n,t=(null===(n=f[e.id])||void 0===n?void 0:n.length)>0,i=f[e.id]||[];return(0,H.jsx)(te.Z,{xs:24,md:12,lg:8,children:(0,H.jsxs)(ee.Z,{size:"small",className:"transition-all duration-200 ".concat(E?"cursor-pointer hover:shadow-lg":"opacity-75"," ").concat(t?"border-blue-300 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-200 hover:shadow-md"),bodyStyle:{padding:"20px"},children:[(0,H.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[(0,H.jsx)(ie.Z,{checked:t,disabled:!E,onChange:function(n){return t=e.id,i=n.target.checked,M(!0),void y(i?function(e){return(0,w.Z)((0,w.Z)({},e),{},(0,X.Z)({},t,["view"]))}:function(e){var n=(0,w.Z)({},e);return delete n[t],n});var t,i}}),(0,H.jsxs)("div",{className:"flex-1",children:[(0,H.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,H.jsx)("div",{className:"p-2 rounded transition-colors ".concat(t?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"),children:e.icon}),(0,H.jsx)(we,{level:5,className:"!mb-0 !text-sm",children:e.name})]}),(0,H.jsx)(Ne,{type:"secondary",className:"text-xs leading-relaxed",children:e.description})]})]}),t&&(0,H.jsxs)("div",{className:"ml-7",children:[(0,H.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,H.jsx)(j.Z,{className:"text-blue-600 text-xs"}),(0,H.jsx)(Ne,{strong:!0,className:"text-xs text-blue-900",children:"Quy\u1ec1n thao t\xe1c"})]}),(0,H.jsx)(ne.Z,{gutter:[8,8],children:Se.map((function(n){return(0,H.jsx)(te.Z,{span:12,children:(0,H.jsx)("div",{className:"p-2 rounded-lg border transition-all cursor-pointer ".concat(i.includes(n.id)?Te(n.color):"bg-gray-50 border-gray-200 hover:bg-gray-100"),children:(0,H.jsx)(ie.Z,{checked:i.includes(n.id),disabled:!E,onChange:function(t){return function(e,n,t){M(!0),y((function(i){var r=i[e]||[];return t?(0,w.Z)((0,w.Z)({},i),{},(0,X.Z)({},e,[].concat((0,U.Z)(r),[n]))):(0,w.Z)((0,w.Z)({},i),{},(0,X.Z)({},e,r.filter((function(e){return e!==n}))))}))}(e.id,n.id,t.target.checked)},className:"w-full",children:(0,H.jsxs)("div",{className:"flex items-center gap-1",children:[n.icon,(0,H.jsx)(Ne,{className:"text-xs font-medium",children:n.name})]})})})},n.id)}))})]})]})},e.id)}))})]}),(0,H.jsxs)(ee.Z,{children:[(0,H.jsx)(we,{level:4,className:"!mb-4",children:"T\xf3m t\u1eaft quy\u1ec1n \u0111\xe3 ch\u1ecdn"}),pe()>0?(0,H.jsxs)($.Z,{direction:"vertical",size:"large",className:"w-full",children:[(0,H.jsxs)(ne.Z,{gutter:16,children:[(0,H.jsx)(te.Z,{span:6,children:(0,H.jsxs)(ee.Z,{size:"small",className:"text-center bg-blue-50 border-blue-200",children:[(0,H.jsx)(Ne,{strong:!0,className:"text-blue-600 text-lg",children:pe()}),(0,H.jsx)("br",{}),(0,H.jsx)(Ne,{type:"secondary",className:"text-xs",children:"M\xf4-\u0111un \u0111\u01b0\u1ee3c c\u1ea5p quy\u1ec1n"})]})}),(0,H.jsx)(te.Z,{span:6,children:(0,H.jsxs)(ee.Z,{size:"small",className:"text-center bg-green-50 border-green-200",children:[(0,H.jsx)(Ne,{strong:!0,className:"text-green-600 text-lg",children:Object.values(f).flat().length}),(0,H.jsx)("br",{}),(0,H.jsx)(Ne,{type:"secondary",className:"text-xs",children:"T\u1ed5ng s\u1ed1 quy\u1ec1n thao t\xe1c"})]})}),(0,H.jsx)(te.Z,{span:6,children:(0,H.jsxs)(ee.Z,{size:"small",className:"text-center bg-orange-50 border-orange-200",children:[(0,H.jsx)(Ne,{strong:!0,className:"text-orange-600 text-lg",children:Object.values(f).filter((function(e){return e.includes("edit")})).length}),(0,H.jsx)("br",{}),(0,H.jsx)(Ne,{type:"secondary",className:"text-xs",children:"C\xf3 quy\u1ec1n ch\u1ec9nh s\u1eeda"})]})}),(0,H.jsx)(te.Z,{span:6,children:(0,H.jsxs)(ee.Z,{size:"small",className:"text-center bg-red-50 border-red-200",children:[(0,H.jsx)(Ne,{strong:!0,className:"text-red-600 text-lg",children:Object.values(f).filter((function(e){return e.includes("delete")})).length}),(0,H.jsx)("br",{}),(0,H.jsx)(Ne,{type:"secondary",className:"text-xs",children:"C\xf3 quy\u1ec1n x\xf3a"})]})})]}),(0,H.jsx)(re.Z,{}),he().map((function(e){var n=f[e.id]||[];return(0,H.jsxs)(ee.Z,{size:"small",className:"bg-gray-50",children:[(0,H.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[e.icon,(0,H.jsx)(Ne,{strong:!0,children:e.name}),(0,H.jsx)(Y.Z,{count:n.length,size:"small",style:{backgroundColor:"#52c41a"}})]}),(0,H.jsx)($.Z,{wrap:!0,children:n.map((function(e){var n=Se.find((function(n){return n.id===e}));return n?(0,H.jsx)(se.Z,{color:n.color,icon:n.icon,children:n.name},e):null}))})]},e.id)}))]}):(0,H.jsxs)("div",{className:"text-center py-12",children:[(0,H.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,H.jsx)(j.Z,{className:"text-gray-400 text-2xl"})}),(0,H.jsx)(we,{level:4,type:"secondary",children:"Ch\u01b0a c\xf3 quy\u1ec1n n\xe0o \u0111\u01b0\u1ee3c ch\u1ecdn"}),(0,H.jsx)(Ne,{type:"secondary",children:"H\xe3y ch\u1ecdn m\u1ed9t vai tr\xf2 \u1edf tr\xean ho\u1eb7c t\xf9y ch\u1ec9nh quy\u1ec1n th\u1ee7 c\xf4ng"})]})]})]})},"permissions"),(0,H.jsx)(Ce,{tab:(0,H.jsxs)("span",{children:[(0,H.jsx)(ae.Z,{}),"Xem tr\u01b0\u1edbc giao di\u1ec7n"]}),children:(0,H.jsxs)(ee.Z,{children:[(0,H.jsxs)(we,{level:4,className:"!mb-2",children:[(0,H.jsx)(ae.Z,{className:"text-blue-600 mr-2"}),"Xem tr\u01b0\u1edbc giao di\u1ec7n admin"]}),(0,H.jsx)(ke,{type:"secondary",className:"!mb-6",children:"\u0110\xe2y l\xe0 giao di\u1ec7n m\xe0 ng\u01b0\u1eddi d\xf9ng s\u1ebd th\u1ea5y v\u1edbi c\xe1c quy\u1ec1n \u0111\xe3 \u0111\u01b0\u1ee3c c\u1ea5p"}),0===pe()?(0,H.jsxs)("div",{className:"text-center py-16",children:[(0,H.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,H.jsx)(j.Z,{className:"text-gray-400 text-3xl"})}),(0,H.jsx)(we,{level:3,type:"secondary",children:"Ch\u01b0a c\xf3 quy\u1ec1n n\xe0o \ufffd\ufffd\u01b0\u1ee3c ch\u1ecdn"}),(0,H.jsx)(ke,{type:"secondary",className:"mb-6",children:"Vui l\xf2ng ch\u1ecdn \xedt nh\u1ea5t m\u1ed9t quy\u1ec1n \u0111\u1ec3 xem tr\u01b0\u1edbc giao di\u1ec7n"}),(0,H.jsx)(Q.ZP,{type:"primary",onClick:function(){return O("permissions")},children:"Ch\u1ecdn quy\u1ec1n"})]}):(0,H.jsx)("div",{className:"space-y-6",children:(0,H.jsxs)(ee.Z,{className:"bg-gray-50",children:[(0,H.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,H.jsx)(we,{level:3,className:"!mb-0",children:"Dashboard Admin"}),(0,H.jsxs)("div",{className:"flex items-center gap-2",children:[(0,H.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,H.jsx)(Ne,{type:"secondary",children:"Ho\u1ea1t \u0111\u1ed9ng"})]})]}),(0,H.jsx)(K.Z,{type:"line",className:"mb-6",items:he().map((function(e,n){var t=f[e.id]||[];return{key:e.id,label:(0,H.jsxs)("span",{className:"flex items-center gap-2",children:[e.icon,e.name,(0,H.jsx)(Y.Z,{count:t.length,size:"small"})]}),children:(0,H.jsxs)(ee.Z,{children:[(0,H.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[e.icon,(0,H.jsx)(we,{level:4,className:"!mb-0",children:e.name})]}),(0,H.jsx)(ke,{type:"secondary",className:"mb-6",children:e.description}),(0,H.jsxs)("div",{className:"mb-6",children:[(0,H.jsx)(we,{level:5,className:"!mb-3",children:"Quy\u1ec1n thao t\xe1c \u0111\u01b0\u1ee3c c\u1ea5p"}),(0,H.jsx)($.Z,{wrap:!0,children:t.map((function(e){var n=Se.find((function(n){return n.id===e}));return n?(0,H.jsx)(se.Z,{color:n.color,icon:n.icon,children:n.name},e):null}))})]}),(0,H.jsxs)("div",{className:"space-y-4",children:[(0,H.jsxs)("div",{className:"flex items-center justify-between",children:[(0,H.jsx)(we,{level:5,className:"!mb-0",children:"D\u1eef li\u1ec7u m\u1eabu"}),t.includes("create")&&(0,H.jsx)(Q.ZP,{type:"primary",size:"small",icon:(0,H.jsx)(le.Z,{}),children:"Th\xeam m\u1edbi"})]}),(0,H.jsx)(m.Z,{columns:fe,dataSource:je,pagination:!1,size:"small"})]})]})}}))}),(0,H.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,H.jsxs)("div",{className:"flex items-start gap-3",children:[(0,H.jsx)("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:(0,H.jsx)(ae.Z,{className:"text-white text-xs"})}),(0,H.jsxs)("div",{children:[(0,H.jsx)(we,{level:5,className:"!mb-1 !text-blue-900",children:"L\u01b0u \xfd v\u1ec1 xem tr\u01b0\u1edbc"}),(0,H.jsx)(Ne,{className:"text-blue-700 text-sm",children:"\u0110\xe2y l\xe0 b\u1ea3n xem tr\u01b0\u1edbc m\xf4 ph\u1ecfng. Trong th\u1ef1c t\u1ebf, ng\u01b0\u1eddi d\xf9ng ch\u1ec9 c\xf3 th\u1ec3 truy c\u1eadp c\xe1c tab v\xe0 ch\u1ee9c n\u0103ng t\u01b0\u01a1ng \u1ee9ng v\u1edbi quy\u1ec1n \u0111\xe3 \u0111\u01b0\u1ee3c c\u1ea5p."})]})]})})]})})]})},"preview")]})}),(0,H.jsx)(h.Z,{title:"D\u1eef li\u1ec7u quy\u1ec1n \u0111\xe3 l\u01b0u",open:J,onCancel:function(){return A(!1)},footer:[(0,H.jsx)(Q.ZP,{onClick:function(){navigator.clipboard.writeText(JSON.stringify(B,null,2)),be.Am.success("\u0110\xe3 copy d\u1eef li\u1ec7u v\xe0o clipboard!",{position:be.Am.POSITION.TOP_RIGHT})},children:"Copy JSON"},"copy"),(0,H.jsx)(Q.ZP,{type:"primary",onClick:function(){return A(!1)},children:"\u0110\xf3ng"},"close")],width:1200,children:B&&(0,H.jsx)("div",{children:(0,H.jsx)(W.Z,{type:"success",message:"\u0110\xe3 l\u01b0u th\xe0nh c\xf4ng c\u1ea5u h\xecnh quy\u1ec1n".concat(B.baseProfile?' cho vai tr\xf2 "'.concat(B.baseProfile.name,'"'):" t\xf9y ch\u1ec9nh"),description:(0,H.jsxs)("div",{children:[(0,H.jsxs)("p",{children:[(0,H.jsx)("strong",{children:"T\u1ed5ng s\u1ed1 m\xf4-\u0111un:"})," ",B.summary.totalModules]}),(0,H.jsxs)("p",{children:[(0,H.jsx)("strong",{children:"T\u1ed5ng quy\u1ec1n thao t\xe1c:"})," ",B.summary.totalOperations]}),(0,H.jsxs)("p",{children:[(0,H.jsx)("strong",{children:"C\xf3 th\u1ec3 ch\u1ec9nh s\u1eeda:"})," ",B.summary.editableModules," m\xf4-\u0111un"]}),(0,H.jsxs)("p",{children:[(0,H.jsx)("strong",{children:"C\xf3 th\u1ec3 x\xf3a:"})," ",B.summary.deletableModules," m\xf4-\u0111un"]}),(0,H.jsxs)("p",{children:[(0,H.jsx)("strong",{children:"Th\u1eddi gian l\u01b0u:"})," ",new Date(B.timestamp).toLocaleString("vi-VN")]})]}),className:"mb-4"})})})]})}function Ie(){var e=(0,a.useState)(!1),n=(0,s.Z)(e,2),t=n[0],w=n[1],N=(0,a.useState)("edit"),k=(0,s.Z)(N,2),C=k[0],O=k[1],S=(0,a.useState)({id:"",name:"",phone:"",email:"",password:"",address:"",permission:"",username:"",avatar:"https://firebasestorage.googleapis.com/v0/b/mardoll-studio.appspot.com/o/profile.png?alt=media&token=317fa84c-f068-47d4-aa48-4943fad74b2b",createAt:""}),P=(0,s.Z)(S,2),T=P[0],q=P[1],I=(0,l.E)(),Q=I.data,z=I.isLoading,D=I.refetchTeam,E=(0,p.useQueryClient)(),M=(0,A.a)().user,V=(null===M||void 0===M?void 0:M.permission)||"",F=(null===M||void 0===M?void 0:M.permissions)||{},L=(0,Z.hJ)(b.R,"employee"),R=function(e){return(0,r.Z)((0,i.Z)().mark((function n(){var t;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=(0,Z.JU)(L,null===e||void 0===e?void 0:e.id),n.next=3,(0,Z.oe)(t);case 3:E.invalidateQueries("employee"),setTimeout((0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),300);case 5:case"end":return n.stop()}}),n)})))},_=function(e,n){return function(){q(e),O(n),console.log("record",e),w(!0)}},U=function(){w(!1),q(null)},X=[{title:"T\xean",dataIndex:"name",key:"name",width:"20%",fixed:"left",sorter:function(e,n){return e.name.localeCompare(n.name)},sortDirections:["descend","ascend"]},{title:"Avatar",dataIndex:"avatar",key:"avatar",width:"10%",render:function(e,n){return(0,H.jsx)(c.C,{src:e})}},{title:"Email",dataIndex:"email",key:"email",width:"10%",sorter:function(e,n){return e.email.localeCompare(n.email)},sortDirections:["descend","ascend"]},{title:"Password",dataIndex:"password",key:"password",width:"10%",sorter:function(e,n){return e.password.localeCompare(n.password)},sortDirections:["descend","ascend"],render:function(e){var n=e.length>0?e.slice(0,0)+"\u2022".repeat(e.length-0):e;return(0,H.jsx)(o.Z,{title:e,children:(0,H.jsx)("p",{children:n})})}},{title:"Phone",dataIndex:"phone",key:"phone",sorter:function(e,n){return e.phone.localeCompare(n.phone)},sortDirections:["descend","ascend"],width:"10%"},{title:"Address",dataIndex:"address",key:"address",sorter:function(e,n){return e.address.localeCompare(n.address)},sortDirections:["descend","ascend"],width:"20%"},{title:"Quy\u1ec1n",dataIndex:"permission",key:"permission",sorter:function(e,n){return e.permission.localeCompare(n.permission)},sortDirections:["descend","ascend"]},{title:"Ch\u1ec9nh s\u1eeda",dataIndex:"",key:"x",render:function(e,n){return(0,H.jsxs)("div",{className:"flex items-center gap-2",children:[(0,J.J5)(F,"employees")&&(0,H.jsx)(o.Z,{title:"Ch\u1ec9nh s\u1eeda",children:(0,H.jsx)(x.Z,{override:v.O.primary,type:"primary",size:"small",disabled:"admin"===(null===n||void 0===n?void 0:n.permission)&&"admin"!==V,icon:(0,H.jsx)(g.fmQ,{}),onClick:_(n,"edit")})}),"admin"===V&&(0,H.jsx)(o.Z,{title:"Ch\u1ec9nh s\u1eeda quy\u1ec1n",children:(0,H.jsx)(x.Z,{override:v.O.listItemTapColor,type:"primary",size:"small",icon:(0,H.jsx)(j.Z,{}),onClick:_(n,"permissions")})}),(0,J.k7)(F,"employees")&&(0,H.jsx)(o.Z,{title:"Xo\xe1",children:(0,H.jsx)(d.Z,{title:"X\xf3a nh\xe2n vi\xean",description:"B\u1ea1n c\xf3 ch\u1eafc l\xe0 mu\u1ed1n x\xf3a nh\xe2n vi\xean?",icon:(0,H.jsx)(y.Z,{style:{color:v.O.red2}}),onConfirm:R(n),children:(0,H.jsx)(x.Z,{override:v.O.red2,type:"primary",size:"small",disabled:"admin"===(null===n||void 0===n?void 0:n.permission)&&"admin"!==V,icon:(0,H.jsx)(f.FH3,{})})})})]})}}];return z?(0,H.jsxs)("div",{className:"m-2 p-2 md:p-10 bg-white rounded-3xl",children:[(0,H.jsx)(u.Z,{active:!0}),(0,H.jsx)(u.Z,{active:!0})]}):(0,H.jsxs)("div",{className:"m-2 p-2 md:p-10 bg-white rounded-3xl",children:[(0,H.jsx)(m.Z,{rowKey:function(e){return e.id},columns:X,dataSource:Q,bordered:!0,scroll:{x:800}}),(0,H.jsx)(h.Z,{title:"".concat("edit"===C?"C\u1eadp nh\u1eadt nh\xe2n vi\xean":"C\u1eadp nh\u1eadt quy\u1ec1 truy c\u1eadp"," "),open:t,footer:null,onCancel:U,width:1500,bodyStyle:{overflowY:"scroll",height:"calc(100vh - 250px)"},children:"edit"===C?(0,H.jsx)(B,{defaultValues:T,handleCancel:U,refetch:D}):(0,H.jsx)(qe,{data:T,handleCancel:U,refetch:D})})]})}},67441:function(e,n,t){t.d(n,{E:function(){return d}});var i=t(74165),r=t(15861),s=t(1413),a=t(54174),l=t(20028),c=t(12481),o=t(18106);function d(){var e=(0,o.a)().user,n=(null===e||void 0===e?void 0:e.permission)||null,t=(0,c.IO)((0,c.hJ)(a.R,"employee")),d=(0,l.sQ)(["employee"],t),u=d.data,m=[];null===u||void 0===u||u.forEach((function(e){m.push((0,s.Z)({id:e.id},e.data()))})),"admin"!==n&&(m=m.filter((function(e){return"admin"!==e.permission})));var h=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.refetch();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error refetching team data:",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return{isError:d.isError,isLoading:d.isLoading,data:m,refetchTeam:h}}},25850:function(e,n,t){t.d(n,{$5:function(){return a},Dw:function(){return s},Gw:function(){return l},Hl:function(){return c},J5:function(){return m},Q_:function(){return v},Rf:function(){return x},cX:function(){return p},k7:function(){return h},uf:function(){return d},xG:function(){return o},yA:function(){return u},z2:function(){return r}});var i=t(763),r=function(){return{pending:"orange",active:"cyan",complete:"green",rejected:"red",canceled:"red"}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pending"]},s=function(){return{offline:"gray",online:"green"}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"offline"]};function a(e){var n,t,i;return e=null===(i=e=null===(n=e)||void 0===n||null===(t=n.normalize("NFD").replace(/[\u0300-\u036f]/g,""))||void 0===t?void 0:t.replace("\u0111","d"))||void 0===i?void 0:i.replace(/\s+/g,"-").toLowerCase()}var l=/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/,c=function(e){return/((^(\+84|84|0|0084){1})(3|5|7|8|9))+([0-9]{8})$/.test(e)},o=function(e){return(0,i.isNil)(e)||(0,i.isEmpty)(e)?"--":parseInt(e).toLocaleString("vi-VN",{style:"currency",currency:"VND"})},d=function(e){return 0===e?"".concat(e.toString()):e>=1e9?"".concat((e/1e9).toFixed(0)," t\u1ef7"):e>=1e6?"".concat((e/1e6).toFixed(0)," tr"):"".concat((e/1e3).toFixed(0)," k")},u=function(e,n){var t;return null===e||void 0===e||null===(t=e[n])||void 0===t?void 0:t.includes("create")},m=function(e,n){var t;return null===e||void 0===e||null===(t=e[n])||void 0===t?void 0:t.includes("edit")},h=function(e,n){var t;return null===e||void 0===e||null===(t=e[n])||void 0===t?void 0:t.includes("delete")},p=function(e,n,t){return function(e,n){var t;return null===e||void 0===e||null===(t=e[n])||void 0===t?void 0:t.includes("view")}(t,e)?n:null},x=function(e){return(0,i.chain)(e).replace(/\D/g,"").toArray().takeRight(3).join("").value()},v=function(e){return(0,i.chain)(e).trim().split(/\s+/).last().defaultTo("").value()}},71781:function(e){e.exports=JSON.parse('{"I":[{"id":"admin","name":"Qu\u1ea3n tr\u1ecb vi\xean","description":"C\xf3 to\xe0n quy\u1ec1n truy c\u1eadp h\u1ec7 th\u1ed1ng","permissions":{"ecommerce":["view","create","edit","delete"],"employees":["view","create","edit","delete"],"contracts":["view","create","edit","delete"],"wedding-dresses":["view","create","edit","delete"],"member-management":["view","create","edit","delete"],"pricing":["view","create","edit","delete"],"page-management":["view","create","edit","delete"],"customer-contact":["view","create","edit","delete"],"booking-schedule":["view","create","edit","delete"],"machine-schedule":["view","create","edit","delete"]}},{"id":"manager","name":"Qu\u1ea3n l\xfd","description":"Qu\u1ea3n l\xfd c\xe1c ho\u1ea1t \u0111\u1ed9ng kinh doanh ch\xednh","permissions":{"ecommerce":["view","create","edit"],"employees":["view","create","edit"],"contracts":["view","create","edit"],"wedding-dresses":["view","create","edit","delete"],"member-management":["view","create","edit"],"pricing":["view","edit"],"page-management":["view","edit"],"customer-contact":["view","create","edit"],"booking-schedule":["view","create","edit","delete"],"machine-schedule":["view","create","edit","delete"]}},{"id":"employee","name":"Th\u1ee3 ch\u1ee5p \u1ea3nh","description":"Chuy\xean vi\xean ch\u1ee5p \u1ea3nh v\xe0 x\u1eed l\xfd h\xecnh \u1ea3nh","permissions":{"machine-schedule":["view"]}},{"id":"sale","name":"Sale","description":"Chuy\xean vi\xean t\u01b0 v\u1ea5n v\xe0 b\xe1n h\xe0ng","permissions":{"contracts":["view","create","edit"],"wedding-dresses":["view","create","edit"],"member-management":["view","create","edit"],"pricing":["view","create","edit","delete"],"page-management":["view","create","edit","delete"],"customer-contact":["view","create","edit","delete"],"booking-schedule":["view","create","edit","delete"],"machine-schedule":["view","create","edit"]}},{"id":"marketing","name":"Marketing","description":"Chuy\xean vi\xean marketing v\xe0 qu\u1ea3ng c\xe1o","permissions":{"contracts":["view","create","edit"],"wedding-dresses":["view","create","edit"],"member-management":["view","create","edit"],"pricing":["view","create","edit","delete"],"page-management":["view","create","edit","delete"],"customer-contact":["view","create","edit","delete"],"booking-schedule":["view","create","edit","delete"],"machine-schedule":["view","create","edit"]}}]}')}}]);
//# sourceMappingURL=1672.a337710c.chunk.js.map