"use strict";(self.webpackChunkmardoll_admin=self.webpackChunkmardoll_admin||[]).push([[5748],{66859:function(e,n,t){t.d(n,{Z:function(){return v}});var i=t(1413),r=t(44925),l=t(72791),o=t(34093),a=t(2641),s=t(76864),u=t(41938),d=t(61758),c=t(80184),h=["children"];function v(e){var n=e.children,t=(0,r.Z)(e,h),v=(0,l.useRef)(null);return(0,c.jsxs)("div",{className:"relative w-full",children:[(0,c.jsx)(o.Z,(0,i.Z)((0,i.Z)({autoplay:!0,ref:v},t),{},{children:n})),(0,c.jsx)("div",{className:"absolute left-6 top-1/2 transform -translate-x-1/2 -translate-y-1/2",children:(0,c.jsx)(a.ZP,{onClick:function(){var e;null===(e=v.current)||void 0===e||e.prev()},shape:"circle",icon:(0,c.jsx)(s.Z,{size:32,color:d.O.primary})})}),(0,c.jsx)("div",{className:"absolute -right-[16px] top-1/2 transform -translate-x-1/2 -translate-y-1/2",children:(0,c.jsx)(a.ZP,{onClick:function(){var e;null===(e=v.current)||void 0===e||e.next()},shape:"circle",icon:(0,c.jsx)(u.Z,{color:d.O.primary,size:32})})})]})}},47701:function(e,n,t){t.d(n,{x:function(){return u}});var i=t(1413),r=t(44925),l=(t(72791),t(93070)),o=t(61134),a=t(80184),s=["children","control","name","help","hasFeedback"],u=function(e){var n,t,u=e.children,d=e.control,c=e.name,h=e.help,v=e.hasFeedback,f=void 0!==v&&v,p=(0,r.Z)(e,s),m=(0,o.bc)({name:c,control:d}),g=m.field,x=m.fieldState,Z=m.formState.errors;return(0,a.jsx)(l.Z.Item,(0,i.Z)((0,i.Z)({hasFeedback:f,name:c,normalize:function(e){return g.onChange(e),e},validateStatus:x.invalid?"error":void 0,help:null!==(n=null===(t=Z[c])||void 0===t?void 0:t.message)&&void 0!==n?n:h},p),{},{children:u}))}},93899:function(e,n,t){t.d(n,{cn:function(){return l}});var i=t(86866),r=t(63733);function l(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,i.m)((0,r.W)(n))}},85748:function(e,n,t){t.r(n),t.d(n,{default:function(){return ge}});var i=t(1413),r=t(29439),l=t(1630),o=t(36473),a=t(30368),s=t(9773),u=t(72791),d=t(66859),c=t(80184);function h(e){var n=e.data;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(d.Z,{autoplay:!0,children:null===n||void 0===n?void 0:n.map((function(e,n){return(0,c.jsx)("div",{className:"h-auto w-full",children:(0,c.jsx)("img",{alt:(null===e||void 0===e?void 0:e.alt)||"",src:null===e||void 0===e?void 0:e.url,className:"w-full h-[300px] object-cover"})},n)}))})})}function v(e){var n=e.title,t=e.subTitle,i=e.content,r=e.subContent,l=e.userName,o=e.userRole;return(0,c.jsxs)("div",{className:"py-16 bg-white text-center px-5",children:[(0,c.jsxs)("h2",{"data-aos":"fade-down",className:"leading-8 uppercase font-dmserif",children:[n," ",(0,c.jsx)("br",{}),t]}),(0,c.jsx)("div",{className:"w-24 border-t border-gray-500 mx-auto text-center divide-x mt-3"}),(0,c.jsxs)("div",{className:"w-full flex flex-col items-center mt-5 font-sans",children:[(0,c.jsx)("p",{"data-aos":"fade-up",className:"max-w-screen-sm font-light md:font-normal text-[#464646] italic",children:i}),(0,c.jsxs)("figure",{className:"max-w-screen-md mt-6","data-aos":"zoom-in-up",children:[(0,c.jsx)("blockquote",{children:(0,c.jsx)("p",{className:"text-md font-semibold text-gray-900 font-dmserif",children:r})}),(0,c.jsx)("figcaption",{className:"flex justify-center mt-6 space-x-3",children:(0,c.jsxs)("div",{className:"flex items-center divide-x-2 divide-gray-300",children:[(0,c.jsx)("cite",{className:"pr-3 font-medium text-gray-900",children:l}),(0,c.jsx)("cite",{className:"pl-3 text-sm text-gray-700",children:o})]})})]})]})]})}var f=t(60573),p=t(763),m=t(93899);function g(e){var n=e.url,t=e.alt,i=e.title,l=e.description,o=e.gallery,a=e.showDescription,s=e.btnShowMore,d=(0,u.useState)(!1),h=(0,r.Z)(d,2),v=h[0],g=h[1];return console.log("url",n),(0,c.jsxs)("div",{"data-aos":"zoom-in",className:"group w-full h-[400px] relative cursor-pointer items-center justify-center overflow-hidden transition-shadow hover:shadow-xl hover:shadow-black/30",children:[(0,c.jsx)(f.Z.PreviewGroup,{items:(0,p.map)(o,"url"),preview:{visible:v,onVisibleChange:function(e){g(e)}},children:(0,c.jsx)("img",{src:n,alt:t,className:"h-full w-full object-cover inset-0 bg-cover bg-no-repeat bg-center transition-transform duration-500 group-hover:rotate-3 group-hover:scale-125"})}),(0,c.jsx)("div",{className:"absolute backdrop-brightness-50 inset-0 bg-gradient-to-b from-transparent via-transparent to-black/5 group-hover:from-black/70 group-hover:via-black/60 group-hover:to-black/70"}),(0,c.jsxs)("div",{className:(0,m.cn)("absolute inset-0 flex flex-col items-center justify-center px-9 text-center transition-all duration-500 group-hover:translate-y-0",a?"translate-y-[55%]":"translate-y-[35%]"),children:[(0,c.jsx)("h2",{className:"font-dmserif text-2xl font-bold text-white",children:i}),a&&(0,c.jsx)("p",{className:"mb-3 text-lg italic text-white opacity-0 transition-opacity duration-300 group-hover:opacity-100",children:l}),s&&(0,c.jsx)("button",{onClick:function(){return g(!0)},className:"rounded-full bg-neutral-900 py-2 px-3.5 font-com text-sm capitalize text-white shadow shadow-black/60 cursor-pointer",children:"Xem th\xeam"})]})]})}function x(e){var n,t=e.services;return(0,c.jsx)("div",{className:(0,m.cn)("grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-4",null!==(n={1:"lg:grid-cols-1",2:"lg:grid-cols-2",3:"lg:grid-cols-3",4:"lg:grid-cols-4"}[null===t||void 0===t?void 0:t.length])&&void 0!==n?n:"lg:grid-cols-1"),children:null===t||void 0===t?void 0:t.map((function(e,n){return(0,c.jsx)(g,(0,i.Z)({showDescription:!0,btnShowMore:!0},e),n)}))})}function Z(e){var n=e.stories;return(0,c.jsxs)("div",{className:"py-16 bg-white text-center px-5",children:[(0,c.jsx)("h2",{"data-aos":"fade-down",className:"leading-8 uppercase font-dmserif",children:null===n||void 0===n?void 0:n.title}),(0,c.jsx)("div",{className:"w-24 border-t border-gray-500 mx-auto text-center divide-x mt-3"}),(0,c.jsx)("div",{className:"w-full flex flex-col items-center my-5 font-sans",children:(0,c.jsx)("p",{"data-aos":"fade-up",className:"max-w-screen-sm font-medium md:font-lighttext-gray-700 md:text-[#464646] italic",children:null===n||void 0===n?void 0:n.content})})]})}function y(e){var n=e.reviewer,t=e.titleReviewer;return(0,c.jsxs)("div",{className:"py-16 bg-white text-center px-5",children:[(0,c.jsx)("h2",{"data-aos":"fade-down",className:"leading-8 uppercase font-dmserif",children:t}),(0,c.jsx)("div",{className:"w-24 border-t border-gray-500 mx-auto text-center divide-x mt-3"}),(0,c.jsx)("div",{className:"relative pt-6",children:(0,c.jsx)(d.Z,{autoplay:!0,dots:!1,children:null===n||void 0===n?void 0:n.map((function(e,n){return(0,c.jsxs)("div",{className:"bg-white text-center",children:[(0,c.jsx)("p",{className:"mx-auto max-w-4xl text-xl italic text-neutral-700",children:null===e||void 0===e?void 0:e.content}),(0,c.jsx)("div",{className:"mb-6 mt-12 flex justify-center",children:(0,c.jsx)("div",{className:"rounded-full overflow-hidden h-24 w-24",children:(0,c.jsx)(f.Z,{src:null===e||void 0===e?void 0:e.url,alt:null===e||void 0===e?void 0:e.alt,width:96,height:96,className:"w-full h-full object-cover"})})}),(0,c.jsx)("p",{className:"text-neutral-500",children:null===e||void 0===e?void 0:e.userName})]},n)}))})})]})}var w=t(74165),j=t(93433),b=t(15861),N=t(93070),C=t(4206),k=t(2641),F=t(61134),S=t(44695),T=t(8007),R=t(54261),P=t(30276),E=t(12481),V=t(54174),I=t(47701),D=t(54941),U=t(66776),q=t(20028),L=t(91933),B={hero:[]},J=T.Ry({hero:T.nK().required("Vui l\xf2ng upload file h\xecnh \u1ea3nh").test("fileEmpty","Vui l\xf2ng upload file h\xecnh \u1ea3nh",(function(e){return 0!==(null===e||void 0===e?void 0:e.length)}))}).required();function W(e){var n,t=e.data,l=e.refetch,o=e.handleCancel,a=(0,u.useRef)(null),s=N.Z.useForm(),d=(0,r.Z)(s,1)[0],h=C.ZP.useMessage(),v=(0,r.Z)(h,2),f=v[0],m=v[1],g=(0,u.useState)(!1),x=(0,r.Z)(g,2),Z=x[0],y=x[1],T=(0,u.useState)([]),W=(0,r.Z)(T,2),A=W[0],_=W[1],M=(0,E.hJ)(V.R,"homePage"),O=((0,q.b)(M),(0,L.useQueryClient)()),Q=(0,F.cI)({defaultValues:{hero:null===t||void 0===t||null===(n=t[0])||void 0===n?void 0:n.hero},resolver:(0,S.X)(J)}),H=Q.control,z=Q.handleSubmit,K=Q.formState.errors,G=Q.reset,X=(Q.getValues,Q.setValue),Y=(0,R.Z)();(0,u.useEffect)((function(){var e,n;d.setFieldsValue({hero:null===t||void 0===t||null===(e=t[0])||void 0===e?void 0:e.hero}),_((null===t||void 0===t||null===(n=t[0])||void 0===n?void 0:n.hero)||[])}),[t,d]);var $=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"done"===n.file.status?(_((function(e){return[].concat((0,j.Z)(e),[{id:Y,url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}])})),X("hero",[].concat((0,j.Z)(A),[{id:Y,url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}])),C.ZP.success("".concat(n.file.name," file uploaded successfully"))):"error"===n.file.status&&C.ZP.error("".concat(n.file.name," file upload failed."));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ee=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){var t,i,r,l;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.file,i=n.onSuccess,r=n.onError;try{(l=new FileReader).readAsDataURL(t),l.onload=function(e){var n=new Image;n.src=e.target.result,n.onload=function(){var e,r,l=1290,o=n.width/n.height;n.width>l||n.height>800?o>1?(e=l,r=l/o):(e=800*o,r=800):(e=n.width,r=n.height);var a=document.createElement("canvas"),s=a.getContext("2d");a.width=e,a.height=r,s.drawImage(n,0,0,e,r),a.toBlob((function(e){var n=new File([e],t.name,{type:t.type}),r=(0,P.iH)(V.t,"/manager-page/".concat(n.name)),l=(0,P.B0)(r,n);l.on("state_changed",(function(e){Math.round(e.bytesTransferred/e.totalBytes*100)}),(function(e){return console.log(e)}),(function(){(0,P.Jt)(l.snapshot.ref).then((function(e){i(),$({file:{status:"done",name:n.name,url:e}})}))}))}),t.type)}}}catch(o){console.error("Error uploading file:",o),r()}case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ne={name:"file",multiple:!0,listType:"picture",customRequest:ee,onChange:function(e){var n=e.fileList;if((null===A||void 0===A?void 0:A.length)>0){var t=null===A||void 0===A?void 0:A.reduce((function(e,t){return n.some((function(e){var n;return null===t||void 0===t||null===(n=t.id)||void 0===n?void 0:n.includes(null===e||void 0===e?void 0:e.id)}))&&e.push(t),e}),[]);_(t),X("hero",t)}},fileList:A,onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}};return(0,c.jsxs)(c.Fragment,{children:[m,(0,c.jsxs)(N.Z,{form:d,name:"control-contect-ref",ref:a,layout:"vertical",initialValues:B,onFinish:z(function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){var r,s,u;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,i.Z)((0,i.Z)({},t[0]),{},{hero:null===n||void 0===n?void 0:n.hero}),u=(0,E.JU)(M,s.id),e.next=4,(0,E.r7)(u,s);case 4:O.invalidateQueries("homePage"),null===o||void 0===o||o(),setTimeout((0,b.Z)((0,w.Z)().mark((function e(){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),300),y(!0),f.open({type:"success",content:"Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng!",duration:5}),y(!1),d.resetFields(),null===(r=a.current)||void 0===r||r.resetFields(),G();case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),children:[(0,c.jsx)(I.x,{control:H,name:"hero",label:"Upload h\xecnh banner header",children:(0,c.jsxs)(D.Z,(0,i.Z)((0,i.Z)({},ne),{},{children:[(0,c.jsx)("p",{className:"ant-upload-drag-icon",children:(0,c.jsx)(U.Z,{})}),(0,c.jsx)("p",{className:"ant-upload-text",children:"Nh\u1ea5p ho\u1eb7c k\xe9o t\u1ec7p v\xe0o khu v\u1ef1c n\xe0y \u0111\u1ec3 t\u1ea3i l\xean"}),(0,c.jsx)("p",{className:"ant-upload-hint",children:"H\u1ed7 tr\u1ee3 t\u1ea3i l\xean m\u1ed9t l\u1ea7n ho\u1eb7c h\xe0ng lo\u1ea1t. Nghi\xeam c\u1ea5m t\u1ea3i l\xean d\u1eef li\u1ec7u c\xf4ng ty ho\u1eb7c c\xe1c th\xf4ng tin kh\xe1c"})]}))}),(0,c.jsx)(k.ZP,{loading:Z,disabled:!(0,p.isEmpty)(K),type:"primary",htmlType:"submit",block:!0,size:"large",children:"C\u1eadp nh\u1eadt"})]})]})}var A=t(86005),_=T.Ry({title:T.Z_().required("Vui l\xf2ng nh\u1eadp ti\xeau \u0111\u1ec1 gi\u1edbi thi\u1ec7u!"),subTitle:T.Z_().required("Vui l\xf2ng nh\u1eadp ti\xeau \u0111\u1ec1 ph\u1ee5!"),content:T.Z_().required("Vui l\xf2ng nh\u1eadp n\u1ed9i dung"),subContent:T.Z_().required("Vui l\xf2ng nh\u1eadp n\u1ed9i dung ch\xe2m ng\xf4n"),userName:T.Z_().required("Vui l\xf2ng nh\u1eadp t\xean ng\u01b0\u1eddi vi\u1ebft n\u1ed9i dung ch\xe2m ng\xf4n"),userRole:T.Z_().required("Vui l\xf2ng nh\u1eadp ti\xeau \u0111\u1ec1 c\xf4ng vi\u1ec7c")}).required();function M(e){var n,t,l,o,a,s,d=e.data,h=e.handleCancel,v=e.refetch,f=(0,u.useRef)(null),m=N.Z.useForm(),g=(0,r.Z)(m,1)[0],x=C.ZP.useMessage(),Z=(0,r.Z)(x,2),y=Z[0],j=Z[1],T=(0,u.useState)(!1),R=(0,r.Z)(T,2),P=R[0],D=R[1],U=(0,E.hJ)(V.R,"homePage"),q=(0,L.useQueryClient)(),B={title:(null===d||void 0===d||null===(n=d.introduceStudio)||void 0===n?void 0:n.title)||"",subTitle:(null===d||void 0===d||null===(t=d.introduceStudio)||void 0===t?void 0:t.subTitle)||"",content:(null===d||void 0===d||null===(l=d.introduceStudio)||void 0===l?void 0:l.content)||"",subContent:(null===d||void 0===d||null===(o=d.introduceStudio)||void 0===o?void 0:o.subContent)||"",userName:(null===d||void 0===d||null===(a=d.introduceStudio)||void 0===a?void 0:a.userName)||"",userRole:(null===(s=d.introduceStudio)||void 0===s?void 0:s.userRole)||""};(0,u.useEffect)((function(){var e,n,t,i,r,l;g.setFieldsValue({title:(null===d||void 0===d||null===(e=d.introduceStudio)||void 0===e?void 0:e.title)||"",subTitle:(null===d||void 0===d||null===(n=d.introduceStudio)||void 0===n?void 0:n.subTitle)||"",content:(null===d||void 0===d||null===(t=d.introduceStudio)||void 0===t?void 0:t.content)||"",subContent:(null===d||void 0===d||null===(i=d.introduceStudio)||void 0===i?void 0:i.subContent)||"",userName:(null===d||void 0===d||null===(r=d.introduceStudio)||void 0===r?void 0:r.userName)||"",userRole:(null===(l=d.introduceStudio)||void 0===l?void 0:l.userRole)||""})}),[d,g]);var J=(0,F.cI)({defaultValues:B,resolver:(0,S.X)(_)}),W=J.control,M=J.handleSubmit,O=J.formState.errors,Q=J.reset;return(0,c.jsxs)(c.Fragment,{children:[j,(0,c.jsxs)(N.Z,{form:g,name:"control-contect-ref",ref:f,layout:"vertical",initialValues:B,onFinish:M(function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){var t,r,l;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,i.Z)((0,i.Z)({},d),{},{introduceStudio:(0,i.Z)({},n)}),l=(0,E.JU)(U,d.id),e.next=4,(0,E.r7)(l,r);case 4:q.invalidateQueries("homePage"),setTimeout((0,b.Z)((0,w.Z)().mark((function e(){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),300),D(!0),y.open({type:"success",content:"C\u1eadp nh\u1eadp th\xe0nh c\xf4ng!",duration:5}),D(!1),null===h||void 0===h||h(),g.resetFields(),null===(t=f.current)||void 0===t||t.resetFields(),Q();case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),children:[(0,c.jsx)(I.x,{hasFeedback:!1,control:W,name:"title",label:"Ti\xeau \u0111\u1ec1",children:(0,c.jsx)(A.Z.TextArea,{allowClear:!0,placeholder:"Nh\u1eadp ti\xeau \u0111\u1ec1 gi\u1edbi thi\u1ec7u"})}),(0,c.jsx)(I.x,{hasFeedback:!1,control:W,name:"subTitle",label:"Ti\xeau \u0111\u1ec1 ph\u1ee5",children:(0,c.jsx)(A.Z.TextArea,{allowClear:!0,placeholder:"Nh\u1eadp ti\xeau \u0111\u1ec1 ph\u1ee5"})}),(0,c.jsx)(I.x,{hasFeedback:!1,control:W,name:"content",label:"N\u1ed9i dung",children:(0,c.jsx)(A.Z.TextArea,{allowClear:!0,placeholder:"Nh\u1eadp n\u1ed9i dung"})}),(0,c.jsx)(I.x,{hasFeedback:!1,control:W,name:"subContent",label:"N\u1ed9i dung ch\xe2m ng\xf4n",children:(0,c.jsx)(A.Z.TextArea,{allowClear:!0,placeholder:"Nh\u1eadp n\u1ed9i dung ch\xe2m ng\xf4n"})}),(0,c.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 xl:gap-6",children:[(0,c.jsx)(I.x,{hasFeedback:!1,control:W,name:"userName",label:"T\xean ng\u01b0\u1eddi vi\u1ebft",children:(0,c.jsx)(A.Z.TextArea,{allowClear:!0,placeholder:"Nh\u1eadp t\xean ng\u01b0\u1eddi vi\u1ebft n\u1ed9i dung ch\xe2m ng\xf4n"})}),(0,c.jsx)(I.x,{hasFeedback:!1,control:W,name:"userRole",label:"Ti\xeau \u0111\u1ec1 c\xf4ng vi\u1ec7c",children:(0,c.jsx)(A.Z.TextArea,{allowClear:!0,placeholder:"Nh\u1eadp ti\xeau \u0111\u1ec1 c\xf4ng vi\u1ec7c"})})]}),(0,c.jsx)(k.ZP,{loading:P,disabled:!(0,p.isEmpty)(O),type:"primary",htmlType:"submit",block:!0,size:"large",children:"C\u1eadp nh\u1eadt"})]})]})}var O=t(72351),Q=t(71439),H=T.Ry({serviceTitle:T.Z_().required("Vui l\xf2ng nh\u1eadp ti\xeau \u0111\u1ec1 gi\u1edbi thi\u1ec7u!"),serviceDescription:T.Z_().required("Vui l\xf2ng nh\u1eadp ti\xeau \u0111\u1ec1 ph\u1ee5!"),serviceGallery:T.nK().required("Vui l\xf2ng upload file h\xecnh \u1ea3nh").test("fileEmpty","Vui l\xf2ng upload file h\xecnh \u1ea3nh",(function(e){return 0!==(null===e||void 0===e?void 0:e.length)})),serviceUrl:T.nK().required("Vui l\xf2ng upload file h\xecnh \u1ea3nh").test("fileEmpty","Vui l\xf2ng upload file h\xecnh \u1ea3nh",(function(e){return 0!==(null===e||void 0===e?void 0:e.length)}))}).required();function z(e){var n=e.data,t=e.file,l=e.handleCancel,o=e.refetch,a=(0,p.find)(null===n||void 0===n?void 0:n.services,{id:null===t||void 0===t?void 0:t.id})||{},s={id:(0,R.Z)(),uid:(0,R.Z)(),status:"done",url:null===a||void 0===a?void 0:a.url,name:null===a||void 0===a?void 0:a.name,alt:null===a||void 0===a?void 0:a.alt},d=(0,u.useRef)(null),h=N.Z.useForm(),v=(0,r.Z)(h,1)[0],f=C.ZP.useMessage(),m=(0,r.Z)(f,2),g=m[0],x=m[1],Z=(0,u.useState)(!1),y=(0,r.Z)(Z,2),T=y[0],q=y[1],B=(0,u.useState)([]),J=(0,r.Z)(B,2),W=J[0],_=J[1],M=(0,u.useState)([s]),z=(0,r.Z)(M,2),K=z[0],G=z[1],X=(0,E.hJ)(V.R,"homePage"),Y=(0,L.useQueryClient)(),$={serviceTitle:(null===a||void 0===a?void 0:a.serviceTitle)||"",serviceDescription:(null===a||void 0===a?void 0:a.description)||"",serviceGallery:(null===a||void 0===a?void 0:a.gallery)||[],serviceUrl:[s]},ee=(0,F.cI)({defaultValues:$,resolver:(0,S.X)(H)}),ne=ee.control,te=ee.handleSubmit,ie=ee.formState.errors,re=ee.reset,le=ee.setValue;(0,u.useEffect)((function(){v.setFieldsValue({serviceTitle:(null===a||void 0===a?void 0:a.title)||"",serviceDescription:(null===a||void 0===a?void 0:a.description)||"",serviceGallery:(null===a||void 0===a?void 0:a.gallery)||[],serviceUrl:[null===a||void 0===a?void 0:a.url]||0}),_((null===a||void 0===a?void 0:a.gallery)||[]),G([s]||0)}),[a,v]);var oe=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"done"===n.file.status?(_((function(e){return[].concat((0,j.Z)(e),[{id:(0,R.Z)(),url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}])})),le("serviceGallery",[].concat((0,j.Z)(W),[{id:(0,R.Z)(),url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}])),C.ZP.success("".concat(n.file.name," file uploaded successfully"))):"error"===n.file.status&&C.ZP.error("".concat(n.file.name," file upload failed."));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ae=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){var t,i,r,l;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.file,i=n.onSuccess,r=n.onError;try{(l=new FileReader).readAsDataURL(t),l.onload=function(e){var n=new Image;n.src=e.target.result,n.onload=function(){var e,r,l=n.width/n.height;n.width>800||n.height>800?l>1?(e=800,r=800/l):(e=800*l,r=800):(e=n.width,r=n.height);var o=document.createElement("canvas"),a=o.getContext("2d");o.width=e,o.height=r,a.drawImage(n,0,0,e,r),o.toBlob((function(e){var n=new File([e],t.name,{type:t.type}),r=(0,P.iH)(V.t,"/manager-page/".concat(n.name)),l=(0,P.B0)(r,n);l.on("state_changed",(function(e){Math.round(e.bytesTransferred/e.totalBytes*100)}),(function(e){return console.log(e)}),(function(){(0,P.Jt)(l.snapshot.ref).then((function(e){i(),oe({file:{status:"done",name:n.name,url:e}})}))}))}),t.type)}}}catch(o){console.error("Error uploading file:",o),r()}case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),se={name:"file",multiple:!0,listType:"picture",customRequest:ae,onChange:function(e){var n=e.fileList;if(W.length>0){var t=null===W||void 0===W?void 0:W.reduce((function(e,t){return n.some((function(e){var n;return null===t||void 0===t||null===(n=t.id)||void 0===n?void 0:n.includes(null===e||void 0===e?void 0:e.id)}))&&e.push(t),e}),[]);_(t),le("serviceGallery",t)}},fileList:W,onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}},ue=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"done"===n.file.status?(G([{id:(0,R.Z)(),url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}]),le("serviceUrl",[{id:(0,R.Z)(),url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}]),C.ZP.success("".concat(n.file.name," file uploaded successfully"))):"error"===n.file.status&&C.ZP.error("".concat(n.file.name," file upload failed."));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),de=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){var t,i,r,l;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.file,i=n.onSuccess,r=n.onError;try{(l=new FileReader).readAsDataURL(t),l.onload=function(e){var n=new Image;n.src=e.target.result,n.onload=function(){var e,r,l=n.width/n.height;n.width>800||n.height>800?l>1?(e=800,r=800/l):(e=800*l,r=800):(e=n.width,r=n.height);var o=document.createElement("canvas"),a=o.getContext("2d");o.width=e,o.height=r,a.drawImage(n,0,0,e,r),o.toBlob((function(e){var n=new File([e],t.name,{type:t.type}),r=(0,P.iH)(V.t,"/manager-page/".concat(n.name)),l=(0,P.B0)(r,n);l.on("state_changed",(function(e){Math.round(e.bytesTransferred/e.totalBytes*100)}),(function(e){return console.log(e)}),(function(){(0,P.Jt)(l.snapshot.ref).then((function(e){i(),ue({file:{status:"done",name:n.name,url:e}})}))}))}),t.type)}}}catch(o){console.error("Error uploading file:",o),r()}case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ce={name:"file",multiple:!1,listType:"picture",customRequest:de,onChange:function(e){var n=e.fileList;if(W.length>0){var t=null===K||void 0===K?void 0:K.reduce((function(e,t){return n.some((function(e){var n;return null===t||void 0===t||null===(n=t.id)||void 0===n?void 0:n.includes(null===e||void 0===e?void 0:e.id)}))&&e.push(t),e}),[]);G(t),le("serviceUrl",t)}},fileList:K,onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}};return(0,c.jsxs)(c.Fragment,{children:[x,(0,c.jsxs)(N.Z,{form:v,name:"control-service-edit-ref",ref:d,layout:"vertical",initialValues:$,onFinish:te(function(){var e=(0,b.Z)((0,w.Z)().mark((function e(r){var a,s,u,c;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,p.map)(null===n||void 0===n?void 0:n.services,(function(e){var n,i,l,o;return e.id===t.id?(0,p.assign)({},e,{name:(null===K||void 0===K||null===(n=K[0])||void 0===n?void 0:n.name)||(null===K||void 0===K||null===(i=K[0])||void 0===i?void 0:i.url),alt:(null===K||void 0===K||null===(l=K[0])||void 0===l?void 0:l.alt)||"",url:(null===K||void 0===K||null===(o=K[0])||void 0===o?void 0:o.url)||"",title:r.serviceTitle,description:r.serviceDescription,gallery:W}):e})),u=(0,i.Z)((0,i.Z)({},n),{},{services:s}),c=(0,E.JU)(X,n.id),e.next=5,(0,E.r7)(c,u);case 5:Y.invalidateQueries("homePage"),setTimeout((0,b.Z)((0,w.Z)().mark((function e(){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),300),q(!0),g.open({type:"success",content:"C\u1eadp nh\u1eadp th\xe0nh c\xf4ng!",duration:5}),q(!1),null===l||void 0===l||l(),v.resetFields(),null===(a=d.current)||void 0===a||a.resetFields(),re();case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),children:[(0,c.jsx)(I.x,{control:ne,name:"serviceUrl",label:"Upload h\xecnh ch\xednh v\u1ee5",children:(0,c.jsx)(Q.Z,(0,i.Z)((0,i.Z)({},ce),{},{children:(0,c.jsx)(k.ZP,{icon:(0,c.jsx)(O.Z,{}),children:"Upload"})}))}),(0,c.jsx)(I.x,{hasFeedback:!1,control:ne,name:"serviceTitle",label:"Ti\xeau \u0111\u1ec1",children:(0,c.jsx)(A.Z.TextArea,{allowClear:!0,placeholder:"Nh\u1eadp ti\xeau \u0111\u1ec1 d\u1ecbch v\u1ee5"})}),(0,c.jsx)(I.x,{hasFeedback:!1,control:ne,name:"serviceDescription",label:"N\u1ed9i dung",children:(0,c.jsx)(A.Z.TextArea,{allowClear:!0,placeholder:"Nh\u1eadp n\u1ed9i dung"})}),(0,c.jsx)(I.x,{control:ne,name:"serviceGallery",label:"Upload h\xecnh banner header",children:(0,c.jsxs)(D.Z,(0,i.Z)((0,i.Z)({},se),{},{children:[(0,c.jsx)("p",{className:"ant-upload-drag-icon",children:(0,c.jsx)(U.Z,{})}),(0,c.jsx)("p",{className:"ant-upload-text",children:"Nh\u1ea5p ho\u1eb7c k\xe9o t\u1ec7p v\xe0o khu v\u1ef1c n\xe0y \u0111\u1ec3 t\u1ea3i l\xean"}),(0,c.jsx)("p",{className:"ant-upload-hint",children:"H\u1ed7 tr\u1ee3 t\u1ea3i l\xean m\u1ed9t l\u1ea7n ho\u1eb7c h\xe0ng lo\u1ea1t. Nghi\xeam c\u1ea5m t\u1ea3i l\xean d\u1eef li\u1ec7u c\xf4ng ty ho\u1eb7c c\xe1c th\xf4ng tin kh\xe1c"})]}))}),(0,c.jsx)(k.ZP,{loading:T,disabled:!(0,p.isEmpty)(ie),type:"primary",htmlType:"submit",block:!0,size:"large",children:"C\u1eadp nh\u1eadt"})]})]})}var K={services:[]},G=T.Ry({services:T.nK()}).required();function X(e){var n=e.data,t=e.refetch,l=e.handleCancel,o=(0,u.useRef)(null),a=N.Z.useForm(),d=(0,r.Z)(a,1)[0],h=C.ZP.useMessage(),v=(0,r.Z)(h,2),f=v[0],m=v[1],g=(0,u.useState)(!1),x=(0,r.Z)(g,2),Z=x[0],y=x[1],T=(0,u.useState)([]),q=(0,r.Z)(T,2),B=q[0],J=q[1],W=(0,E.hJ)(V.R,"homePage"),A=(0,L.useQueryClient)(),_=(0,u.useState)({}),M=(0,r.Z)(_,2),O=M[0],Q=M[1],H=(0,u.useState)(!1),X=(0,r.Z)(H,2),Y=X[0],$=X[1],ee=(0,F.cI)({defaultValues:{services:(null===n||void 0===n?void 0:n[0].services)||[]},resolver:(0,S.X)(G)}),ne=ee.control,te=ee.handleSubmit,ie=ee.formState.errors,re=ee.reset,le=(ee.getValues,ee.setValue);(0,R.Z)();(0,u.useEffect)((function(){var e,t;d.setFieldsValue({services:(null===n||void 0===n||null===(e=n[0])||void 0===e?void 0:e.services)||[]}),J((null===n||void 0===n||null===(t=n[0])||void 0===t?void 0:t.services)||[])}),[n,d]);var oe=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"done"===n.file.status?(J((function(e){return[].concat((0,j.Z)(e),[{id:(0,R.Z)(),url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}])})),le("services",[].concat((0,j.Z)(B),[{id:(0,R.Z)(),url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}])),C.ZP.success("".concat(n.file.name," file uploaded successfully"))):"error"===n.file.status&&C.ZP.error("".concat(n.file.name," file upload failed."));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ae=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){var t,i,r,l;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.file,i=n.onSuccess,r=n.onError;try{(l=new FileReader).readAsDataURL(t),l.onload=function(e){var n=new Image;n.src=e.target.result,n.onload=function(){var e,r,l=n.width/n.height;n.width>800||n.height>800?l>1?(e=800,r=800/l):(e=800*l,r=800):(e=n.width,r=n.height);var o=document.createElement("canvas"),a=o.getContext("2d");o.width=e,o.height=r,a.drawImage(n,0,0,e,r),o.toBlob((function(e){var n=new File([e],t.name,{type:t.type}),r=(0,P.iH)(V.t,"/manager-page/".concat(n.name)),l=(0,P.B0)(r,n);l.on("state_changed",(function(e){Math.round(e.bytesTransferred/e.totalBytes*100)}),(function(e){return console.log(e)}),(function(){(0,P.Jt)(l.snapshot.ref).then((function(e){i(),oe({file:{status:"done",name:n.name,url:e}})}))}))}),t.type)}}}catch(o){console.error("Error uploading file:",o),r()}case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),se={name:"file",multiple:!0,listType:"picture",customRequest:ae,onChange:function(e){var n=e.fileList;if(B.length>0){var t=null===B||void 0===B?void 0:B.reduce((function(e,t){return n.some((function(e){var n;return null===t||void 0===t||null===(n=t.id)||void 0===n?void 0:n.includes(null===e||void 0===e?void 0:e.id)}))&&e.push(t),e}),[]);J(t),le("services",t)}},fileList:B,onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}},ue=function(){$(!1)},de=function(e){var n,t=e.originNode,i=e.file;return(0,c.jsxs)("div",{className:"mt-2",children:[t,(0,c.jsx)(k.ZP,{onClick:(n=i,function(){$(!0),Q(n)}),children:"Ch\u1ec9nh s\u1eeda"})]})};return(0,c.jsxs)(c.Fragment,{children:[m,(0,c.jsxs)(N.Z,{form:d,name:"control-contect-ref",ref:o,layout:"vertical",initialValues:K,onFinish:te(function(){var e=(0,b.Z)((0,w.Z)().mark((function e(r){var a,s,u,c;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=null===B||void 0===B?void 0:B.map((function(e){return(0,p.isEmpty)(null===e||void 0===e?void 0:e.title)?(0,i.Z)((0,i.Z)({},e),{},{title:"",description:"",gallery:[]}):e})),u=(0,i.Z)((0,i.Z)({},n[0]),{},{services:s||[]}),c=(0,E.JU)(W,u.id),e.next=5,(0,E.r7)(c,u);case 5:A.invalidateQueries("homePage"),null===l||void 0===l||l(),setTimeout((0,b.Z)((0,w.Z)().mark((function e(){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),300),y(!0),f.open({type:"success",content:"Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng!",duration:5}),y(!1),d.resetFields(),null===(a=o.current)||void 0===a||a.resetFields(),re();case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),children:[(0,c.jsx)(I.x,{control:ne,name:"services",label:"Upload h\xecnh \u1ea3nh d\u1ecbch v\u1ee5",children:(0,c.jsxs)(D.Z,(0,i.Z)((0,i.Z)({},se),{},{itemRender:function(e,n){return(0,c.jsx)(de,{originNode:e,file:n})},children:[(0,c.jsx)("p",{className:"ant-upload-drag-icon",children:(0,c.jsx)(U.Z,{})}),(0,c.jsx)("p",{className:"ant-upload-text",children:"Nh\u1ea5p ho\u1eb7c k\xe9o t\u1ec7p v\xe0o khu v\u1ef1c n\xe0y \u0111\u1ec3 t\u1ea3i l\xean"}),(0,c.jsx)("p",{className:"ant-upload-hint",children:"H\u1ed7 tr\u1ee3 t\u1ea3i l\xean m\u1ed9t l\u1ea7n ho\u1eb7c h\xe0ng lo\u1ea1t. Nghi\xeam c\u1ea5m t\u1ea3i l\xean d\u1eef li\u1ec7u c\xf4ng ty ho\u1eb7c c\xe1c th\xf4ng tin kh\xe1c"})]}))}),(0,c.jsx)(k.ZP,{loading:Z,disabled:!(0,p.isEmpty)(ie),type:"primary",htmlType:"submit",block:!0,size:"large",children:"Ch\u1ec9nh s\u1eeda"})]}),(0,c.jsx)(s.Z,{centered:!0,bodyStyle:{overflowY:"scroll",height:"calc(100vh - 250px)"},footer:null,open:Y,onCancel:ue,title:"Ch\u1ec9nh s\u1eeda th\xf4ng tin d\u1ecbch v\u1ee5",children:(0,c.jsx)(z,{refetch:t,data:n[0],file:O,handleCancel:ue})})]})}var Y=T.Ry({title:T.Z_().required("Vui l\xf2ng nh\u1eadp ti\xeau \u0111\u1ec1 gi\u1edbi thi\u1ec7u!"),content:T.Z_().required("Vui l\xf2ng nh\u1eadp n\u1ed9i dung")}).required();function $(e){var n,t,l=e.data,o=e.handleCancel,a=e.refetch,s=(0,u.useRef)(null),d=N.Z.useForm(),h=(0,r.Z)(d,1)[0],v=C.ZP.useMessage(),f=(0,r.Z)(v,2),m=f[0],g=f[1],x=(0,u.useState)(!1),Z=(0,r.Z)(x,2),y=Z[0],j=Z[1],T=(0,E.hJ)(V.R,"homePage"),R=(0,L.useQueryClient)(),P={title:(null===l||void 0===l||null===(n=l.stories)||void 0===n?void 0:n.title)||"",content:(null===l||void 0===l||null===(t=l.stories)||void 0===t?void 0:t.content)||""};(0,u.useEffect)((function(){var e,n;h.setFieldsValue({title:(null===l||void 0===l||null===(e=l.stories)||void 0===e?void 0:e.title)||"",content:(null===l||void 0===l||null===(n=l.stories)||void 0===n?void 0:n.content)||""})}),[l,h]);var D=(0,F.cI)({defaultValues:P,resolver:(0,S.X)(Y)}),U=D.control,q=D.handleSubmit,B=D.formState.errors,J=D.reset;return(0,c.jsxs)(c.Fragment,{children:[g,(0,c.jsxs)(N.Z,{form:h,name:"control-contect-ref",ref:s,layout:"vertical",initialValues:P,onFinish:q(function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){var t,r,u,d,c;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=(0,i.Z)((0,i.Z)({},l),{},{stories:(0,i.Z)((0,i.Z)({},n),{},{preWedding:(null===l||void 0===l||null===(t=l.stories)||void 0===t?void 0:t.preWedding)||[],wedding:(null===l||void 0===l||null===(r=l.stories)||void 0===r?void 0:r.wedding)||[]})}),c=(0,E.JU)(T,l.id),e.next=4,(0,E.r7)(c,d);case 4:R.invalidateQueries("homePage"),setTimeout((0,b.Z)((0,w.Z)().mark((function e(){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),300),j(!0),m.open({type:"success",content:"C\u1eadp nh\u1eadp th\xe0nh c\xf4ng!",duration:5}),j(!1),null===o||void 0===o||o(),h.resetFields(),null===(u=s.current)||void 0===u||u.resetFields(),J();case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),children:[(0,c.jsx)(I.x,{hasFeedback:!1,control:U,name:"title",label:"Ti\xeau \u0111\u1ec1",children:(0,c.jsx)(A.Z.TextArea,{allowClear:!0,placeholder:"Nh\u1eadp ti\xeau \u0111\u1ec1 gi\u1edbi thi\u1ec7u"})}),(0,c.jsx)(I.x,{hasFeedback:!1,control:U,name:"content",label:"N\u1ed9i dung",children:(0,c.jsx)(A.Z.TextArea,{style:{height:90},allowClear:!0,placeholder:"Nh\u1eadp n\u1ed9i dung"})}),(0,c.jsx)("div",{className:"pt-5",children:(0,c.jsx)(k.ZP,{loading:y,disabled:!(0,p.isEmpty)(B),type:"primary",htmlType:"submit",block:!0,size:"large",children:"C\u1eadp nh\u1eadt"})})]})]})}var ee=T.Ry({userName:T.Z_(),content:T.Z_(),url:T.nK().required("Vui l\xf2ng upload file h\xecnh \u1ea3nh").test("fileEmpty","Vui l\xf2ng upload file h\xecnh \u1ea3nh",(function(e){return 0!==(null===e||void 0===e?void 0:e.length)}))}).required();function ne(e){var n=e.data,t=e.file,l=e.handleCancel,o=e.refetch,a=(0,p.find)(null===n||void 0===n?void 0:n.reviewer,{id:null===t||void 0===t?void 0:t.id}),s=a||t,d={id:(0,R.Z)(),uid:(0,R.Z)(),status:"done",url:null===s||void 0===s?void 0:s.url,name:null===s||void 0===s?void 0:s.name,alt:null===s||void 0===s?void 0:s.alt},h=(0,u.useRef)(null),v=N.Z.useForm(),f=(0,r.Z)(v,1)[0],m=C.ZP.useMessage(),g=(0,r.Z)(m,2),x=g[0],Z=g[1],y=(0,u.useState)(!1),T=(0,r.Z)(y,2),D=T[0],U=T[1],q=(0,u.useState)([d]),B=(0,r.Z)(q,2),J=B[0],W=B[1],_=(0,E.hJ)(V.R,"homePage"),M=(0,L.useQueryClient)(),H={userName:(null===s||void 0===s?void 0:s.userName)||"",content:(null===s||void 0===s?void 0:s.content)||"",url:[d]},z=(0,F.cI)({defaultValues:H,resolver:(0,S.X)(ee)}),K=z.control,G=z.handleSubmit,X=z.formState.errors,Y=z.reset,$=z.setValue;(0,u.useEffect)((function(){f.setFieldsValue({userName:(null===s||void 0===s?void 0:s.userName)||"",content:(null===s||void 0===s?void 0:s.content)||"",url:[d]||0}),W([d]||0)}),[s,f]);var ne=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"done"===n.file.status?(W([{id:(0,R.Z)(),url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}]),$("url",[{id:(0,R.Z)(),url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}]),C.ZP.success("".concat(n.file.name," file uploaded successfully"))):"error"===n.file.status&&C.ZP.error("".concat(n.file.name," file upload failed."));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),te=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){var t,i,r,l;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.file,i=n.onSuccess,r=n.onError;try{(l=new FileReader).readAsDataURL(t),l.onload=function(e){var n=new Image;n.src=e.target.result,n.onload=function(){var e,r,l=n.width/n.height;n.width>800||n.height>800?l>1?(e=800,r=800/l):(e=800*l,r=800):(e=n.width,r=n.height);var o=document.createElement("canvas"),a=o.getContext("2d");o.width=e,o.height=r,a.drawImage(n,0,0,e,r),o.toBlob((function(e){var n=new File([e],t.name,{type:t.type}),r=(0,P.iH)(V.t,"/manager-page/".concat(n.name)),l=(0,P.B0)(r,n);l.on("state_changed",(function(e){Math.round(e.bytesTransferred/e.totalBytes*100)}),(function(e){return console.log(e)}),(function(){(0,P.Jt)(l.snapshot.ref).then((function(e){i(),ne({file:{status:"done",name:n.name,url:e}})}))}))}),t.type)}}}catch(o){console.error("Error uploading file:",o),r()}case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ie={name:"file",multiple:!1,listType:"picture",customRequest:te,onChange:function(e){var n=e.fileList;if(n.length>0){var t=null===J||void 0===J?void 0:J.reduce((function(e,t){return n.some((function(e){var n;return null===t||void 0===t||null===(n=t.id)||void 0===n?void 0:n.includes(null===e||void 0===e?void 0:e.id)}))&&e.push(t),e}),[]);W(t),$("url",t)}},fileList:J,onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}};return(0,c.jsxs)(c.Fragment,{children:[Z,(0,c.jsxs)(N.Z,{form:f,name:"control-pre-wedding-edit-ref",ref:h,layout:"vertical",initialValues:H,onFinish:G(function(){var e=(0,b.Z)((0,w.Z)().mark((function e(r){var s,u,d,c,v,m,g,Z;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m=(0,p.map)(null===n||void 0===n?void 0:n.reviewer,(function(e){var n,i,l,o;return e.id===t.id?(0,p.assign)({},e,{name:(null===J||void 0===J||null===(n=J[0])||void 0===n?void 0:n.name)||(null===J||void 0===J||null===(i=J[0])||void 0===i?void 0:i.url),alt:(null===J||void 0===J||null===(l=J[0])||void 0===l?void 0:l.alt)||"",url:(null===J||void 0===J||null===(o=J[0])||void 0===o?void 0:o.url)||"",userName:r.userName,content:r.content}):e})),g=(0,i.Z)((0,i.Z)({},n),{},{reviewer:(0,p.isEmpty)(a)?[].concat((0,j.Z)(null===n||void 0===n?void 0:n.reviewer),[{id:(0,R.Z)(),name:(null===J||void 0===J||null===(s=J[0])||void 0===s?void 0:s.name)||(null===J||void 0===J||null===(u=J[0])||void 0===u?void 0:u.url),alt:(null===J||void 0===J||null===(d=J[0])||void 0===d?void 0:d.alt)||"",url:(null===J||void 0===J||null===(c=J[0])||void 0===c?void 0:c.url)||"",userName:r.userName,content:r.content}]):m||[]}),Z=(0,E.JU)(_,n.id),e.next=5,(0,E.r7)(Z,g);case 5:M.invalidateQueries("homePage"),setTimeout((0,b.Z)((0,w.Z)().mark((function e(){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),300),U(!0),x.open({type:"success",content:"C\u1eadp nh\u1eadp th\xe0nh c\xf4ng!",duration:5}),U(!1),null===l||void 0===l||l(),f.resetFields(),null===(v=h.current)||void 0===v||v.resetFields(),Y();case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),children:[(0,c.jsx)(I.x,{control:K,name:"url",label:"Upload h\xecnh avatar",children:(0,c.jsx)(Q.Z,(0,i.Z)((0,i.Z)({},ie),{},{children:(0,c.jsx)(k.ZP,{icon:(0,c.jsx)(O.Z,{}),children:"Upload"})}))}),(0,c.jsx)(I.x,{hasFeedback:!1,control:K,name:"userName",label:"T\xean ng\u01b0\u1eddi review",children:(0,c.jsx)(A.Z,{allowClear:!0,placeholder:"Nh\u1eadp ti\xeau t\xean ng\u01b0\u1eddi review"})}),(0,c.jsx)(I.x,{hasFeedback:!1,control:K,name:"content",label:"N\u1ed9i dung",children:(0,c.jsx)(A.Z.TextArea,{allowClear:!0,placeholder:"Nh\u1eadp n\u1ed9i dung review"})}),(0,c.jsx)("div",{className:"mt-10",children:(0,c.jsx)(k.ZP,{loading:D,disabled:!(0,p.isEmpty)(X),type:"primary",htmlType:"submit",block:!0,size:"large",children:"C\u1eadp nh\u1eadt"})})]})]})}var te=T.Ry({title:T.Z_().required("Vui l\xf2ng nh\u1eadp ti\xeau \u0111\u1ec1"),reviewer:T.nK()}).required();function ie(e){var n,t=e.data,l=e.refetch,o=e.handleCancel,a=(0,u.useRef)(null),d=N.Z.useForm(),h=(0,r.Z)(d,1)[0],v=C.ZP.useMessage(),f=(0,r.Z)(v,2),m=f[0],g=f[1],x=(0,u.useState)(!1),Z=(0,r.Z)(x,2),y=Z[0],T=Z[1],q=(0,u.useState)([]),B=(0,r.Z)(q,2),J=B[0],W=B[1],_=(0,E.hJ)(V.R,"homePage"),M=(0,L.useQueryClient)(),O=(0,u.useState)({}),Q=(0,r.Z)(O,2),H=Q[0],z=Q[1],K=(0,u.useState)(!1),G=(0,r.Z)(K,2),X=G[0],Y=G[1],$={reviewer:(null===t||void 0===t?void 0:t.reviewer)||[],title:(null===t||void 0===t?void 0:t.titleReviewer)||""},ee=(0,F.cI)({defaultValues:$,resolver:(0,S.X)(te)}),ie=ee.control,re=ee.handleSubmit,le=ee.formState.errors,oe=ee.reset,ae=(ee.getValues,ee.setValue),se=((0,R.Z)(),(null===t||void 0===t||null===(n=t.reviewer)||void 0===n?void 0:n.length)>0);(0,u.useEffect)((function(){h.setFieldsValue({reviewer:(null===t||void 0===t?void 0:t.reviewer)||[],title:(null===t||void 0===t?void 0:t.titleReviewer)||""}),W((null===t||void 0===t?void 0:t.reviewer)||[])}),[t,h]);var ue=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"done"===n.file.status?(W((function(e){return[].concat((0,j.Z)(e),[{id:(0,R.Z)(),url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}])})),ae("reviewer",[].concat((0,j.Z)(J),[{id:(0,R.Z)(),url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}])),C.ZP.success("".concat(n.file.name," file uploaded successfully"))):"error"===n.file.status&&C.ZP.error("".concat(n.file.name," file upload failed."));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),de=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){var t,i,r,l;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.file,i=n.onSuccess,r=n.onError;try{(l=new FileReader).readAsDataURL(t),l.onload=function(e){var n=new Image;n.src=e.target.result,n.onload=function(){var e,r,l=n.width/n.height;n.width>800||n.height>800?l>1?(e=800,r=800/l):(e=800*l,r=800):(e=n.width,r=n.height);var o=document.createElement("canvas"),a=o.getContext("2d");o.width=e,o.height=r,a.drawImage(n,0,0,e,r),o.toBlob((function(e){var n=new File([e],t.name,{type:t.type}),r=(0,P.iH)(V.t,"/manager-page/".concat(n.name)),l=(0,P.B0)(r,n);l.on("state_changed",(function(e){Math.round(e.bytesTransferred/e.totalBytes*100)}),(function(e){return console.log(e)}),(function(){(0,P.Jt)(l.snapshot.ref).then((function(e){i(),ue({file:{status:"done",name:n.name,url:e}})}))}))}),t.type)}}}catch(o){console.error("Error uploading file:",o),r()}case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ce={name:"file",multiple:!0,listType:"picture",customRequest:de,onChange:function(e){var n=e.fileList;if(J.length>0){var t=null===J||void 0===J?void 0:J.reduce((function(e,t){return n.some((function(e){var n;return null===t||void 0===t||null===(n=t.id)||void 0===n?void 0:n.includes(null===e||void 0===e?void 0:e.id)}))&&e.push(t),e}),[]);W(t),ae("reviewer",t)}},fileList:J,onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}},he=function(){Y(!1)},ve=function(e){var n,t=e.originNode,i=e.file;return(0,c.jsxs)("div",{className:"py-4",children:[t,se&&(0,c.jsx)(k.ZP,{className:"!mt-2",onClick:(n=i,function(){Y(!0),z(n)}),children:"Ch\u1ec9nh s\u1eeda"})]})};return(0,c.jsxs)(c.Fragment,{children:[g,(0,c.jsxs)(N.Z,{form:h,name:"control-reviewer-ref",ref:a,layout:"vertical",initialValues:$,onFinish:re(function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){var r,s,u,d;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=null===J||void 0===J?void 0:J.map((function(e){return(0,p.isEmpty)(null===e||void 0===e?void 0:e.name)?(0,i.Z)((0,i.Z)({},e),{},{name:"",content:""}):e})),u=(0,i.Z)((0,i.Z)({},t),{},{titleReviewer:(null===n||void 0===n?void 0:n.title)||"",reviewer:s||[]}),d=(0,E.JU)(_,u.id),e.next=5,(0,E.r7)(d,u);case 5:M.invalidateQueries("homePage"),null===o||void 0===o||o(),setTimeout((0,b.Z)((0,w.Z)().mark((function e(){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),300),T(!0),m.open({type:"success",content:"Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng!",duration:5}),T(!1),h.resetFields(),null===(r=a.current)||void 0===r||r.resetFields(),oe();case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),children:[(0,c.jsx)(I.x,{hasFeedback:!1,control:ie,name:"title",label:"Ti\xeau \u0111\u1ec1",children:(0,c.jsx)(A.Z.TextArea,{allowClear:!0,placeholder:"Nh\u1eadp ti\xeau \u0111\u1ec1 review"})}),(0,c.jsx)(I.x,{control:ie,name:"reviewer",label:"Upload h\xecnh \u1ea3nh kh\xe1ch h\xe0ng review",children:(0,c.jsxs)(D.Z,(0,i.Z)((0,i.Z)({},ce),{},{itemRender:function(e,n){return(0,c.jsx)(ve,{originNode:e,file:n})},children:[(0,c.jsx)("p",{className:"ant-upload-drag-icon",children:(0,c.jsx)(U.Z,{})}),(0,c.jsx)("p",{className:"ant-upload-text",children:"Nh\u1ea5p ho\u1eb7c k\xe9o t\u1ec7p v\xe0o khu v\u1ef1c n\xe0y \u0111\u1ec3 t\u1ea3i l\xean"}),(0,c.jsx)("p",{className:"ant-upload-hint",children:"H\u1ed7 tr\u1ee3 t\u1ea3i l\xean m\u1ed9t l\u1ea7n ho\u1eb7c h\xe0ng lo\u1ea1t. Nghi\xeam c\u1ea5m t\u1ea3i l\xean d\u1eef li\u1ec7u c\xf4ng ty ho\u1eb7c c\xe1c th\xf4ng tin kh\xe1c"}),!se&&(null===J||void 0===J?void 0:J.length)>0&&(0,c.jsx)("p",{className:"text-red-600",children:"\u0110\u1ec1 c\u1eadp nh\u1eadt th\xf4ng tin reviewer c\u1ea7n nh\u1ea5n n\xfat c\u1eadp nh\u1eadt \u0111\u1ec3 update data l\xean h\u1ec7n th\u1ed1ng"})]}))}),(0,c.jsx)(k.ZP,{loading:y,disabled:!(0,p.isEmpty)(le),type:"primary",htmlType:"submit",block:!0,size:"large",children:"C\u1eadp nh\u1eadt"})]}),(0,c.jsx)(s.Z,{centered:!0,bodyStyle:{overflowY:"scroll",height:"calc(100vh - 250px)"},footer:null,open:X,onCancel:he,title:"C\u1eadp nh\u1eadt th\xf4ng tin ng\u01b0\u1eddi review",children:(0,c.jsx)(ne,{refetch:l,data:t,file:H,handleCancel:he})})]})}function re(e){var n,t=e.data;return(0,c.jsx)("div",{className:(0,m.cn)("grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-4",null!==(n={1:"lg:grid-cols-1",2:"lg:grid-cols-2",3:"lg:grid-cols-3",4:"lg:grid-cols-4"}[null===t||void 0===t?void 0:t.length])&&void 0!==n?n:"lg:grid-cols-1"),children:null===t||void 0===t?void 0:t.map((function(e,n){return(0,c.jsx)(g,(0,i.Z)((0,i.Z)({},e),{},{btnShowMore:!0}),"album-".concat(n))}))})}function le(e){var n,t=e.data;return(0,c.jsx)("div",{className:(0,m.cn)("grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-4",null!==(n={1:"lg:grid-cols-1",2:"lg:grid-cols-2",3:"lg:grid-cols-3",4:"lg:grid-cols-4"}[null===t||void 0===t?void 0:t.length])&&void 0!==n?n:"lg:grid-cols-1"),children:null===t||void 0===t?void 0:t.map((function(e,n){return(0,c.jsx)(g,(0,i.Z)({btnShowMore:!0},e),"album-".concat(n))}))})}var oe=T.Ry({title:T.Z_(),description:T.Z_(),gallery:T.nK(),url:T.nK().required("Vui l\xf2ng upload file h\xecnh \u1ea3nh").test("fileEmpty","Vui l\xf2ng upload file h\xecnh \u1ea3nh",(function(e){return 0!==(null===e||void 0===e?void 0:e.length)}))}).required();function ae(e){var n,t=e.data,l=e.file,o=e.handleCancel,a=e.refetch,s=(0,p.find)(null===t||void 0===t||null===(n=t.stories)||void 0===n?void 0:n.preWedding,{id:null===l||void 0===l?void 0:l.id}),d=s||l,h={id:(0,R.Z)(),uid:(0,R.Z)(),status:"done",url:null===d||void 0===d?void 0:d.url,name:null===d||void 0===d?void 0:d.name,alt:null===d||void 0===d?void 0:d.alt},v=(0,u.useRef)(null),f=N.Z.useForm(),m=(0,r.Z)(f,1)[0],g=C.ZP.useMessage(),x=(0,r.Z)(g,2),Z=x[0],y=x[1],T=(0,u.useState)(!1),q=(0,r.Z)(T,2),B=q[0],J=q[1],W=(0,u.useState)([]),_=(0,r.Z)(W,2),M=_[0],H=_[1],z=(0,u.useState)([h]),K=(0,r.Z)(z,2),G=K[0],X=K[1],Y=(0,E.hJ)(V.R,"homePage"),$=(0,L.useQueryClient)(),ee={title:(null===d||void 0===d?void 0:d.title)||"",description:(null===d||void 0===d?void 0:d.description)||"",gallery:(null===d||void 0===d?void 0:d.gallery)||[],url:[h]},ne=(0,F.cI)({defaultValues:ee,resolver:(0,S.X)(oe)}),te=ne.control,ie=ne.handleSubmit,re=ne.formState.errors,le=ne.reset,ae=ne.setValue;(0,u.useEffect)((function(){m.setFieldsValue({title:(null===d||void 0===d?void 0:d.title)||"",description:(null===d||void 0===d?void 0:d.description)||"",gallery:(null===d||void 0===d?void 0:d.gallery)||[],url:[null===d||void 0===d?void 0:d.url]||0}),H((null===d||void 0===d?void 0:d.gallery)||[]),X([h]||0)}),[d,m]);var se=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"done"===n.file.status?(H((function(e){return[].concat((0,j.Z)(e),[{id:(0,R.Z)(),url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}])})),ae("gallery",[].concat((0,j.Z)(M),[{id:(0,R.Z)(),url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}])),C.ZP.success("".concat(n.file.name," file uploaded successfully"))):"error"===n.file.status&&C.ZP.error("".concat(n.file.name," file upload failed."));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ue=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){var t,i,r,l;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.file,i=n.onSuccess,r=n.onError;try{(l=new FileReader).readAsDataURL(t),l.onload=function(e){var n=new Image;n.src=e.target.result,n.onload=function(){var e,r,l=n.width/n.height;n.width>800||n.height>800?l>1?(e=800,r=800/l):(e=800*l,r=800):(e=n.width,r=n.height);var o=document.createElement("canvas"),a=o.getContext("2d");o.width=e,o.height=r,a.drawImage(n,0,0,e,r),o.toBlob((function(e){var n=new File([e],t.name,{type:t.type}),r=(0,P.iH)(V.t,"/manager-page/".concat(n.name)),l=(0,P.B0)(r,n);l.on("state_changed",(function(e){Math.round(e.bytesTransferred/e.totalBytes*100)}),(function(e){return console.log(e)}),(function(){(0,P.Jt)(l.snapshot.ref).then((function(e){i(),se({file:{status:"done",name:n.name,url:e}})}))}))}),t.type)}}}catch(o){console.error("Error uploading file:",o),r()}case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),de={name:"file",multiple:!0,listType:"picture-card",customRequest:ue,onChange:function(e){var n=e.fileList;if(M.length>0){var t=null===M||void 0===M?void 0:M.reduce((function(e,t){return n.some((function(e){var n;return null===t||void 0===t||null===(n=t.id)||void 0===n?void 0:n.includes(null===e||void 0===e?void 0:e.id)}))&&e.push(t),e}),[]);H(t),ae("gallery",t)}},fileList:M,onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}},ce=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"done"===n.file.status?(X([{id:(0,R.Z)(),url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}]),ae("url",[{id:(0,R.Z)(),url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}]),C.ZP.success("".concat(n.file.name," file uploaded successfully"))):"error"===n.file.status&&C.ZP.error("".concat(n.file.name," file upload failed."));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),he=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){var t,i,r,l;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.file,i=n.onSuccess,r=n.onError;try{(l=new FileReader).readAsDataURL(t),l.onload=function(e){var n=new Image;n.src=e.target.result,n.onload=function(){var e,r,l=n.width/n.height;n.width>800||n.height>800?l>1?(e=800,r=800/l):(e=800*l,r=800):(e=n.width,r=n.height);var o=document.createElement("canvas"),a=o.getContext("2d");o.width=e,o.height=r,a.drawImage(n,0,0,e,r),o.toBlob((function(e){var n=new File([e],t.name,{type:t.type}),r=(0,P.iH)(V.t,"/manager-page/".concat(n.name)),l=(0,P.B0)(r,n);l.on("state_changed",(function(e){Math.round(e.bytesTransferred/e.totalBytes*100)}),(function(e){return console.log(e)}),(function(){(0,P.Jt)(l.snapshot.ref).then((function(e){i(),ce({file:{status:"done",name:n.name,url:e}})}))}))}),t.type)}}}catch(o){console.error("Error uploading file:",o),r()}case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ve={name:"file",multiple:!1,listType:"picture",customRequest:he,onChange:function(e){var n=e.fileList;if(M.length>0){var t=null===G||void 0===G?void 0:G.reduce((function(e,t){return n.some((function(e){var n;return null===t||void 0===t||null===(n=t.id)||void 0===n?void 0:n.includes(null===e||void 0===e?void 0:e.id)}))&&e.push(t),e}),[]);X(t),ae("url",t)}},fileList:G,onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}};return(0,c.jsxs)(c.Fragment,{children:[y,(0,c.jsxs)(N.Z,{form:m,name:"control-pre-wedding-edit-ref",ref:v,layout:"vertical",initialValues:ee,onFinish:ie(function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){var r,u,d,c,h,f,g,x,y,N,C,k,F;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C=(0,p.map)(null===t||void 0===t||null===(r=t.stories)||void 0===r?void 0:r.preWedding,(function(e){var t,i,r,o;return e.id===l.id?(0,p.assign)({},e,{name:(null===G||void 0===G||null===(t=G[0])||void 0===t?void 0:t.name)||(null===G||void 0===G||null===(i=G[0])||void 0===i?void 0:i.url),alt:(null===G||void 0===G||null===(r=G[0])||void 0===r?void 0:r.alt)||"",url:(null===G||void 0===G||null===(o=G[0])||void 0===o?void 0:o.url)||"",title:n.title,description:n.description,gallery:M}):e})),k=(0,i.Z)((0,i.Z)({},t),{},{stories:{title:(null===t||void 0===t||null===(u=t.stories)||void 0===u?void 0:u.title)||"",content:(null===t||void 0===t||null===(d=t.stories)||void 0===d?void 0:d.content)||"",preWedding:(0,p.isEmpty)(s)?[].concat((0,j.Z)(null===t||void 0===t||null===(c=t.stories)||void 0===c?void 0:c.preWedding),[{id:(0,R.Z)(),name:(null===G||void 0===G||null===(h=G[0])||void 0===h?void 0:h.name)||(null===G||void 0===G||null===(f=G[0])||void 0===f?void 0:f.url),alt:(null===G||void 0===G||null===(g=G[0])||void 0===g?void 0:g.alt)||"",url:(null===G||void 0===G||null===(x=G[0])||void 0===x?void 0:x.url)||"",title:n.title,description:n.description,gallery:M}]):C||[],wedding:(null===t||void 0===t||null===(y=t.stories)||void 0===y?void 0:y.wedding)||[]}}),F=(0,E.JU)(Y,t.id),e.next=5,(0,E.r7)(F,k);case 5:$.invalidateQueries("homePage"),setTimeout((0,b.Z)((0,w.Z)().mark((function e(){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),300),J(!0),Z.open({type:"success",content:"C\u1eadp nh\u1eadp th\xe0nh c\xf4ng!",duration:5}),J(!1),null===o||void 0===o||o(),m.resetFields(),null===(N=v.current)||void 0===N||N.resetFields(),le();case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),children:[(0,c.jsx)(I.x,{control:te,name:"url",label:"Upload h\xecnh ch\xednh c\u1ee7a pre wedding",children:(0,c.jsx)(Q.Z,(0,i.Z)((0,i.Z)({},ve),{},{children:(0,c.jsx)(k.ZP,{icon:(0,c.jsx)(O.Z,{}),children:"Upload"})}))}),(0,c.jsx)(I.x,{hasFeedback:!1,control:te,name:"title",label:"Ti\xeau \u0111\u1ec1",children:(0,c.jsx)(A.Z.TextArea,{allowClear:!0,placeholder:"Nh\u1eadp ti\xeau \u0111\u1ec1 d\u1ecbch v\u1ee5"})}),(0,c.jsx)(I.x,{hasFeedback:!1,control:te,name:"description",label:"N\u1ed9i dung",children:(0,c.jsx)(A.Z.TextArea,{allowClear:!0,placeholder:"Nh\u1eadp n\u1ed9i dung"})}),(0,c.jsx)(I.x,{control:te,name:"gallery",label:"Upload danh s\xe1ch h\xecnh detail v\u1ec1 preWedding",children:(0,c.jsxs)(D.Z,(0,i.Z)((0,i.Z)({},de),{},{children:[(0,c.jsx)("p",{className:"ant-upload-drag-icon",children:(0,c.jsx)(U.Z,{})}),(0,c.jsx)("p",{className:"ant-upload-text",children:"Nh\u1ea5p ho\u1eb7c k\xe9o t\u1ec7p v\xe0o khu v\u1ef1c n\xe0y \u0111\u1ec3 t\u1ea3i l\xean"}),(0,c.jsx)("p",{className:"ant-upload-hint",children:"H\u1ed7 tr\u1ee3 t\u1ea3i l\xean m\u1ed9t l\u1ea7n ho\u1eb7c h\xe0ng lo\u1ea1t. Nghi\xeam c\u1ea5m t\u1ea3i l\xean d\u1eef li\u1ec7u c\xf4ng ty ho\u1eb7c c\xe1c th\xf4ng tin kh\xe1c"})]}))}),(0,c.jsx)(k.ZP,{loading:B,disabled:!(0,p.isEmpty)(re),type:"primary",htmlType:"submit",block:!0,size:"large",children:"C\u1eadp nh\u1eadt"})]})]})}var se={preWedding:[]},ue=T.Ry({preWedding:T.nK()}).required();function de(e){var n,t,l,o=e.data,a=e.refetch,d=e.handleCancel,h=(0,u.useRef)(null),v=N.Z.useForm(),f=(0,r.Z)(v,1)[0],m=C.ZP.useMessage(),g=(0,r.Z)(m,2),x=g[0],Z=g[1],y=(0,u.useState)(!1),T=(0,r.Z)(y,2),q=T[0],B=T[1],J=(0,u.useState)([]),W=(0,r.Z)(J,2),A=W[0],_=W[1],M=(0,E.hJ)(V.R,"homePage"),O=(0,L.useQueryClient)(),Q=(0,u.useState)({}),H=(0,r.Z)(Q,2),z=H[0],K=H[1],G=(0,u.useState)(!1),X=(0,r.Z)(G,2),Y=X[0],$=X[1],ee=(0,F.cI)({defaultValues:{preWedding:(null===o||void 0===o||null===(n=o.stories)||void 0===n?void 0:n.preWedding)||[]},resolver:(0,S.X)(ue)}),ne=ee.control,te=ee.handleSubmit,ie=ee.formState.errors,re=ee.reset,le=(ee.getValues,ee.setValue),oe=((0,R.Z)(),(null===o||void 0===o||null===(t=o.stories)||void 0===t||null===(l=t.preWedding)||void 0===l?void 0:l.length)>0);(0,u.useEffect)((function(){var e,n;f.setFieldsValue({preWedding:(null===o||void 0===o||null===(e=o.stories)||void 0===e?void 0:e.preWedding)||[]}),_((null===o||void 0===o||null===(n=o.stories)||void 0===n?void 0:n.preWedding)||[])}),[o,f]);var de=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"done"===n.file.status?(_((function(e){return[].concat((0,j.Z)(e),[{id:(0,R.Z)(),url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}])})),le("preWedding",[].concat((0,j.Z)(A),[{id:(0,R.Z)(),url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}])),C.ZP.success("".concat(n.file.name," file uploaded successfully"))):"error"===n.file.status&&C.ZP.error("".concat(n.file.name," file upload failed."));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ce=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){var t,i,r,l;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.file,i=n.onSuccess,r=n.onError;try{(l=new FileReader).readAsDataURL(t),l.onload=function(e){var n=new Image;n.src=e.target.result,n.onload=function(){var e,r,l=n.width/n.height;n.width>800||n.height>800?l>1?(e=800,r=800/l):(e=800*l,r=800):(e=n.width,r=n.height);var o=document.createElement("canvas"),a=o.getContext("2d");o.width=e,o.height=r,a.drawImage(n,0,0,e,r),o.toBlob((function(e){var n=new File([e],t.name,{type:t.type}),r=(0,P.iH)(V.t,"/manager-page/".concat(n.name)),l=(0,P.B0)(r,n);l.on("state_changed",(function(e){Math.round(e.bytesTransferred/e.totalBytes*100)}),(function(e){return console.log(e)}),(function(){(0,P.Jt)(l.snapshot.ref).then((function(e){i(),de({file:{status:"done",name:n.name,url:e}})}))}))}),t.type)}}}catch(o){console.error("Error uploading file:",o),r()}case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),he={name:"file",multiple:!0,listType:"picture",customRequest:ce,onChange:function(e){var n=e.fileList;if(A.length>0){var t=null===A||void 0===A?void 0:A.reduce((function(e,t){return n.some((function(e){var n;return null===t||void 0===t||null===(n=t.id)||void 0===n?void 0:n.includes(null===e||void 0===e?void 0:e.id)}))&&e.push(t),e}),[]);_(t),le("preWedding",t)}},fileList:A,onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}},ve=function(){$(!1)},fe=function(e){var n,t=e.originNode,i=e.file;return(0,c.jsxs)("div",{className:"py-4",children:[t,oe&&(0,c.jsx)(k.ZP,{className:"!mt-2",onClick:(n=i,function(){$(!0),K(n)}),children:"Ch\u1ec9nh s\u1eeda"})]})};return(0,c.jsxs)(c.Fragment,{children:[Z,(0,c.jsxs)(N.Z,{form:f,name:"control-preWedding-ref",ref:h,layout:"vertical",initialValues:se,onFinish:te(function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){var t,r,l,s,u,c,v;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=null===A||void 0===A?void 0:A.map((function(e){return(0,p.isEmpty)(null===e||void 0===e?void 0:e.title)?(0,i.Z)((0,i.Z)({},e),{},{title:"",description:"",gallery:[]}):e})),c=(0,i.Z)((0,i.Z)({},o),{},{stories:{title:(null===o||void 0===o||null===(t=o.stories)||void 0===t?void 0:t.title)||"",content:(null===o||void 0===o||null===(r=o.stories)||void 0===r?void 0:r.content)||"",wedding:(null===o||void 0===o||null===(l=o.stories)||void 0===l?void 0:l.wedding)||[],preWedding:u||[]}}),v=(0,E.JU)(M,c.id),e.next=5,(0,E.r7)(v,c);case 5:O.invalidateQueries("homePage"),null===d||void 0===d||d(),setTimeout((0,b.Z)((0,w.Z)().mark((function e(){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),300),B(!0),x.open({type:"success",content:"Ch\u1ec9nh s\u1eeda pre wedding th\xe0nh c\xf4ng!",duration:5}),B(!1),f.resetFields(),null===(s=h.current)||void 0===s||s.resetFields(),re();case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),children:[(0,c.jsx)(I.x,{control:ne,name:"preWedding",label:"Upload h\xecnh \u1ea3nh pre wedding",children:(0,c.jsxs)(D.Z,(0,i.Z)((0,i.Z)({},he),{},{itemRender:function(e,n){return(0,c.jsx)(fe,{originNode:e,file:n})},children:[(0,c.jsx)("p",{className:"ant-upload-drag-icon",children:(0,c.jsx)(U.Z,{})}),(0,c.jsx)("p",{className:"ant-upload-text",children:"Nh\u1ea5p ho\u1eb7c k\xe9o t\u1ec7p v\xe0o khu v\u1ef1c n\xe0y \u0111\u1ec3 t\u1ea3i l\xean"}),(0,c.jsx)("p",{className:"ant-upload-hint",children:"H\u1ed7 tr\u1ee3 t\u1ea3i l\xean m\u1ed9t l\u1ea7n ho\u1eb7c h\xe0ng lo\u1ea1t. Nghi\xeam c\u1ea5m t\u1ea3i l\xean d\u1eef li\u1ec7u c\xf4ng ty ho\u1eb7c c\xe1c th\xf4ng tin kh\xe1c"}),!oe&&(null===A||void 0===A?void 0:A.length)>0&&(0,c.jsx)("p",{className:"text-red-600",children:"C\u1eadp nh\u1eadt wedding \u0111\u1ec3 ch\u1ec9nh s\u1eeda chi ti\u1ebft c\u1ee7a t\u1eebng h\xecnh \u1ea3nh"})]}))}),(0,c.jsx)(k.ZP,{loading:q,disabled:!(0,p.isEmpty)(ie),type:"primary",htmlType:"submit",block:!0,size:"large",children:"C\u1eadp nh\u1eadt"})]}),(0,c.jsx)(s.Z,{centered:!0,bodyStyle:{overflowY:"scroll",height:"calc(100vh - 250px)"},footer:null,open:Y,onCancel:ve,title:"C\u1eadp nh\u1eadt th\xf4ng tin pre wedding",children:(0,c.jsx)(ae,{refetch:a,data:o,file:z,handleCancel:ve})})]})}var ce=T.Ry({title:T.Z_(),description:T.Z_(),gallery:T.nK().required("Vui l\xf2ng upload file h\xecnh \u1ea3nh").test("fileEmpty","Vui l\xf2ng upload file h\xecnh \u1ea3nh",(function(e){return 0!==(null===e||void 0===e?void 0:e.length)})),url:T.nK().required("Vui l\xf2ng upload file h\xecnh \u1ea3nh").test("fileEmpty","Vui l\xf2ng upload file h\xecnh \u1ea3nh",(function(e){return 0!==(null===e||void 0===e?void 0:e.length)}))}).required();function he(e){var n,t=e.data,l=e.file,o=e.handleCancel,a=e.refetch,s=(0,p.find)(null===t||void 0===t||null===(n=t.stories)||void 0===n?void 0:n.wedding,{id:null===l||void 0===l?void 0:l.id}),d=s||l,h={id:(0,R.Z)(),uid:(0,R.Z)(),status:"done",url:null===d||void 0===d?void 0:d.url,name:null===d||void 0===d?void 0:d.name,alt:null===d||void 0===d?void 0:d.alt},v=(0,u.useRef)(null),f=N.Z.useForm(),m=(0,r.Z)(f,1)[0],g=C.ZP.useMessage(),x=(0,r.Z)(g,2),Z=x[0],y=x[1],T=(0,u.useState)(!1),q=(0,r.Z)(T,2),B=q[0],J=q[1],W=(0,u.useState)([]),_=(0,r.Z)(W,2),M=_[0],H=_[1],z=(0,u.useState)([h]),K=(0,r.Z)(z,2),G=K[0],X=K[1],Y=(0,E.hJ)(V.R,"homePage"),$=(0,L.useQueryClient)(),ee={title:(null===d||void 0===d?void 0:d.title)||"",description:(null===d||void 0===d?void 0:d.description)||"",gallery:(null===d||void 0===d?void 0:d.gallery)||[],url:[h]},ne=(0,F.cI)({defaultValues:ee,resolver:(0,S.X)(ce)}),te=ne.control,ie=ne.handleSubmit,re=ne.formState.errors,le=ne.reset,oe=ne.setValue;(0,u.useEffect)((function(){m.setFieldsValue({title:(null===d||void 0===d?void 0:d.title)||"",description:(null===d||void 0===d?void 0:d.description)||"",gallery:(null===d||void 0===d?void 0:d.gallery)||[],url:[null===d||void 0===d?void 0:d.url]||0}),H((null===d||void 0===d?void 0:d.gallery)||[]),X([h]||0)}),[d,m]);var ae=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"done"===n.file.status?(H((function(e){return[].concat((0,j.Z)(e),[{id:(0,R.Z)(),url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}])})),oe("gallery",[].concat((0,j.Z)(M),[{id:(0,R.Z)(),url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}])),C.ZP.success("".concat(n.file.name," file uploaded successfully"))):"error"===n.file.status&&C.ZP.error("".concat(n.file.name," file upload failed."));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),se=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){var t,i,r,l;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.file,i=n.onSuccess,r=n.onError;try{(l=new FileReader).readAsDataURL(t),l.onload=function(e){var n=new Image;n.src=e.target.result,n.onload=function(){var e,r,l=n.width/n.height;n.width>800||n.height>800?l>1?(e=800,r=800/l):(e=800*l,r=800):(e=n.width,r=n.height);var o=document.createElement("canvas"),a=o.getContext("2d");o.width=e,o.height=r,a.drawImage(n,0,0,e,r),o.toBlob((function(e){var n=new File([e],t.name,{type:t.type}),r=(0,P.iH)(V.t,"/manager-page/".concat(n.name)),l=(0,P.B0)(r,n);l.on("state_changed",(function(e){Math.round(e.bytesTransferred/e.totalBytes*100)}),(function(e){return console.log(e)}),(function(){(0,P.Jt)(l.snapshot.ref).then((function(e){i(),ae({file:{status:"done",name:n.name,url:e}})}))}))}),t.type)}}}catch(o){console.error("Error uploading file:",o),r()}case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ue={name:"file",multiple:!0,listType:"picture-card",customRequest:se,onChange:function(e){var n=e.fileList;if(M.length>0){var t=null===M||void 0===M?void 0:M.reduce((function(e,t){return n.some((function(e){var n;return null===t||void 0===t||null===(n=t.id)||void 0===n?void 0:n.includes(null===e||void 0===e?void 0:e.id)}))&&e.push(t),e}),[]);H(t),oe("gallery",t)}},fileList:M,onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}},de=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"done"===n.file.status?(X([{id:(0,R.Z)(),url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}]),oe("url",[{id:(0,R.Z)(),url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}]),C.ZP.success("".concat(n.file.name," file uploaded successfully"))):"error"===n.file.status&&C.ZP.error("".concat(n.file.name," file upload failed."));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),he=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){var t,i,r,l;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.file,i=n.onSuccess,r=n.onError;try{(l=new FileReader).readAsDataURL(t),l.onload=function(e){var n=new Image;n.src=e.target.result,n.onload=function(){var e,r,l=n.width/n.height;n.width>800||n.height>800?l>1?(e=800,r=800/l):(e=800*l,r=800):(e=n.width,r=n.height);var o=document.createElement("canvas"),a=o.getContext("2d");o.width=e,o.height=r,a.drawImage(n,0,0,e,r),o.toBlob((function(e){var n=new File([e],t.name,{type:t.type}),r=(0,P.iH)(V.t,"/manager-page/".concat(n.name)),l=(0,P.B0)(r,n);l.on("state_changed",(function(e){Math.round(e.bytesTransferred/e.totalBytes*100)}),(function(e){return console.log(e)}),(function(){(0,P.Jt)(l.snapshot.ref).then((function(e){i(),de({file:{status:"done",name:n.name,url:e}})}))}))}),t.type)}}}catch(o){console.error("Error uploading file:",o),r()}case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ve={name:"file",multiple:!1,listType:"picture",customRequest:he,onChange:function(e){var n=e.fileList;if(M.length>0){var t=null===G||void 0===G?void 0:G.reduce((function(e,t){return n.some((function(e){var n;return null===t||void 0===t||null===(n=t.id)||void 0===n?void 0:n.includes(null===e||void 0===e?void 0:e.id)}))&&e.push(t),e}),[]);X(t),oe("url",t)}},fileList:G,onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}};return(0,c.jsxs)(c.Fragment,{children:[y,(0,c.jsxs)(N.Z,{form:m,name:"control-wedding-edit-ref",ref:v,layout:"vertical",initialValues:ee,onFinish:ie(function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){var r,u,d,c,h,f,g,x,y,N,C,k,F;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C=(0,p.map)(null===t||void 0===t||null===(r=t.stories)||void 0===r?void 0:r.wedding,(function(e){var t,i,r,o;return e.id===l.id?(0,p.assign)({},e,{name:(null===G||void 0===G||null===(t=G[0])||void 0===t?void 0:t.name)||(null===G||void 0===G||null===(i=G[0])||void 0===i?void 0:i.url),alt:(null===G||void 0===G||null===(r=G[0])||void 0===r?void 0:r.alt)||"",url:(null===G||void 0===G||null===(o=G[0])||void 0===o?void 0:o.url)||"",title:n.title,description:n.description,gallery:M}):e})),k=(0,i.Z)((0,i.Z)({},t),{},{stories:{title:(null===t||void 0===t||null===(u=t.stories)||void 0===u?void 0:u.title)||"",content:(null===t||void 0===t||null===(d=t.stories)||void 0===d?void 0:d.content)||"",wedding:(0,p.isEmpty)(s)?[].concat((0,j.Z)(null===t||void 0===t||null===(c=t.stories)||void 0===c?void 0:c.wedding),[{id:(0,R.Z)(),name:(null===G||void 0===G||null===(h=G[0])||void 0===h?void 0:h.name)||(null===G||void 0===G||null===(f=G[0])||void 0===f?void 0:f.url),alt:(null===G||void 0===G||null===(g=G[0])||void 0===g?void 0:g.alt)||"",url:(null===G||void 0===G||null===(x=G[0])||void 0===x?void 0:x.url)||"",title:n.title,description:n.description,gallery:M}]):C||[],preWedding:(null===t||void 0===t||null===(y=t.stories)||void 0===y?void 0:y.preWedding)||[]}}),F=(0,E.JU)(Y,t.id),e.next=5,(0,E.r7)(F,k);case 5:$.invalidateQueries("homePage"),setTimeout((0,b.Z)((0,w.Z)().mark((function e(){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),300),J(!0),Z.open({type:"success",content:"C\u1eadp nh\u1eadp th\xe0nh c\xf4ng!",duration:5}),J(!1),null===o||void 0===o||o(),m.resetFields(),null===(N=v.current)||void 0===N||N.resetFields(),le();case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),children:[(0,c.jsx)(I.x,{control:te,name:"url",label:"Upload h\xecnh ch\xednh c\u1ee7a wedding",children:(0,c.jsx)(Q.Z,(0,i.Z)((0,i.Z)({},ve),{},{children:(0,c.jsx)(k.ZP,{icon:(0,c.jsx)(O.Z,{}),children:"Upload"})}))}),(0,c.jsx)(I.x,{hasFeedback:!1,control:te,name:"title",label:"Ti\xeau \u0111\u1ec1",children:(0,c.jsx)(A.Z.TextArea,{allowClear:!0,placeholder:"Nh\u1eadp ti\xeau \u0111\u1ec1 d\u1ecbch v\u1ee5"})}),(0,c.jsx)(I.x,{hasFeedback:!1,control:te,name:"description",label:"N\u1ed9i dung",children:(0,c.jsx)(A.Z.TextArea,{allowClear:!0,placeholder:"Nh\u1eadp n\u1ed9i dung"})}),(0,c.jsx)(I.x,{control:te,name:"gallery",label:"Upload danh s\xe1ch h\xecnh detail v\u1ec1 Wedding",children:(0,c.jsxs)(D.Z,(0,i.Z)((0,i.Z)({},ue),{},{children:[(0,c.jsx)("p",{className:"ant-upload-drag-icon",children:(0,c.jsx)(U.Z,{})}),(0,c.jsx)("p",{className:"ant-upload-text",children:"Nh\u1ea5p ho\u1eb7c k\xe9o t\u1ec7p v\xe0o khu v\u1ef1c n\xe0y \u0111\u1ec3 t\u1ea3i l\xean"}),(0,c.jsx)("p",{className:"ant-upload-hint",children:"H\u1ed7 tr\u1ee3 t\u1ea3i l\xean m\u1ed9t l\u1ea7n ho\u1eb7c h\xe0ng lo\u1ea1t. Nghi\xeam c\u1ea5m t\u1ea3i l\xean d\u1eef li\u1ec7u c\xf4ng ty ho\u1eb7c c\xe1c th\xf4ng tin kh\xe1c"})]}))}),(0,c.jsx)(k.ZP,{loading:B,disabled:!(0,p.isEmpty)(re),type:"primary",htmlType:"submit",block:!0,size:"large",children:"C\u1eadp nh\u1eadt"})]})]})}var ve={wedding:[]},fe=T.Ry({wedding:T.nK()}).required();function pe(e){var n,t,l,o=e.data,a=e.refetch,d=e.handleCancel,h=(0,u.useRef)(null),v=N.Z.useForm(),f=(0,r.Z)(v,1)[0],m=C.ZP.useMessage(),g=(0,r.Z)(m,2),x=g[0],Z=g[1],y=(0,u.useState)(!1),T=(0,r.Z)(y,2),q=T[0],B=T[1],J=(0,u.useState)([]),W=(0,r.Z)(J,2),A=W[0],_=W[1],M=(0,E.hJ)(V.R,"homePage"),O=(0,L.useQueryClient)(),Q=(0,u.useState)({}),H=(0,r.Z)(Q,2),z=H[0],K=H[1],G=(0,u.useState)(!1),X=(0,r.Z)(G,2),Y=X[0],$=X[1],ee=(0,F.cI)({defaultValues:{wedding:(null===o||void 0===o||null===(n=o.stories)||void 0===n?void 0:n.wedding)||[]},resolver:(0,S.X)(fe)}),ne=ee.control,te=ee.handleSubmit,ie=ee.formState.errors,re=ee.reset,le=(ee.getValues,ee.setValue),oe=((0,R.Z)(),(null===o||void 0===o||null===(t=o.stories)||void 0===t||null===(l=t.wedding)||void 0===l?void 0:l.length)>0);(0,u.useEffect)((function(){var e,n;f.setFieldsValue({wedding:(null===o||void 0===o||null===(e=o.stories)||void 0===e?void 0:e.wedding)||[]}),_((null===o||void 0===o||null===(n=o.stories)||void 0===n?void 0:n.wedding)||[])}),[o,f]);var ae=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"done"===n.file.status?(_((function(e){return[].concat((0,j.Z)(e),[{id:(0,R.Z)(),url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}])})),le("wedding",[].concat((0,j.Z)(A),[{id:(0,R.Z)(),url:n.file.url,name:n.file.name,alt:n.file.name.substr(0,n.file.name.lastIndexOf("."))}])),C.ZP.success("".concat(n.file.name," file uploaded successfully"))):"error"===n.file.status&&C.ZP.error("".concat(n.file.name," file upload failed."));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),se=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){var t,i,r,l;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.file,i=n.onSuccess,r=n.onError;try{(l=new FileReader).readAsDataURL(t),l.onload=function(e){var n=new Image;n.src=e.target.result,n.onload=function(){var e,r,l=n.width/n.height;n.width>800||n.height>800?l>1?(e=800,r=800/l):(e=800*l,r=800):(e=n.width,r=n.height);var o=document.createElement("canvas"),a=o.getContext("2d");o.width=e,o.height=r,a.drawImage(n,0,0,e,r),o.toBlob((function(e){var n=new File([e],t.name,{type:t.type}),r=(0,P.iH)(V.t,"/manager-page/".concat(n.name)),l=(0,P.B0)(r,n);l.on("state_changed",(function(e){Math.round(e.bytesTransferred/e.totalBytes*100)}),(function(e){return console.log(e)}),(function(){(0,P.Jt)(l.snapshot.ref).then((function(e){i(),ae({file:{status:"done",name:n.name,url:e}})}))}))}),t.type)}}}catch(o){console.error("Error uploading file:",o),r()}case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ue={name:"file",multiple:!0,listType:"picture",customRequest:se,onChange:function(e){var n=e.fileList;if(A.length>0){var t=null===A||void 0===A?void 0:A.reduce((function(e,t){return n.some((function(e){var n;return null===t||void 0===t||null===(n=t.id)||void 0===n?void 0:n.includes(null===e||void 0===e?void 0:e.id)}))&&e.push(t),e}),[]);_(t),le("wedding",t)}},fileList:A,onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}},de=function(){$(!1)},ce=function(e){var n,t=e.originNode,i=e.file;return(0,c.jsxs)("div",{className:"py-4",children:[t,oe&&(0,c.jsx)(k.ZP,{className:"!mt-2",onClick:(n=i,function(){$(!0),K(n)}),children:"Ch\u1ec9nh s\u1eeda"})]})};return(0,c.jsxs)(c.Fragment,{children:[Z,(0,c.jsxs)(N.Z,{form:f,name:"control-wedding-ref",ref:h,layout:"vertical",initialValues:ve,onFinish:te(function(){var e=(0,b.Z)((0,w.Z)().mark((function e(n){var t,r,l,s,u,c,v;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=null===A||void 0===A?void 0:A.map((function(e){return(0,p.isEmpty)(null===e||void 0===e?void 0:e.title)?(0,i.Z)((0,i.Z)({},e),{},{title:"",description:"",gallery:[]}):e})),c=(0,i.Z)((0,i.Z)({},o),{},{stories:{title:(null===o||void 0===o||null===(t=o.stories)||void 0===t?void 0:t.title)||"",content:(null===o||void 0===o||null===(r=o.stories)||void 0===r?void 0:r.content)||"",preWedding:(null===o||void 0===o||null===(l=o.stories)||void 0===l?void 0:l.preWedding)||[],wedding:u||[]}}),v=(0,E.JU)(M,c.id),e.next=5,(0,E.r7)(v,c);case 5:O.invalidateQueries("homePage"),null===d||void 0===d||d(),setTimeout((0,b.Z)((0,w.Z)().mark((function e(){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),300),B(!0),x.open({type:"success",content:"Ch\u1ec9nh s\u1eeda wedding th\xe0nh c\xf4ng!",duration:5}),B(!1),f.resetFields(),null===(s=h.current)||void 0===s||s.resetFields(),re();case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),children:[(0,c.jsx)(I.x,{control:ne,name:"Wedding",label:"Upload h\xecnh \u1ea3nh wedding",children:(0,c.jsxs)(D.Z,(0,i.Z)((0,i.Z)({},ue),{},{itemRender:function(e,n){return(0,c.jsx)(ce,{originNode:e,file:n})},children:[(0,c.jsx)("p",{className:"ant-upload-drag-icon",children:(0,c.jsx)(U.Z,{})}),(0,c.jsx)("p",{className:"ant-upload-text",children:"Nh\u1ea5p ho\u1eb7c k\xe9o t\u1ec7p v\xe0o khu v\u1ef1c n\xe0y \u0111\u1ec3 t\u1ea3i l\xean"}),(0,c.jsx)("p",{className:"ant-upload-hint",children:"H\u1ed7 tr\u1ee3 t\u1ea3i l\xean m\u1ed9t l\u1ea7n ho\u1eb7c h\xe0ng lo\u1ea1t. Nghi\xeam c\u1ea5m t\u1ea3i l\xean d\u1eef li\u1ec7u c\xf4ng ty ho\u1eb7c c\xe1c th\xf4ng tin kh\xe1c"}),!oe&&(null===A||void 0===A?void 0:A.length)>0&&(0,c.jsx)("p",{className:"text-red-600",children:"C\u1eadp nh\u1eadt wedding \u0111\u1ec3 ch\u1ec9nh s\u1eeda chi ti\u1ebft c\u1ee7a t\u1eebng h\xecnh \u1ea3nh"})]}))}),(0,c.jsx)(k.ZP,{loading:q,disabled:!(0,p.isEmpty)(ie),type:"primary",htmlType:"submit",block:!0,size:"large",children:"C\u1eadp nh\u1eadt"})]}),(0,c.jsx)(s.Z,{centered:!0,bodyStyle:{overflowY:"scroll",height:"calc(100vh - 250px)"},footer:null,open:Y,onCancel:de,title:"C\u1eadp nh\u1eadt th\xf4ng tin wedding",children:(0,c.jsx)(he,{refetch:a,data:o,file:z,handleCancel:de})})]})}function me(e){var n=e.data,t=e.handleCancel,i=e.refetch;console.log("datadata",n);var r=[{key:"1",label:"PRE WEDDING",children:(0,c.jsx)(de,{data:n,refetch:i,handleCancel:t})},{key:"2",label:"PH\xd3NG S\u1ef0 C\u01af\u1edaI",children:(0,c.jsx)(pe,{data:n,refetch:i,handleCancel:t})}];return(0,c.jsx)(a.Z,{defaultActiveKey:"1",centered:!0,items:r})}function ge(){var e,n,t,d,f,p,m,g,j,N,C,k=(0,u.useState)(!1),F=(0,r.Z)(k,2),S=F[0],T=F[1],R=(0,u.useState)(""),P=(0,r.Z)(R,2),I=P[0],D=P[1],U=function(){var e=(0,E.IO)((0,E.hJ)(V.R,"homePage")),n=(0,q.sQ)(["homePage"],e),t=n.data,r=[];null===t||void 0===t||t.forEach((function(e){r.push((0,i.Z)({id:e.id},e.data()))}));var l=function(){var e=(0,b.Z)((0,w.Z)().mark((function e(){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.refetch();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error refetching wedding dress data:",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return{isError:n.isError,isLoading:n.isLoading,data:r,refetch:l}}(),L=U.data,B=U.refetch,J=function(e){return function(){T(!0),D(e)}},A=function(){T(!1)},_={hero:(0,c.jsx)(W,{data:L,refetch:B,handleCancel:A}),introduceStudio:(0,c.jsx)(M,{data:(null===L||void 0===L?void 0:L[0])||{},refetch:B,handleCancel:A}),services:(0,c.jsx)(X,{data:L,refetch:B,handleCancel:A}),stories:(0,c.jsx)($,{data:(null===L||void 0===L?void 0:L[0])||{},refetch:B,handleCancel:A}),testimonials:(0,c.jsx)(ie,{data:(null===L||void 0===L?void 0:L[0])||{},refetch:B,handleCancel:A}),preWedding:(0,c.jsx)(me,{data:(null===L||void 0===L?void 0:L[0])||{},refetch:B,handleCancel:A})},O=[{key:"1",label:"PRE WEDDING",children:(0,c.jsx)(re,{data:(null===L||void 0===L||null===(e=L[0])||void 0===e||null===(n=e.stories)||void 0===n?void 0:n.preWedding)||[]})},{key:"2",label:"PH\xd3NG S\u1ef0 C\u01af\u1edaI",children:(0,c.jsx)(le,{data:(null===L||void 0===L||null===(t=L[0])||void 0===t||null===(d=t.stories)||void 0===d?void 0:d.wedding)||[]})}];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"m-2 p-2 md:p-10 bg-white rounded-3xl",children:[(0,c.jsx)("div",{className:"mb-4",children:(0,c.jsx)(l.Z,{items:[{href:"/",title:"Qu\u1ea3n l\xfd trang"},{title:"Trang ch\u1ee7"}]})}),(0,c.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,c.jsx)(o.Z,{title:"Banner Header (Carousel)",extra:(0,c.jsx)("p",{className:"text-blue-600 cursor-pointer",onClick:J("hero"),children:"Ch\u1ec9nh s\u1eeda"}),children:(0,c.jsx)(h,{data:null===L||void 0===L||null===(f=L[0])||void 0===f?void 0:f.hero})}),(0,c.jsx)(o.Z,{title:"Gi\u1edbi thi\u1ec7u",extra:(0,c.jsx)("p",{className:"text-blue-600 cursor-pointer",onClick:J("introduceStudio"),children:"Ch\u1ec9nh s\u1eeda"}),children:(0,c.jsx)(v,(0,i.Z)({},null===L||void 0===L||null===(p=L[0])||void 0===p?void 0:p.introduceStudio))}),(0,c.jsx)(o.Z,{title:"Danh s\xe1ch d\u1ecbch v\u1ee5",extra:(0,c.jsx)("p",{className:"text-blue-600 cursor-pointer",onClick:J("services"),children:"Ch\u1ec9nh s\u1eeda"}),children:(0,c.jsx)(x,{services:null===L||void 0===L||null===(m=L[0])||void 0===m?void 0:m.services})}),(0,c.jsxs)(o.Z,{title:"Danh s\xe1ch Album c\u01b0\u1edbi",extra:(0,c.jsx)("p",{className:"text-blue-600 cursor-pointer",onClick:J("stories"),children:"Ch\u1ec9nh s\u1eeda"}),children:[(0,c.jsx)(Z,{stories:null===L||void 0===L||null===(g=L[0])||void 0===g?void 0:g.stories}),(0,c.jsx)(o.Z,{title:"Danh s\xe1ch PreWedding and Wedding",extra:(0,c.jsx)("p",{className:"text-blue-600 cursor-pointer",onClick:J("preWedding"),children:"Ch\u1ec9nh s\u1eeda"}),children:(0,c.jsx)(a.Z,{defaultActiveKey:"1",centered:!0,items:O})})]}),(0,c.jsx)(o.Z,{title:"Nh\u1eadn x\xe9t c\u1ee7a kh\xe1ch h\xe0ng",extra:(0,c.jsx)("p",{className:"text-blue-600 cursor-pointer",onClick:J("testimonials"),children:"Ch\u1ec9nh s\u1eeda"}),children:(0,c.jsx)(y,{titleReviewer:null===L||void 0===L||null===(j=L[0])||void 0===j?void 0:j.titleReviewer,reviewer:null===L||void 0===L||null===(N=L[0])||void 0===N?void 0:N.reviewer})})]})]}),(0,c.jsx)(s.Z,{centered:!0,open:S,title:"Ch\u1ec9nh s\u1eeda",onCancel:A,bodyStyle:{overflowY:"scroll",height:"calc(100vh - 200px)"},footer:null,children:null!==(C=_[I])&&void 0!==C?C:(0,c.jsx)(W,{})})]})}}}]);
//# sourceMappingURL=5748.a71a9aad.chunk.js.map