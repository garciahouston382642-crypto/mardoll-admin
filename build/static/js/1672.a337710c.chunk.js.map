{"version":3,"file":"static/js/1672.a337710c.chunk.js","mappings":"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","sources":["components/ColorButton/index.tsx","components/Form/index.tsx","pages/Employee/EditEmployee/index.tsx","pages/Employee/EditEmployee/EditPermissions.tsx","pages/Employee/EmployeeList/index.tsx","pages/Employee/EmployeeList/useEmployee.ts","utils/index.ts"],"sourcesContent":["import { ConfigProvider, Button, theme, ButtonProps } from 'antd';\nimport React from 'react';\nconst { useToken } = theme;\n\ninterface ColorButtonProps extends ButtonProps {\n    children?: React.ReactNode;\n    override: string;\n}\nconst ColorButton = ({ children, override, ...restProps }: ColorButtonProps) => {\n    const { token } = useToken();\n    const overrideColor = (token as any)?.[override] as any || override;\n    const modifiedTheme = {\n        token: {\n            ...token, colorPrimary: overrideColor, colorPrimaryHover: overrideColor, colorPrimaryBorderHover: overrideColor, colorPrimaryTextHover: overrideColor,\n        },\n    };\n\n    return (\n        <ConfigProvider theme={modifiedTheme} >\n            <Button {...restProps}>{children}</Button>\n        </ConfigProvider>\n    );\n};\n\nexport default ColorButton;","import React from 'react';\nimport { Form as AntdForm } from 'antd';\nimport type { Control, FieldPath, FieldValues } from 'react-hook-form';\nimport { useController } from 'react-hook-form';\nimport _ from 'lodash'\n\ntype AntdFormItemProps = React.ComponentProps<typeof AntdForm.Item>;\n\nexport type FormItemProps<TFieldValues extends FieldValues = FieldValues> = {\n    children: React.ReactNode;\n    control?: Control<TFieldValues>;\n    name: FieldPath<TFieldValues>;\n} & Omit<AntdFormItemProps, 'name' | 'normalize' | 'rules' | 'validateStatus'>;\n\n// TODO: Support `onBlur` `ref`\n// FIXME: `Touched` does not change in devtool\nexport const FormItem = <TFieldValues extends FieldValues = FieldValues>({\n    children,\n    control,\n    name,\n    help,\n    hasFeedback = false,\n    ...props\n}: FormItemProps<TFieldValues>) => {\n    const { field, fieldState, formState: { errors } } = useController({ name, control });\n    const handleNormalize: AntdFormItemProps['normalize'] = (value) => {\n        field.onChange(value);\n        return value;\n    };\n    return (\n        <AntdForm.Item\n            hasFeedback={hasFeedback}\n            name={name as string}\n            // initialValue={field.value}\n            normalize={handleNormalize}\n            validateStatus={fieldState.invalid ? 'error' : undefined}\n            help={(errors[name]?.message ?? help) as string}\n            {...props}\n        >\n            {children}\n        </AntdForm.Item>\n    );\n};","import {\r\n  EyeInvisibleOutlined,\r\n  EyeTwoTone,\r\n  InboxOutlined,\r\n} from \"@ant-design/icons\";\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport type { UploadProps } from \"antd\";\r\nimport {\r\n  Button,\r\n  Form as FormAntDeisgn,\r\n  Input,\r\n  Select,\r\n  Upload,\r\n  message,\r\n} from \"antd\";\r\nimport type { FormInstance } from \"antd/es/form\";\r\nimport {\r\n  collection,\r\n  doc,\r\n  getDocs,\r\n  limit,\r\n  query,\r\n  updateDoc,\r\n  where,\r\n} from \"firebase/firestore\";\r\nimport { getDownloadURL, ref, uploadBytesResumable } from \"firebase/storage\";\r\nimport { isEmpty, keyBy } from \"lodash\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useQueryClient } from \"react-query\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport * as yup from \"yup\";\r\nimport { FormItem } from \"../../../components/Form\";\r\nimport { firestore, storage } from \"../../../lib/firebase\";\r\nimport { EmployeeModel } from \"../../../models\";\r\nimport { isVietnamesePhoneNumber, regexPassword } from \"../../../utils\";\r\nimport permissionsData from \"./permissions-data.json\";\r\nimport { useUser } from \"../../../store/useUser\";\r\nconst { Dragger } = Upload;\r\n\r\nconst schema = yup\r\n  .object({\r\n    name: yup.string().required(\"Vui lòng nhập tên\"),\r\n    permission: yup.string().required(\"Vui chọn quyền\"),\r\n    phone: yup\r\n      .string()\r\n      .required(\"Vui lòng nhập số điện thoại của bạn!\")\r\n      .test(\"phone\", \"Số điên thoại sai định dạng\", (str, context) => {\r\n        return isVietnamesePhoneNumber(str);\r\n      }),\r\n    email: yup\r\n      .string()\r\n      .email(\"Sai định dang email. Ví dụ abc@gmail.com\")\r\n      .required(\"Vui lòng nhập email của bạn\"),\r\n    password: yup\r\n      .string()\r\n      .min(8, \"Độ dài từ 8-50 kí tự\")\r\n      .max(50, \"Độ dài từ 8-50 kí tự\")\r\n      .matches(\r\n        regexPassword,\r\n        \"Chứa ít nhất một kí tự thường, một kí tự hoa, một kí tự đặc biệt và một số\"\r\n      )\r\n      .required(\"Vui lòng nhập mật khẩu\"),\r\n    address: yup.string().required(\"Vui lòng địa chỉ\"),\r\n    avatar: yup\r\n      .mixed()\r\n      .required(\"Vui lòng upload file hình ảnh\")\r\n      .test(\"fileEmpty\", \"Vui lòng upload file hình ảnh\", (value: any) => {\r\n        if (value?.length === 0) return false;\r\n\r\n        return true;\r\n      }),\r\n  })\r\n  .required();\r\n\r\nexport default function EditEmployee({\r\n  defaultValues,\r\n  handleCancel,\r\n  refetch,\r\n}: {\r\n  defaultValues: EmployeeModel;\r\n  handleCancel: () => void;\r\n  refetch: () => void;\r\n}) {\r\n  const formRef = useRef<FormInstance>(null);\r\n  const [form] = FormAntDeisgn.useForm();\r\n  const [messageApi, contextHolder] = message.useMessage();\r\n  const [loading, setLoading] = useState(false);\r\n  const employeeRef = collection(firestore, \"employee\");\r\n  const queryClient = useQueryClient();\r\n  const [fileList, setFileList] = useState<any[]>([\r\n    {\r\n      uid: uuidv4(),\r\n      name: \"xxx.png\",\r\n      status: \"done\",\r\n      url: defaultValues.avatar,\r\n    },\r\n  ]);\r\n  const { user } = useUser();\r\n  const userRole = user?.permission || \"\";\r\n  const {\r\n    control,\r\n    handleSubmit,\r\n    formState: { errors },\r\n    reset,\r\n    setValue,\r\n    getValues,\r\n  } = useForm<any>({\r\n    defaultValues,\r\n    resolver: yupResolver(schema),\r\n  });\r\n\r\n  useEffect(() => {\r\n    form.setFieldsValue({\r\n      name: defaultValues?.name || \"\",\r\n      permission: defaultValues?.permission || \"\",\r\n      phone: defaultValues?.phone || \"\",\r\n      email: defaultValues.email || \"\",\r\n      password: defaultValues.password || \"\",\r\n      address: defaultValues.address || \"\",\r\n    });\r\n    setFileList(\r\n      [\r\n        {\r\n          uid: uuidv4(),\r\n          name: \"xxx.png\",\r\n          status: \"done\",\r\n          url: defaultValues.avatar,\r\n        },\r\n      ] || []\r\n    );\r\n  }, [defaultValues, form]);\r\n\r\n  // useEffect(() => {\r\n  //   form.setFieldValue(defaultValues)\r\n  // }, [defaultValues, form])\r\n\r\n  const handleUpload = async (info: any) => {\r\n    if (info.file.status === \"done\") {\r\n      setFileList([\r\n        {\r\n          id: uuidv4(),\r\n          status: \"done\",\r\n          url: info.file.url,\r\n          name: info.file.name,\r\n        },\r\n      ]);\r\n      setValue(\"avatar\", [\r\n        {\r\n          id: uuidv4(),\r\n          status: \"done\",\r\n          url: info.file.url,\r\n          name: info.file.name,\r\n        },\r\n      ]);\r\n      message.success(`${info.file.name} file uploaded successfully`);\r\n    } else if (info.file.status === \"error\") {\r\n      message.error(`${info.file.name} file upload failed.`);\r\n    }\r\n  };\r\n\r\n  const customRequest = async ({ file, onSuccess, onError }: any) => {\r\n    try {\r\n      // const storageRef = ref(storage, `/files/${file.name}`);\r\n\r\n      // const uploadTask = uploadBytesResumable(storageRef, file);\r\n\r\n      // uploadTask.on(\r\n      //   \"state_changed\",\r\n      //   (snapshot) => {\r\n      //     const percent = Math.round(\r\n      //       (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n      //     );\r\n\r\n      //     // update progress\r\n      //     // setPercent(percent);\r\n      //   },\r\n      //   (err) => console.log(err),\r\n      //   () => {\r\n      //     // download url\r\n      //     getDownloadURL(uploadTask.snapshot.ref).then((url) => {\r\n      //       onSuccess();\r\n      //       handleUpload({\r\n      //         file: {\r\n      //           status: \"done\",\r\n      //           name: file.name,\r\n      //           url,\r\n      //         },\r\n      //       });\r\n      //     });\r\n      //   }\r\n      // );\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = (e: any) => {\r\n        const originalImage = new Image() as any;\r\n        originalImage.src = e.target.result;\r\n\r\n        originalImage.onload = () => {\r\n          // Define your desired dimensions\r\n          const maxWidth = 800;\r\n          const maxHeight = 800;\r\n\r\n          // Calculate the new dimensions while preserving the aspect ratio\r\n          const aspectRatio = originalImage.width / originalImage.height;\r\n          let newWidth, newHeight;\r\n          if (\r\n            originalImage.width > maxWidth ||\r\n            originalImage.height > maxHeight\r\n          ) {\r\n            if (aspectRatio > 1) {\r\n              newWidth = maxWidth;\r\n              newHeight = maxWidth / aspectRatio;\r\n            } else {\r\n              newWidth = maxHeight * aspectRatio;\r\n              newHeight = maxHeight;\r\n            }\r\n          } else {\r\n            newWidth = originalImage.width;\r\n            newHeight = originalImage.height;\r\n          }\r\n\r\n          // Create a canvas element to draw the resized image\r\n          const canvas = document.createElement(\"canvas\");\r\n          const ctx = canvas.getContext(\"2d\") as any;\r\n          canvas.width = newWidth;\r\n          canvas.height = newHeight;\r\n\r\n          // Draw the resized image on the canvas\r\n          ctx.drawImage(originalImage, 0, 0, newWidth, newHeight);\r\n\r\n          // Convert the canvas to a Blob (image file)\r\n          canvas.toBlob((blob: any) => {\r\n            // Create a new File object from the Blob\r\n            const resizedFile = new File([blob], file.name, {\r\n              type: file.type,\r\n            });\r\n            const storageRef = ref(storage, `/files/${resizedFile.name}`);\r\n            const uploadTask = uploadBytesResumable(storageRef, resizedFile);\r\n\r\n            uploadTask.on(\r\n              \"state_changed\",\r\n              (snapshot) => {\r\n                const percent = Math.round(\r\n                  (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n                );\r\n\r\n                // update progress\r\n                // setPercent(percent);\r\n              },\r\n              (err) => console.log(err),\r\n              () => {\r\n                // download url\r\n                getDownloadURL(uploadTask.snapshot.ref).then((url) => {\r\n                  onSuccess();\r\n                  handleUpload({\r\n                    file: {\r\n                      status: \"done\",\r\n                      name: resizedFile.name,\r\n                      url,\r\n                    },\r\n                  });\r\n                });\r\n              }\r\n            );\r\n          }, file.type);\r\n        };\r\n      };\r\n    } catch (error) {\r\n      console.error(\"Error uploading file:\", error);\r\n      onError();\r\n    }\r\n  };\r\n  const handleChange: UploadProps[\"onChange\"] = ({ fileList: newFileList }) => {\r\n    // setFileList(newFileList);\r\n    // setValue(\r\n    //   \"avatar\",\r\n    //   \"https://firebasestorage.googleapis.com/v0/b/mardoll-studio.appspot.com/o/profile.png?alt=media&token=317fa84c-f068-47d4-aa48-4943fad74b2b\"\r\n    // );\r\n    if (fileList.length > 0) {\r\n      const matchingUrls = fileList?.reduce((result: any, image: any) => {\r\n        if (newFileList.some((file: any) => image?.id?.includes(file?.id))) {\r\n          result.push(image);\r\n        }\r\n        return result;\r\n      }, []);\r\n      setFileList(matchingUrls);\r\n      setValue(\"avatar\", matchingUrls);\r\n    }\r\n  };\r\n  const props: UploadProps = {\r\n    name: \"file\",\r\n    multiple: false,\r\n    listType: \"picture-card\",\r\n    // beforeUpload,\r\n    customRequest,\r\n    onChange: handleChange,\r\n    fileList,\r\n    onDrop(e) {\r\n      console.log(\"Dropped files\", e.dataTransfer.files);\r\n    },\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {contextHolder}\r\n      <FormAntDeisgn\r\n        form={form}\r\n        name=\"control-edit-employee-ref\"\r\n        ref={formRef}\r\n        layout=\"vertical\"\r\n        initialValues={defaultValues}\r\n        onFinish={handleSubmit(async (data: EmployeeModel) => {\r\n          setLoading(true);\r\n          console.log('data?.email', data?.email, defaultValues.email);\r\n          if (data?.email !== defaultValues.email) {\r\n            const accountQuery = query(\r\n              employeeRef,\r\n              where(\"email\", \"==\", data?.email),\r\n              limit(1)\r\n            );\r\n\r\n            const docSnap = await getDocs(accountQuery);\r\n   \r\n            if (!docSnap.empty) {\r\n              messageApi.open({\r\n                type: \"error\",\r\n                content: `Email ${data?.email} này đã tồn tại trong hệ thống vui lòng nhập email khác!`,\r\n                duration: 5,\r\n              });\r\n              setLoading(false);\r\n              return;\r\n            }\r\n            const docRef = doc(employeeRef, defaultValues.id);\r\n            const payload = {\r\n              ...data,\r\n              avatar: fileList?.[0]?.url,\r\n            };\r\n            await updateDoc(docRef, payload);\r\n            queryClient.invalidateQueries(\"employee\");\r\n            setTimeout(async () => await refetch(), 300);\r\n            setLoading(true);\r\n            messageApi.open({\r\n              type: \"success\",\r\n              content: \"Cập nhập nhân viên thành công!\",\r\n              duration: 5,\r\n            });\r\n            setLoading(false);\r\n            handleCancel?.();\r\n            form.resetFields();\r\n            formRef.current?.resetFields();\r\n            reset();\r\n            setLoading(false);\r\n            return;\r\n          }\r\n          const docRef = doc(employeeRef, defaultValues.id);\r\n          const payload = {\r\n            ...data,\r\n            permissions: keyBy(permissionsData.userProfiles, 'id')?.[data?.permission]?.permissions || '',\r\n            avatar: fileList?.[0]?.url,\r\n          };\r\n          await updateDoc(docRef, payload);\r\n          queryClient.invalidateQueries(\"employee\");\r\n          setTimeout(async () => await refetch(), 300);\r\n          setLoading(true);\r\n          messageApi.open({\r\n            type: \"success\",\r\n            content: \"Cập nhập nhân viên thành công!\",\r\n            duration: 5,\r\n          });\r\n          setLoading(false);\r\n          handleCancel?.();\r\n          form.resetFields();\r\n          formRef.current?.resetFields();\r\n          reset();\r\n          setLoading(false);\r\n        })}\r\n      >\r\n        <FormItem control={control} name=\"email\" label=\"Email\">\r\n          <Input placeholder=\"Nhập email\" />\r\n        </FormItem>\r\n        <FormItem control={control} name=\"password\" label=\"Password\">\r\n          <Input.Password\r\n            iconRender={(visible) =>\r\n              visible ? <EyeTwoTone /> : <EyeInvisibleOutlined />\r\n            }\r\n            placeholder=\"Nhập email\"\r\n          />\r\n        </FormItem>\r\n        <div className=\"grid grid-cols-1 xl:grid-cols-3 xl:gap-6\">\r\n          <FormItem control={control} name=\"name\" label=\"Tên nhân viên\">\r\n            <Input placeholder=\"Nhập tên nhân viên\" />\r\n          </FormItem>\r\n          <FormItem control={control} name=\"phone\" label=\"Số điện thoại\">\r\n            <Input placeholder=\"Nhập số điện thoại\" />\r\n          </FormItem>\r\n          {/* <FormItem control={control} name=\"permission\" label=\"Quyền\">\r\n            <Select>\r\n              <Select.Option value=\"admin\">Quản trị viên</Select.Option>\r\n              <Select.Option value=\"manager\">Quản lý</Select.Option>\r\n              <Select.Option value=\"employee\">Thợ chụp ảnh</Select.Option>\r\n              <Select.Option value=\"sale\">Sale</Select.Option>\r\n              <Select.Option value=\"marketing\">Marketing</Select.Option>\r\n            </Select>\r\n          </FormItem> */}\r\n          <FormItem control={control} name=\"permission\" label=\"Quyền\">\r\n  <Select>\r\n    {userRole === \"admin\" ? (\r\n      <>\r\n        <Select.Option value=\"admin\">Quản trị viên</Select.Option>\r\n        <Select.Option value=\"manager\">Quản lý</Select.Option>\r\n        <Select.Option value=\"employee\">Thợ chụp ảnh</Select.Option>\r\n        <Select.Option value=\"sale\">Sale</Select.Option>\r\n        <Select.Option value=\"marketing\">Marketing</Select.Option>\r\n      </>\r\n    ) : userRole === \"manager\" ? (\r\n      <>\r\n        <Select.Option value=\"manager\">Quản lý</Select.Option>\r\n        <Select.Option value=\"employee\">Thợ chụp ảnh</Select.Option>\r\n        <Select.Option value=\"sale\">Sale</Select.Option>\r\n        <Select.Option value=\"marketing\">Marketing</Select.Option>\r\n      </>\r\n    ) : (\r\n      <>\r\n        <Select.Option value=\"employee\">Thợ chụp ảnh</Select.Option>\r\n        <Select.Option value=\"sale\">Sale</Select.Option>\r\n        <Select.Option value=\"marketing\">Marketing</Select.Option>\r\n      </>\r\n    )}\r\n  </Select>\r\n</FormItem>\r\n        </div>\r\n        <FormItem control={control} name=\"address\" label=\"Địa chỉ\">\r\n          <Input placeholder=\"Nhập địa chỉ\" />\r\n        </FormItem>\r\n        <div className=\"py-6\">\r\n          <FormItem\r\n            control={control}\r\n            name=\"avatar\"\r\n            // valuePropName='fileList'\r\n            label=\"Upload hình ảnh\"\r\n          >\r\n            <Dragger {...props}>\r\n              <p className=\"ant-upload-drag-icon\">\r\n                <InboxOutlined />\r\n              </p>\r\n              <p className=\"ant-upload-text\">\r\n                Nhấp hoặc kéo tệp vào khu vực này để tải lên\r\n              </p>\r\n              <p className=\"ant-upload-hint\">\r\n                Hỗ trợ tải lên một lần hoặc hàng loạt. Nghiêm cấm tải lên dữ\r\n                liệu công ty hoặc các thông tin khác\r\n              </p>\r\n            </Dragger>\r\n          </FormItem>\r\n        </div>\r\n        <Button\r\n          loading={loading}\r\n          disabled={!isEmpty(errors)}\r\n          type=\"primary\"\r\n          htmlType=\"submit\"\r\n          block\r\n          size=\"large\"\r\n        >\r\n          Cập nhật\r\n        </Button>\r\n      </FormAntDeisgn>\r\n    </>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\nimport {\n  Card,\n  Checkbox,\n  Button,\n  Badge,\n  Tabs,\n  Space,\n  Row,\n  Col,\n  Typography,\n  Divider,\n  Table,\n  Tag,\n  Select,\n  Alert,\n  Modal,\n  App\n} from \"antd\";\nimport {\n  ShoppingCartOutlined,\n  UserOutlined,\n  FileTextOutlined,\n  HomeOutlined,\n  TeamOutlined,\n  DollarOutlined,\n  SettingOutlined,\n  PhoneOutlined,\n  CalendarOutlined,\n  ClockCircleOutlined,\n  SafetyOutlined,\n  EyeOutlined,\n  PlusOutlined,\n  DeleteOutlined,\n  EditOutlined,\n  UserSwitchOutlined,\n  SaveOutlined\n} from \"@ant-design/icons\";\nimport permissionsData from \"./permissions-data.json\";\nimport { toast } from \"react-toastify\";\nimport {\n  collection,\n  doc,\n  getDocs,\n  limit,\n  query,\n  updateDoc,\n  where,\n} from \"firebase/firestore\";\nimport { EmployeeModel } from \"../../../models\";\nimport { useQueryClient } from \"react-query\";\nimport { firestore } from \"../../../lib/firebase\";\n\nconst { Title, Text, Paragraph } = Typography;\nconst { TabPane } = Tabs;\nconst { Option } = Select;\n\ninterface Permission {\n  id: string;\n  name: string;\n  icon: React.ReactNode;\n  description: string;\n}\n\ninterface CrudOperation {\n  id: string;\n  name: string;\n  icon: React.ReactNode;\n  color: string;\n}\n\ninterface UserProfile {\n  id: string;\n  name: string;\n  description: string;\n  permissions: {[key: string]: string[]};\n}\n\nconst crudOperations: CrudOperation[] = [\n  {\n    id: \"view\",\n    name: \"Xem\",\n    icon: <EyeOutlined />,\n    color: \"blue\"\n  },\n  {\n    id: \"create\",\n    name: \"Thêm\",\n    icon: <PlusOutlined />,\n    color: \"green\"\n  },\n  {\n    id: \"edit\",\n    name: \"Sửa\",\n    icon: <EditOutlined />,\n    color: \"orange\"\n  },\n  {\n    id: \"delete\",\n    name: \"Xoá\",\n    icon: <DeleteOutlined />,\n    color: \"red\"\n  }\n];\n\nconst permissions: Permission[] = [\n  {\n    id: \"ecommerce\",\n    name: \"Ecommerce\",\n    icon: <ShoppingCartOutlined className=\"text-lg\" />,\n    description: \"Quản lý cửa hàng trực tuyến và bán hàng\"\n  },\n  {\n    id: \"employees\",\n    name: \"Nhân viên\",\n    icon: <UserOutlined className=\"text-lg\" />,\n    description: \"Quản lý thông tin và phân quyền nhân viên\"\n  },\n  {\n    id: \"contracts\",\n    name: \"Hợp đồng\",\n    icon: <FileTextOutlined className=\"text-lg\" />,\n    description: \"Quản lý hợp đồng và tài liệu pháp lý\"\n  },\n  {\n    id: \"wedding-dresses\",\n    name: \"Váy Cưới\",\n    icon: <HomeOutlined className=\"text-lg\" />,\n    description: \"Quản lý danh mục váy cưới và trang phục\"\n  },\n  {\n    id: \"member-management\",\n    name: \"Quản lý thành viên\",\n    icon: <TeamOutlined className=\"text-lg\" />,\n    description: \"Quản lý hội viên và khách hàng thân thiết\"\n  },\n  {\n    id: \"pricing\",\n    name: \"Bảng giá\",\n    icon: <DollarOutlined className=\"text-lg\" />,\n    description: \"Quản lý giá cả và chính sách giá\"\n  },\n  {\n    id: \"page-management\",\n    name: \"Quản lý Trang\",\n    icon: <SettingOutlined className=\"text-lg\" />,\n    description: \"Quản lý nội dung trang web và CMS\"\n  },\n  {\n    id: \"customer-contact\",\n    name: \"Thông tin liên hệ khách hàng\",\n    icon: <PhoneOutlined className=\"text-lg\" />,\n    description: \"Quản lý thông tin liên hệ và CSKH\"\n  },\n  {\n    id: \"booking-schedule\",\n    name: \"Lịch đặt của khách hàng\",\n    icon: <CalendarOutlined className=\"text-lg\" />,\n    description: \"Quản lý lịch hẹn và đặt chỗ\"\n  },\n  {\n    id: \"machine-schedule\",\n    name: \"Lịch bấm máy của khách hàng\",\n    icon: <ClockCircleOutlined className=\"text-lg\" />,\n    description: \"Quản lý lịch chụp ảnh và sử dụng thiết bị\"\n  }\n];\n\nconst getOperationBgClass = (color: string) => {\n  switch (color) {\n    case 'blue': return 'bg-blue-50 border-blue-200 text-blue-700';\n    case 'green': return 'bg-green-50 border-green-200 text-green-700';\n    case 'orange': return 'bg-orange-50 border-orange-200 text-orange-700';\n    case 'red': return 'bg-red-50 border-red-200 text-red-700';\n    default: return 'bg-gray-50 border-gray-200';\n  }\n};\n\nexport default function EditPermissions({ data, refetch, handleCancel }: { data: EmployeeModel, refetch: () => void, handleCancel: () => void }) {\n  // console.log('data', data?.permission)\n  const queryClient = useQueryClient();\n    const employeeRef = collection(firestore, \"employee\");\n  const [selectedPermissions, setSelectedPermissions] = useState<{[key: string]: string[]}>({});\n  const [activeTab, setActiveTab] = useState(\"permissions\");\n  const [selectedProfile, setSelectedProfile] = useState<string | null>(null);\n  const [isCustomMode, setIsCustomMode] = useState(true);\n  const [saveModalVisible, setSaveModalVisible] = useState(false);\n  const [savedData, setSavedData] = useState<any>(null);\n\n  useEffect(() => {\n    if (data?.permission) {\n      setSelectedProfile(data?.permission);\n       const profile = permissionsData.userProfiles.find(p => p.id === data?.permission);\n       const mapProfile = {\n         ...profile,\n         permissions: data?.permissions ?? {}\n       };\n      if (profile) {\n       \n        // Map user permissions data to UI with validation\n        const mappedPermissions = mapUserPermissionsToUI((mapProfile as any).permissions);\n        setSelectedPermissions(mappedPermissions);\n\n        // Log for debugging\n        console.log('Profile loaded:', profile.name);\n        console.log('Original permissions:', mapProfile.permissions);\n        console.log('Mapped to UI:', mappedPermissions);\n        console.log('Summary:', getPermissionSummary(mappedPermissions));\n      }\n    }\n  }, [data])\n\n  // Load permissions from selected profile\n  useEffect(() => {\n    if (selectedProfile && !isCustomMode) {\n      const profile = permissionsData.userProfiles.find(p => p.id === selectedProfile);\n\n      if (profile) {\n       \n        // Map user permissions data to UI with validation\n        const mappedPermissions = mapUserPermissionsToUI((profile as any).permissions);\n        setSelectedPermissions(mappedPermissions);\n\n        // Log for debugging\n        console.log('Profile loaded:', profile.name);\n        console.log('Original permissions:', profile.permissions);\n        console.log('Mapped to UI:', mappedPermissions);\n        console.log('Summary:', getPermissionSummary(mappedPermissions));\n      }\n    }\n  }, [selectedProfile, isCustomMode]);\n\n  const handleProfileChange = (profileId: string) => {\n    setSelectedProfile(profileId);\n    setIsCustomMode(false);\n  };\n\n  const handleCustomMode = () => {\n    setIsCustomMode(true);\n    // Keep selectedProfile, don't reset it\n  };\n\n  const handleSavePermissions = async () => {\n    const currentProfile = selectedProfile ?\n      permissionsData.userProfiles.find(p => p.id === selectedProfile) : null;\n\n    const result = {\n      baseProfile: currentProfile ? {\n        id: currentProfile.id,\n        name: currentProfile.name,\n        description: currentProfile.description\n      } : null,\n      isCustomized: isCustomMode,\n      permissions: selectedPermissions,\n      summary: {\n        totalModules: getTotalPermissionsCount(),\n        totalOperations: Object.values(selectedPermissions).flat().length,\n        editableModules: Object.values(selectedPermissions).filter(ops => ops.includes('edit')).length,\n        deletableModules: Object.values(selectedPermissions).filter(ops => ops.includes('delete')).length\n      },\n      timestamp: new Date().toISOString()\n    };\n    const docRef = doc(employeeRef, data.id);\n     const payload = {\n            ...data,\n            permission: result?.baseProfile?.id,\n            permissions: result?.permissions,\n          };\n          await updateDoc(docRef, payload);\n          queryClient.invalidateQueries(\"employee\");\n          setTimeout(async () => await refetch(), 300);\n\n    setSavedData(result);\n    // setSaveModalVisible(true);\n     toast.success(\"Đã lưu cấu hình quyền thành công!\", {\n                    position: toast.POSITION.TOP_RIGHT,\n                  });\n                  handleCancel?.();\n    // message.success('Đã lưu cấu hình quyền thành công!');\n    return result;\n  };\n\n  const handlePermissionChange = (permissionId: string, checked: boolean) => {\n    setIsCustomMode(true); // Switch to custom mode when manually changing permissions\n    // Keep selectedProfile, don't reset it\n\n    if (checked) {\n      setSelectedPermissions(prev => ({\n        ...prev,\n        [permissionId]: [\"view\"]\n      }));\n    } else {\n      setSelectedPermissions(prev => {\n        const newState = { ...prev };\n        delete newState[permissionId];\n        return newState;\n      });\n    }\n  };\n\n  const handleCrudChange = (permissionId: string, operation: string, checked: boolean) => {\n    setIsCustomMode(true); // Switch to custom mode when manually changing CRUD permissions\n    // Keep selectedProfile, don't reset it\n\n    setSelectedPermissions(prev => {\n      const currentOps = prev[permissionId] || [];\n      if (checked) {\n        return {\n          ...prev,\n          [permissionId]: [...currentOps, operation]\n        };\n      } else {\n        return {\n          ...prev,\n          [permissionId]: currentOps.filter(op => op !== operation)\n        };\n      }\n    });\n  };\n\n  const getSelectedPermissions = () => {\n    return permissions.filter(p => selectedPermissions[p.id]?.length > 0);\n  };\n\n  const getTotalPermissionsCount = () => {\n    return Object.keys(selectedPermissions).filter(key => selectedPermissions[key].length > 0).length;\n  };\n\n  // Helper function to validate and map user permissions to UI\n  const mapUserPermissionsToUI = (userPermissions: {[key: string]: string[]}) => {\n    const validPermissions: {[key: string]: string[]} = {};\n\n    // Ensure all permission modules exist and have valid operations\n    permissions.forEach(permission => {\n      const userOps = userPermissions[permission.id] || [];\n      const validOps = userOps.filter(op =>\n        crudOperations.some(crudOp => crudOp.id === op)\n      );\n\n      if (validOps.length > 0) {\n        validPermissions[permission.id] = validOps;\n      }\n    });\n\n    return validPermissions;\n  };\n\n  // Helper function to get permission summary for display\n  const getPermissionSummary = (perms: {[key: string]: string[]}) => {\n    const modules = Object.keys(perms).filter(key => perms[key].length > 0);\n    const totalOps = Object.values(perms).flat().length;\n    const editableModules = Object.values(perms).filter(ops => ops.includes('edit')).length;\n    const deletableModules = Object.values(perms).filter(ops => ops.includes('delete')).length;\n\n    return {\n      totalModules: modules.length,\n      totalOperations: totalOps,\n      editableModules,\n      deletableModules,\n      modulesList: modules\n    };\n  };\n\n  // Demo function to test mapping with detailed logging\n  const demoJSONMapping = (profileId: string) => {\n    const profile = permissionsData.userProfiles.find(p => p.id === profileId);\n    if (!profile) return;\n\n    console.group(`🎯 DEMO MAPPING: ${profile.name}`);\n    console.log('📄 Original JSON Data:', profile);\n    console.log('🔍 Permissions Object:', profile.permissions);\n\n    // Test mapping\n    const mapped = mapUserPermissionsToUI((profile as any).permissions);\n    console.log('✅ Mapped to UI:', mapped);\n\n    // Show mapping details for each module\n    Object.entries(profile.permissions).forEach(([moduleId, operations]) => {\n      const moduleName = permissions.find(p => p.id === moduleId)?.name || moduleId;\n      console.log(`📋 ${moduleName} (${moduleId}):`, {\n        original: operations ,\n        mapped: mapped[moduleId] || [],\n        uiDisplay: operations.map((op: string) => {\n          const crudOp = crudOperations.find(c => c.id === op);\n          return crudOp ? `${crudOp.name} (${op})` : op;\n        })\n      });\n    });\n\n    const summary = getPermissionSummary(mapped);\n    console.log('�� Summary:', summary);\n    console.groupEnd();\n\n    // Apply to UI\n    handleProfileChange(profileId);\n  };\n\n  // Mock table data for preview\n  const mockTableColumns = [\n    {\n      title: 'Tên',\n      dataIndex: 'name',\n      key: 'name',\n      render: () => <div className=\"w-24 h-3 bg-gray-200 rounded animate-pulse\"></div>\n    },\n    {\n      title: 'Trạng thái',\n      dataIndex: 'status',\n      key: 'status',\n      render: () => <div className=\"w-16 h-3 bg-gray-200 rounded animate-pulse\"></div>\n    },\n    {\n      title: 'Ngày tạo',\n      dataIndex: 'date',\n      key: 'date',\n      render: () => <div className=\"w-20 h-3 bg-gray-200 rounded animate-pulse\"></div>\n    },\n    {\n      title: 'Thao tác',\n      key: 'action',\n      render: () => {\n        const firstPermission = getSelectedPermissions()[0];\n        const ops = firstPermission ? selectedPermissions[firstPermission.id] || [] : [];\n        \n        return (\n          <Space>\n            {ops.includes('view') && (\n              <Button type=\"text\" size=\"small\" icon={<EyeOutlined />} />\n            )}\n            {ops.includes('edit') && (\n              <Button type=\"text\" size=\"small\" icon={<EditOutlined />} />\n            )}\n            {ops.includes('delete') && (\n              <Button type=\"text\" size=\"small\" danger icon={<DeleteOutlined />} />\n            )}\n          </Space>\n        );\n      }\n    }\n  ];\n\n  const mockTableData = [\n    { key: '1' },\n    { key: '2' },\n    { key: '3' }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50\">\n      {/* Header */}\n      <div className=\"bg-white shadow-sm border-b border-gray-100\">\n        <div className=\"max-w-7xl mx-auto px-6 py-8\">\n          <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center\">\n                <SafetyOutlined className=\"text-white text-xl\" />\n              </div>\n              <div>\n                <Title level={2} className=\"!mb-1\">Quản lý quyền truy cập</Title>\n                <Text type=\"secondary\">Cấu hình và xem trước quyền hạn người dùng</Text>\n              </div>\n            </div>\n            <div className=\"flex flex-col sm:flex-row items-start sm:items-center gap-3\">\n              <div className=\"flex items-center gap-2\">\n                <UserSwitchOutlined />\n                <Text strong>Chọn vai trò:</Text>\n                <Select\n                  style={{ width: 200 }}\n                  placeholder=\"Chọn vai trò sẵn có\"\n                  value={selectedProfile}\n                  onChange={handleProfileChange}\n                  allowClear\n                  onClear={handleCustomMode}\n                >\n                  {permissionsData.userProfiles.map(profile => (\n                    <Option key={profile.id} value={profile.id}>\n                      {profile.name}\n                    </Option>\n                  ))}\n                </Select>\n              </div>\n              <Badge\n                count={`${getTotalPermissionsCount()} quyền đã chọn`}\n                style={{ backgroundColor: '#1890ff' }}\n              />\n              <Button\n                type=\"primary\"\n                icon={<SaveOutlined />}\n                onClick={handleSavePermissions}\n                disabled={getTotalPermissionsCount() === 0}\n              >\n                Lưu quyền\n              </Button>\n              <Button\n                type={activeTab === \"preview\" ? \"primary\" : \"default\"}\n                icon={<EyeOutlined />}\n                onClick={() => setActiveTab(activeTab === \"preview\" ? \"permissions\" : \"preview\")}\n              >\n                {activeTab === \"preview\" ? \"Chỉnh sửa quyền\" : \"Xem trước\"}\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-7xl mx-auto px-6 py-8\">\n        <Tabs \n          activeKey={activeTab} \n          onChange={setActiveTab}\n          size=\"large\"\n          className=\"mb-8\"\n        >\n          <TabPane \n            tab={\n              <span>\n                <SafetyOutlined />\n                Cấu hình quyền\n              </span>\n            } \n            key=\"permissions\"\n          >\n            <Space direction=\"vertical\" size=\"large\" className=\"w-full\">\n              {/* Profile Information Alert */}\n              {selectedProfile && !isCustomMode && (\n                <Space direction=\"vertical\" size=\"middle\" className=\"w-full\">\n                  <Alert\n                    type=\"info\"\n                    showIcon\n                    message={\n                      <div>\n                        <Text strong>Đang sử dụng vai trò: {permissionsData.userProfiles.find(p => p.id === selectedProfile)?.name}</Text>\n                        <br />\n                        <Text type=\"secondary\">\n                          {permissionsData.userProfiles.find(p => p.id === selectedProfile)?.description}\n                        </Text>\n                      </div>\n                    }\n                    action={\n                      <Button size=\"small\" onClick={handleCustomMode}>\n                        Tùy chỉnh quyền\n                      </Button>\n                    }\n                  />\n\n                </Space>\n              )}\n\n              {isCustomMode && (\n                <Alert\n                  type=\"warning\"\n                  showIcon\n                  message={`Chế độ tùy chỉnh${selectedProfile ? ` (Dựa trên: ${permissionsData.userProfiles.find(p => p.id === selectedProfile)?.name})` : ''}`}\n                  description={\n                    selectedProfile ?\n                      \"Bạn đang tùy chỉnh quyền dựa trên vai trò đã chọn. Các thay đổi sẽ được lưu riêng biệt.\" :\n                      \"Bạn đang tùy chỉnh quyền thủ công. Chọn một vai trò ở trên để sử dụng cấu hình có sẵn làm cơ sở.\"\n                  }\n                  action={\n                    !selectedProfile ? (\n                      <Space wrap>\n                        <Button size=\"small\" type=\"primary\" onClick={() => demoJSONMapping('admin')}>\n                          Demo Admin\n                        </Button>\n                        <Button size=\"small\" onClick={() => demoJSONMapping('sale')}>\n                          Demo Sale\n                        </Button>\n                        <Button size=\"small\" onClick={() => demoJSONMapping('marketing')}>\n                          Demo Marketing\n                        </Button>\n                      </Space>\n                    ) : (\n                      <Button size=\"small\" onClick={() => setIsCustomMode(false)}>\n                        Về vai trò gốc\n                      </Button>\n                    )\n                  }\n                  className=\"mb-4\"\n                />\n              )}\n\n              <Card>\n                <Title level={4} className=\"!mb-2\">\n                  <SafetyOutlined className=\"text-blue-600 mr-2\" />\n                  Chọn quyền truy cập\n                </Title>\n                <Paragraph type=\"secondary\" className=\"!mb-6\">\n                  Chọn các quyền mà người dùng có thể truy cập trong hệ thống\n                </Paragraph>\n                \n                <Row gutter={[24, 24]}>\n                  {permissions.map((permission) => {\n                    const isSelected = selectedPermissions[permission.id]?.length > 0;\n                    const selectedOps = selectedPermissions[permission.id] || [];\n                    \n                    return (\n                      <Col xs={24} md={12} lg={8} key={permission.id}>\n                        <Card\n                          size=\"small\"\n                          className={`transition-all duration-200 ${\n                            !isCustomMode ? 'opacity-75' : 'cursor-pointer hover:shadow-lg'\n                          } ${\n                            isSelected\n                              ? 'border-blue-300 bg-blue-50 shadow-md'\n                              : 'border-gray-200 hover:border-blue-200 hover:shadow-md'\n                          }`}\n                          bodyStyle={{ padding: '20px' }}\n                        >\n                          <div className=\"flex items-start gap-3 mb-4\">\n                            <Checkbox\n                              checked={isSelected}\n                              disabled={!isCustomMode}\n                              onChange={(e) => handlePermissionChange(permission.id, e.target.checked)}\n                            />\n                            <div className=\"flex-1\">\n                              <div className=\"flex items-center gap-2 mb-2\">\n                                <div className={`p-2 rounded transition-colors ${\n                                  isSelected\n                                    ? \"bg-blue-100 text-blue-600\"\n                                    : \"bg-gray-100 text-gray-600\"\n                                }`}>\n                                  {permission.icon}\n                                </div>\n                                <Title level={5} className=\"!mb-0 !text-sm\">\n                                  {permission.name}\n                                </Title>\n                              </div>\n                              <Text type=\"secondary\" className=\"text-xs leading-relaxed\">\n                                {permission.description}\n                              </Text>\n                            </div>\n                          </div>\n\n                          {/* CRUD Operations */}\n                          {isSelected && (\n                            <div className=\"ml-7\">\n                              <div className=\"flex items-center gap-2 mb-3\">\n                                <SafetyOutlined className=\"text-blue-600 text-xs\" />\n                                <Text strong className=\"text-xs text-blue-900\">Quyền thao tác</Text>\n                              </div>\n                              <Row gutter={[8, 8]}>\n                                {crudOperations.map((operation) => (\n                                  <Col span={12} key={operation.id}>\n                                    <div className={`p-2 rounded-lg border transition-all cursor-pointer ${\n                                      selectedOps.includes(operation.id)\n                                        ? getOperationBgClass(operation.color)\n                                        : \"bg-gray-50 border-gray-200 hover:bg-gray-100\"\n                                    }`}>\n                                      <Checkbox\n                                        checked={selectedOps.includes(operation.id)}\n                                        disabled={!isCustomMode}\n                                        onChange={(e) =>\n                                          handleCrudChange(permission.id, operation.id, e.target.checked)\n                                        }\n                                        className=\"w-full\"\n                                      >\n                                        <div className=\"flex items-center gap-1\">\n                                          {operation.icon}\n                                          <Text className=\"text-xs font-medium\">{operation.name}</Text>\n                                        </div>\n                                      </Checkbox>\n                                    </div>\n                                  </Col>\n                                ))}\n                              </Row>\n                            </div>\n                          )}\n                        </Card>\n                      </Col>\n                    );\n                  })}\n                </Row>\n              </Card>\n\n              {/* Summary Card */}\n              <Card>\n                <Title level={4} className=\"!mb-4\">Tóm tắt quyền đã chọn</Title>\n                {getTotalPermissionsCount() > 0 ? (\n                  <Space direction=\"vertical\" size=\"large\" className=\"w-full\">\n                    {/* Statistics */}\n                    <Row gutter={16}>\n                      <Col span={6}>\n                        <Card size=\"small\" className=\"text-center bg-blue-50 border-blue-200\">\n                          <Text strong className=\"text-blue-600 text-lg\">{getTotalPermissionsCount()}</Text>\n                          <br />\n                          <Text type=\"secondary\" className=\"text-xs\">Mô-đun được cấp quyền</Text>\n                        </Card>\n                      </Col>\n                      <Col span={6}>\n                        <Card size=\"small\" className=\"text-center bg-green-50 border-green-200\">\n                          <Text strong className=\"text-green-600 text-lg\">\n                            {Object.values(selectedPermissions).flat().length}\n                          </Text>\n                          <br />\n                          <Text type=\"secondary\" className=\"text-xs\">Tổng số quyền thao tác</Text>\n                        </Card>\n                      </Col>\n                      <Col span={6}>\n                        <Card size=\"small\" className=\"text-center bg-orange-50 border-orange-200\">\n                          <Text strong className=\"text-orange-600 text-lg\">\n                            {Object.values(selectedPermissions).filter(ops => ops.includes('edit')).length}\n                          </Text>\n                          <br />\n                          <Text type=\"secondary\" className=\"text-xs\">Có quyền chỉnh sửa</Text>\n                        </Card>\n                      </Col>\n                      <Col span={6}>\n                        <Card size=\"small\" className=\"text-center bg-red-50 border-red-200\">\n                          <Text strong className=\"text-red-600 text-lg\">\n                            {Object.values(selectedPermissions).filter(ops => ops.includes('delete')).length}\n                          </Text>\n                          <br />\n                          <Text type=\"secondary\" className=\"text-xs\">Có quyền xóa</Text>\n                        </Card>\n                      </Col>\n                    </Row>\n\n                    <Divider />\n\n                    {/* Detailed Permissions */}\n                    {getSelectedPermissions().map((permission) => {\n                      const ops = selectedPermissions[permission.id] || [];\n                      return (\n                        <Card size=\"small\" key={permission.id} className=\"bg-gray-50\">\n                          <div className=\"flex items-center gap-2 mb-3\">\n                            {permission.icon}\n                            <Text strong>{permission.name}</Text>\n                            <Badge count={ops.length} size=\"small\" style={{ backgroundColor: '#52c41a' }} />\n                          </div>\n                          <Space wrap>\n                            {ops.map((opId) => {\n                              const operation = crudOperations.find(op => op.id === opId);\n                              return operation ? (\n                                <Tag\n                                  key={opId}\n                                  color={operation.color}\n                                  icon={operation.icon}\n                                >\n                                  {operation.name}\n                                </Tag>\n                              ) : null;\n                            })}\n                          </Space>\n                        </Card>\n                      );\n                    })}\n                  </Space>\n                ) : (\n                  <div className=\"text-center py-12\">\n                    <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                      <SafetyOutlined className=\"text-gray-400 text-2xl\" />\n                    </div>\n                    <Title level={4} type=\"secondary\">Chưa có quyền nào được chọn</Title>\n                    <Text type=\"secondary\">Hãy chọn một vai trò ở trên hoặc tùy chỉnh quyền thủ công</Text>\n                  </div>\n                )}\n              </Card>\n            </Space>\n          </TabPane>\n\n          <TabPane \n            tab={\n              <span>\n                <EyeOutlined />\n                Xem trước giao diện\n              </span>\n            } \n            key=\"preview\"\n          >\n            <Card>\n              <Title level={4} className=\"!mb-2\">\n                <EyeOutlined className=\"text-blue-600 mr-2\" />\n                Xem trước giao diện admin\n              </Title>\n              <Paragraph type=\"secondary\" className=\"!mb-6\">\n                Đây là giao diện mà người dùng sẽ thấy với các quyền đã được cấp\n              </Paragraph>\n\n              {getTotalPermissionsCount() === 0 ? (\n                <div className=\"text-center py-16\">\n                  <div className=\"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                    <SafetyOutlined className=\"text-gray-400 text-3xl\" />\n                  </div>\n                  <Title level={3} type=\"secondary\">Chưa có quyền nào ��ược chọn</Title>\n                  <Paragraph type=\"secondary\" className=\"mb-6\">\n                    Vui lòng chọn ít nhất một quyền để xem trước giao diện\n                  </Paragraph>\n                  <Button type=\"primary\" onClick={() => setActiveTab(\"permissions\")}>\n                    Chọn quyền\n                  </Button>\n                </div>\n              ) : (\n                <div className=\"space-y-6\">\n                  {/* Mock Admin Dashboard */}\n                  <Card className=\"bg-gray-50\">\n                    <div className=\"flex items-center justify-between mb-6\">\n                      <Title level={3} className=\"!mb-0\">Dashboard Admin</Title>\n                      <div className=\"flex items-center gap-2\">\n                        <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                        <Text type=\"secondary\">Hoạt động</Text>\n                      </div>\n                    </div>\n\n                    {/* Navigation Tabs */}\n                    <Tabs \n                      type=\"line\" \n                      className=\"mb-6\"\n                      items={getSelectedPermissions().map((permission, index) => {\n                        const ops = selectedPermissions[permission.id] || [];\n                        return {\n                          key: permission.id,\n                          label: (\n                            <span className=\"flex items-center gap-2\">\n                              {permission.icon}\n                              {permission.name}\n                              <Badge count={ops.length} size=\"small\" />\n                            </span>\n                          ),\n                          children: (\n                            <Card>\n                              <div className=\"flex items-center gap-3 mb-4\">\n                                {permission.icon}\n                                <Title level={4} className=\"!mb-0\">{permission.name}</Title>\n                              </div>\n                              <Paragraph type=\"secondary\" className=\"mb-6\">\n                                {permission.description}\n                              </Paragraph>\n\n                              {/* Available Operations */}\n                              <div className=\"mb-6\">\n                                <Title level={5} className=\"!mb-3\">Quyền thao tác được cấp</Title>\n                                <Space wrap>\n                                  {ops.map((opId) => {\n                                    const operation = crudOperations.find(op => op.id === opId);\n                                    return operation ? (\n                                      <Tag \n                                        key={opId}\n                                        color={operation.color}\n                                        icon={operation.icon}\n                                      >\n                                        {operation.name}\n                                      </Tag>\n                                    ) : null;\n                                  })}\n                                </Space>\n                              </div>\n                              \n                              {/* Mock Data Table */}\n                              <div className=\"space-y-4\">\n                                <div className=\"flex items-center justify-between\">\n                                  <Title level={5} className=\"!mb-0\">Dữ liệu mẫu</Title>\n                                  {ops.includes('create') && (\n                                    <Button type=\"primary\" size=\"small\" icon={<PlusOutlined />}>\n                                      Thêm mới\n                                    </Button>\n                                  )}\n                                </div>\n                                \n                                <Table \n                                  columns={mockTableColumns}\n                                  dataSource={mockTableData}\n                                  pagination={false}\n                                  size=\"small\"\n                                />\n                              </div>\n                            </Card>\n                          )\n                        };\n                      })}\n                    />\n\n                    <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                      <div className=\"flex items-start gap-3\">\n                        <div className=\"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0\">\n                          <EyeOutlined className=\"text-white text-xs\" />\n                        </div>\n                        <div>\n                          <Title level={5} className=\"!mb-1 !text-blue-900\">\n                            Lưu ý về xem trước\n                          </Title>\n                          <Text className=\"text-blue-700 text-sm\">\n                            Đây là bản xem trước mô phỏng. Trong thực tế, người dùng chỉ có thể truy cập các tab và chức năng tương ứng với quyền đã được cấp.\n                          </Text>\n                        </div>\n                      </div>\n                    </div>\n                  </Card>\n                </div>\n              )}\n            </Card>\n          </TabPane>\n        </Tabs>\n      </div>\n\n      {/* Save Modal */}\n      <Modal\n        title=\"Dữ liệu quyền đã lưu\"\n        open={saveModalVisible}\n        onCancel={() => setSaveModalVisible(false)}\n        footer={[\n          <Button key=\"copy\" onClick={() => {\n            navigator.clipboard.writeText(JSON.stringify(savedData, null, 2));\n            // message.success('Đã copy dữ liệu vào clipboard!');\n             toast.success(\"Đã copy dữ liệu vào clipboard!\", {\n                    position: toast.POSITION.TOP_RIGHT,\n                  });\n          }}>\n            Copy JSON\n          </Button>,\n          <Button key=\"close\" type=\"primary\" onClick={() => setSaveModalVisible(false)}>\n            Đóng\n          </Button>\n        ]}\n        width={1200}\n      >\n        {savedData && (\n          <div>\n            <Alert\n              type=\"success\"\n              message={`Đã lưu thành công cấu hình quyền${savedData.baseProfile ? ` cho vai trò \"${savedData.baseProfile.name}\"` : ' tùy chỉnh'}`}\n              description={\n                <div>\n                  <p><strong>Tổng số mô-đun:</strong> {savedData.summary.totalModules}</p>\n                  <p><strong>Tổng quyền thao tác:</strong> {savedData.summary.totalOperations}</p>\n                  <p><strong>Có thể chỉnh sửa:</strong> {savedData.summary.editableModules} mô-đun</p>\n                  <p><strong>Có thể xóa:</strong> {savedData.summary.deletableModules} mô-đun</p>\n                  <p><strong>Thời gian lưu:</strong> {new Date(savedData.timestamp).toLocaleString('vi-VN')}</p>\n                </div>\n              }\n              className=\"mb-4\"\n            />\n\n            {/* <Typography.Title level={5}>Dữ liệu JSON:</Typography.Title>\n            <div className=\"bg-gray-50 p-4 rounded-lg overflow-auto\" style={{maxHeight: '400px'}}>\n              <pre className=\"text-xs\">\n                {JSON.stringify(savedData, null, 2)}\n              </pre>\n            </div> */}\n          </div>\n        )}\n      </Modal>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { useEmployee } from \"./useEmployee\";\nimport { Avatar, Modal, Popconfirm, Skeleton, Table, Tooltip } from \"antd\";\nimport { useQueryClient } from \"react-query\";\nimport { EmployeeModel } from \"../../../models\";\nimport { ColumnsType } from \"antd/es/table\";\nimport ColorButton from \"../../../components/ColorButton\";\nimport { colors } from \"../../../styles/colors\";\nimport { FaEdit } from \"react-icons/fa\";\nimport { MdDeleteForever } from \"react-icons/md\";\nimport { QuestionCircleOutlined, SafetyOutlined } from \"@ant-design/icons\";\nimport { collection, deleteDoc, doc } from \"firebase/firestore\";\nimport { firestore } from \"../../../lib/firebase\";\nimport EditEmployee from \"../EditEmployee\";\nimport dayjs from \"dayjs\";\nimport EditPermissions from \"../EditEmployee/EditPermissions\";\nimport { useUser } from \"../../../store/useUser\";\nimport { canDelete, canEdit } from \"../../../utils\";\n\n// const defaultValues = {\n// \tname: '',\n// \tphone: '',\n// \temail: '',\n// \tpassword: '',\n// \taddress: '',\n// \tpermission: '',\n// \tavatar: 'https://firebasestorage.googleapis.com/v0/b/mardoll-studio.appspot.com/o/profile.png?alt=media&token=317fa84c-f068-47d4-aa48-4943fad74b2b',\n// };\nexport default function EmployeeList() {\n  const [opened, setOpened] = useState(false);\n  const [action, setAction] = useState<string>(\"edit\");\n  const [defaultValues, setDefaultValues] = useState<EmployeeModel>({\n    id: \"\",\n    name: \"\",\n    phone: \"\",\n    email: \"\",\n    password: \"\",\n    address: \"\",\n    permission: \"\",\n    username: \"\",\n    avatar:\n      \"https://firebasestorage.googleapis.com/v0/b/mardoll-studio.appspot.com/o/profile.png?alt=media&token=317fa84c-f068-47d4-aa48-4943fad74b2b\",\n    createAt: \"\",\n  });\n  const { data: employeeData, isLoading, refetchTeam } = useEmployee();\n  const queryClient = useQueryClient();\n  const { user } = useUser();\n  const role = user?.permission || \"\";\n  const userPermissions = user?.permissions || {};\n\n  const collectionRef = collection(firestore, \"employee\");\n\n  const handleDelete = (record: any) => async () => {\n    const docRef = doc(collectionRef, record?.id);\n    await deleteDoc(docRef);\n    queryClient.invalidateQueries(\"employee\");\n    setTimeout(async () => await refetchTeam(), 300);\n  };\n\n  const handleEditTeam =\n    (record: EmployeeModel, action: \"edit\" | \"permissions\") => () => {\n      setDefaultValues(record);\n      setAction(action);\n      console.log(\"record\", record);\n      setOpened(true);\n    };\n\n  const handleCancel = () => {\n    setOpened(false);\n    setDefaultValues(null as unknown as EmployeeModel);\n  };\n\n  const columns: ColumnsType<EmployeeModel> = [\n    {\n      title: \"Tên\",\n      dataIndex: \"name\",\n      key: \"name\",\n      width: \"20%\",\n      fixed: \"left\",\n      sorter: (a, b) => a.name.localeCompare(b.name),\n      sortDirections: [\"descend\", \"ascend\"],\n    },\n    {\n      title: \"Avatar\",\n      dataIndex: \"avatar\",\n      key: \"avatar\",\n      width: \"10%\",\n      render: (text, record) => {\n        return <Avatar src={text} />;\n      },\n    },\n    {\n      title: \"Email\",\n      dataIndex: \"email\",\n      key: \"email\",\n      width: \"10%\",\n      sorter: (a, b) => a.email.localeCompare(b.email),\n      sortDirections: [\"descend\", \"ascend\"],\n    },\n    {\n      title: \"Password\",\n      dataIndex: \"password\",\n      key: \"password\",\n      width: \"10%\",\n      sorter: (a, b) => a.password.localeCompare(b.password),\n      sortDirections: [\"descend\", \"ascend\"],\n      render: (text) => {\n        const numAsterisks = 0;\n\n        // Replace characters with asterisks\n        const maskedText =\n          text.length > numAsterisks\n            ? text.slice(0, numAsterisks) +\n              \"•\".repeat(text.length - numAsterisks)\n            : text;\n\n        return (\n          <Tooltip title={text}>\n            <p>{maskedText}</p>\n          </Tooltip>\n        );\n      },\n    },\n    {\n      title: \"Phone\",\n      dataIndex: \"phone\",\n      key: \"phone\",\n      sorter: (a, b) => a.phone.localeCompare(b.phone),\n      sortDirections: [\"descend\", \"ascend\"],\n      width: \"10%\",\n    },\n    {\n      title: \"Address\",\n      dataIndex: \"address\",\n      key: \"address\",\n      sorter: (a, b) => a.address.localeCompare(b.address),\n      sortDirections: [\"descend\", \"ascend\"],\n      width: \"20%\",\n    },\n    {\n      title: \"Quyền\",\n      dataIndex: \"permission\",\n      key: \"permission\",\n      sorter: (a, b) => a.permission.localeCompare(b.permission),\n      sortDirections: [\"descend\", \"ascend\"],\n    },\n    // {\n    // \ttitle: 'Ngày tạo',\n    // \tdataIndex: 'createAt',\n    // \tkey: 'createAt',\n    // \trender: (text) => {\n    // \t\treturn dayjs(text).format('DD/MM/YYYY')\n    // \t}\n    // },\n    {\n      title: \"Chỉnh sửa\",\n      dataIndex: \"\",\n      key: \"x\",\n      render: (text, record) => (\n        <div className=\"flex items-center gap-2\">\n          {canEdit(userPermissions, 'employees') && (\n          <Tooltip title=\"Chỉnh sửa\">\n            <ColorButton\n              override={colors.primary}\n              type=\"primary\"\n              size=\"small\"\n              disabled={record?.permission === 'admin' && role !== 'admin'}\n              icon={<FaEdit />}\n              onClick={handleEditTeam(record, \"edit\")}\n            />\n          </Tooltip>\n          )}\n          {role === \"admin\" && (\n            <Tooltip title=\"Chỉnh sửa quyền\">\n              <ColorButton\n                override={colors.listItemTapColor}\n                type=\"primary\"\n                size=\"small\"\n                \n                icon={<SafetyOutlined />}\n                onClick={handleEditTeam(record, \"permissions\")}\n              />\n            </Tooltip>\n          )}\n          {canDelete(userPermissions, 'employees') && (\n             <Tooltip title=\"Xoá\">\n            <Popconfirm\n              title=\"Xóa nhân viên\"\n              description=\"Bạn có chắc là muốn xóa nhân viên?\"\n              icon={<QuestionCircleOutlined style={{ color: colors.red2 }} />}\n              onConfirm={handleDelete(record)}\n            >\n              <ColorButton\n                override={colors.red2}\n                type=\"primary\"\n                size=\"small\"\n                disabled={record?.permission === 'admin' && role !== 'admin'}\n                icon={<MdDeleteForever />}\n              />\n            </Popconfirm>\n          </Tooltip>\n          )}\n        </div>\n      ),\n    },\n  ];\n\n  if (isLoading) {\n    return (\n      <div className=\"m-2 p-2 md:p-10 bg-white rounded-3xl\">\n        <Skeleton active />\n        <Skeleton active />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"m-2 p-2 md:p-10 bg-white rounded-3xl\">\n      <Table\n        rowKey={(record) => record.id}\n        columns={columns}\n        dataSource={employeeData}\n        bordered\n        scroll={{ x: 800 }}\n      />\n      <Modal\n        title={`${\n          action === \"edit\" ? \"Cập nhật nhân viên\" : \"Cập nhật quyề truy cập\"\n        } `}\n        open={opened}\n        footer={null}\n        onCancel={handleCancel}\n        width={1500}\n        bodyStyle={{ overflowY: \"scroll\", height: \"calc(100vh - 250px)\" }}\n      >\n        {action === \"edit\" ? (\n          <EditEmployee\n            defaultValues={defaultValues}\n            handleCancel={handleCancel}\n            refetch={refetchTeam}\n          />\n        ) : (\n          <EditPermissions\n            data={defaultValues}\n            handleCancel={handleCancel}\n            refetch={refetchTeam}\n          />\n        )}\n      </Modal>\n    </div>\n  );\n}\n","import { firestore } from '../../../lib/firebase';\nimport { useFirestoreQuery } from '@react-query-firebase/firestore';\nimport { query, collection } from 'firebase/firestore';\nimport { EmployeeModel } from '../../../models';\nimport { useUser } from '../../../store/useUser'; // hook lấy userRole\n\nexport function useEmployee() {\n  const { user } = useUser(); // lấy role hiện tại của user\n  const userRole = user?.permission || null;\n\n  const ref = query(collection(firestore, 'employee'));\n  const queryEmployee = useFirestoreQuery(['employee'], ref);\n\n  const snapshot = queryEmployee.data;\n  let data: any[] = [];\n\n  snapshot?.forEach((docSnapshot) => {\n    data.push({ id: docSnapshot.id, ...docSnapshot.data() });\n  });\n\n  // Lọc dữ liệu theo role\n  if (userRole !== 'admin') {\n    data = data.filter(emp => emp.permission !== 'admin');\n  }\n\n  const refetchTeam = async () => {\n    try {\n      await queryEmployee.refetch();\n    } catch (error) {\n      console.error('Error refetching team data:', error);\n    }\n  };\n\n  return {\n    isError: queryEmployee.isError,\n    isLoading: queryEmployee.isLoading,\n    data: data as EmployeeModel[],\n    refetchTeam\n  };\n}\n","import { MenuProps } from \"antd\";\r\nimport { chain, isEmpty, isNil } from \"lodash\";\r\n\r\nexport type StatusColorType =\r\n  | \"pending\"\r\n  | \"active\"\r\n  | \"complete\"\r\n  | \"rejected\"\r\n  | \"canceled\";\r\n\r\nexport type StatusOnlineType = \"online\" | \"offline\";\r\n\r\nconst getStatusColor = (color: StatusColorType = \"pending\") => {\r\n  const defaultColor = {\r\n    pending: \"orange\",\r\n    active: \"cyan\",\r\n    complete: \"green\",\r\n    rejected: \"red\",\r\n    canceled: \"red\",\r\n  };\r\n  return defaultColor[color];\r\n};\r\n\r\nconst getStatusOnline = (color: StatusOnlineType = \"offline\") => {\r\n  const defaultColor = {\r\n    offline: \"gray\",\r\n    online: \"green\",\r\n  };\r\n  return defaultColor[color];\r\n};\r\n\r\nfunction generateSlugUrl(str: string) {\r\n  // Remove diacritics\r\n  str = str\r\n    ?.normalize(\"NFD\")\r\n    .replace(/[\\u0300-\\u036f]/g, \"\")\r\n    ?.replace(\"đ\", \"d\");\r\n  // Replace spaces with hyphens and convert to lowercase\r\n  str = str?.replace(/\\s+/g, \"-\").toLowerCase();\r\n  return str;\r\n}\r\n\r\nconst regexPassword =\r\n  /^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/;\r\n\r\nconst isVietnamesePhoneNumber = (number: string) => {\r\n  return /((^(\\+84|84|0|0084){1})(3|5|7|8|9))+([0-9]{8})$/.test(number);\r\n};\r\n\r\nconst formatCurrency = (number: string) => {\r\n  if (isNil(number) || isEmpty(number)) return \"--\";\r\n  return parseInt(number).toLocaleString(\"vi-VN\", {\r\n    style: \"currency\",\r\n    currency: \"VND\",\r\n  });\r\n};\r\n\r\nconst formatNumber = (num: number) => {\r\n  if (num === 0) return `${num.toString()}`;\r\n  if (num >= 1000000000) {\r\n    return `${(num / 1000000000).toFixed(0)} tỷ`;\r\n  } else if (num >= 1000000) {\r\n    return `${(num / 1000000).toFixed(0)} tr`;\r\n  } else {\r\n    return `${(num / 1000).toFixed(0)} k`;\r\n  }\r\n};\r\n\r\nexport {\r\n  isVietnamesePhoneNumber,\r\n  formatCurrency,\r\n  getStatusColor,\r\n  getStatusOnline,\r\n  regexPassword,\r\n  formatNumber,\r\n  generateSlugUrl,\r\n};\r\n\r\ntype PermissionKey =\r\n  | \"ecommerce\"\r\n  | \"employees\"\r\n  | \"contracts\"\r\n  | \"wedding-dresses\"\r\n  | \"member-management\"\r\n  | \"pricing\"\r\n  | \"page-management\"\r\n  | \"customer-contact\"\r\n  | \"booking-schedule\"\r\n  | \"machine-schedule\";\r\n\r\ntype MenuItem = Required<MenuProps>[\"items\"][number];\r\n\r\nexport const canView = (\r\n  permissions: Partial<Record<PermissionKey, string[]>>,\r\n  key: PermissionKey\r\n) => {\r\n  return permissions?.[key]?.includes(\"view\");\r\n};\r\n\r\nexport const canCreate = (\r\n  permissions: Partial<Record<PermissionKey, string[]>>,\r\n  key: PermissionKey\r\n) => {\r\n  return permissions?.[key]?.includes(\"create\");\r\n};\r\n\r\nexport const canEdit = (\r\n  permissions: Partial<Record<PermissionKey, string[]>>,\r\n  key: PermissionKey\r\n) => {\r\n  return permissions?.[key]?.includes(\"edit\");\r\n};\r\n\r\nexport const canDelete = (\r\n  permissions: Partial<Record<PermissionKey, string[]>>,\r\n  key: PermissionKey\r\n) => {\r\n  return permissions?.[key]?.includes(\"delete\");\r\n};\r\n\r\n// Helper để tránh false/null trong mảng\r\nexport const canViewItem = (\r\n  key: PermissionKey,\r\n  item: MenuItem,\r\n  permissions: Partial<Record<PermissionKey, string[]>>\r\n): MenuItem | null => (canView(permissions, key) ? item : null);\r\n\r\nexport const last3Digits = (phone: string) =>\r\n  chain(phone)\r\n    .replace(/\\D/g, \"\") // bỏ mọi ký tự không phải số\r\n    .toArray() // chuyển thành mảng ký tự\r\n    .takeRight(3) // lấy 3 ký tự cuối\r\n    .join(\"\") // ghép lại thành string\r\n    .value();\r\n\r\nexport const lastWord = (s: string) =>\r\n  chain(s)\r\n    .trim() // bỏ khoảng trắng đầu/cuối\r\n    .split(/\\s+/) // tách theo 1+ khoảng trắng\r\n    .last() // lấy phần tử cuối\r\n    .defaultTo(\"\") // phòng chuỗi rỗng\r\n    .value();\r\n"],"names":["useToken","theme","_ref","children","override","restProps","_objectWithoutProperties","_excluded","token","overrideColor","modifiedTheme","_objectSpread","colorPrimary","colorPrimaryHover","colorPrimaryBorderHover","colorPrimaryTextHover","_jsx","ConfigProvider","Button","FormItem","_errors$name$message","_errors$name","control","name","help","_ref$hasFeedback","hasFeedback","props","_useController","useController","field","fieldState","errors","formState","AntdForm","Item","normalize","value","onChange","validateStatus","invalid","undefined","message","Dragger","Upload","schema","yup","required","permission","phone","test","str","context","isVietnamesePhoneNumber","email","password","min","max","matches","regexPassword","address","avatar","length","EditEmployee","defaultValues","handleCancel","refetch","formRef","useRef","_FormAntDeisgn$useFor","FormAntDeisgn","useForm","form","_slicedToArray","_message$useMessage","useMessage","_message$useMessage2","messageApi","contextHolder","_useState","useState","_useState2","loading","setLoading","employeeRef","collection","firestore","queryClient","useQueryClient","_useState3","uid","uuidv4","status","url","_useState4","fileList","setFileList","user","useUser","userRole","_useForm","resolver","yupResolver","handleSubmit","reset","setValue","getValues","useEffect","setFieldsValue","handleUpload","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","info","wrap","_context","prev","next","file","id","success","concat","error","stop","_x","apply","arguments","customRequest","_ref4","_callee2","_ref3","onSuccess","onError","reader","_context2","FileReader","readAsDataURL","onload","e","originalImage","Image","src","target","result","newWidth","newHeight","aspectRatio","width","height","canvas","document","createElement","ctx","getContext","drawImage","toBlob","blob","resizedFile","File","type","storageRef","ref","storage","uploadTask","uploadBytesResumable","on","snapshot","Math","round","bytesTransferred","totalBytes","err","console","log","getDownloadURL","then","_x2","multiple","listType","_ref5","newFileList","matchingUrls","reduce","image","some","_image$id","includes","push","onDrop","dataTransfer","files","_jsxs","_Fragment","layout","initialValues","onFinish","_ref6","_callee5","data","_keyBy","_keyBy$data$permissio","_fileList$2","_formRef$current2","_fileList$","_formRef$current","accountQuery","_docRef","_payload","docRef","payload","_context5","query","where","limit","getDocs","sent","empty","open","content","duration","abrupt","doc","updateDoc","invalidateQueries","setTimeout","_callee3","_context3","resetFields","current","permissions","keyBy","permissionsData","_callee4","_context4","_x3","label","Input","placeholder","Password","iconRender","visible","EyeTwoTone","EyeInvisibleOutlined","className","Select","Option","InboxOutlined","disabled","isEmpty","htmlType","block","size","Title","Typography","Text","Paragraph","TabPane","Tabs","crudOperations","icon","EyeOutlined","color","PlusOutlined","EditOutlined","DeleteOutlined","ShoppingCartOutlined","description","UserOutlined","FileTextOutlined","HomeOutlined","TeamOutlined","DollarOutlined","SettingOutlined","PhoneOutlined","CalendarOutlined","ClockCircleOutlined","getOperationBgClass","EditPermissions","_permissionsData$user","_permissionsData$user2","_permissionsData$user3","selectedPermissions","setSelectedPermissions","activeTab","setActiveTab","_useState5","_useState6","selectedProfile","setSelectedProfile","_useState7","_useState8","isCustomMode","setIsCustomMode","_useState9","_useState10","saveModalVisible","setSaveModalVisible","_useState11","_useState12","savedData","setSavedData","_data$permissions","profile","find","p","mapProfile","mappedPermissions","mapUserPermissionsToUI","getPermissionSummary","handleProfileChange","profileId","handleCustomMode","handleSavePermissions","_result$baseProfile","currentProfile","baseProfile","isCustomized","summary","totalModules","getTotalPermissionsCount","totalOperations","Object","values","flat","editableModules","filter","ops","deletableModules","timestamp","Date","toISOString","toast","position","POSITION","TOP_RIGHT","getSelectedPermissions","_selectedPermissions$","keys","key","userPermissions","validPermissions","forEach","validOps","op","crudOp","perms","modules","totalOps","modulesList","demoJSONMapping","group","mapped","entries","_permissions$find","moduleId","operations","moduleName","original","uiDisplay","map","c","groupEnd","mockTableColumns","title","dataIndex","render","firstPermission","Space","danger","mockTableData","SafetyOutlined","level","UserSwitchOutlined","strong","style","allowClear","onClear","Badge","count","backgroundColor","SaveOutlined","onClick","activeKey","tab","direction","Alert","showIcon","action","Card","Row","gutter","_selectedPermissions$2","isSelected","selectedOps","Col","xs","md","lg","bodyStyle","padding","Checkbox","checked","permissionId","_defineProperty","newState","operation","span","currentOps","_toConsumableArray","handleCrudChange","Divider","opId","Tag","items","index","Table","columns","dataSource","pagination","Modal","onCancel","footer","navigator","clipboard","writeText","JSON","stringify","toLocaleString","EmployeeList","opened","setOpened","setAction","username","createAt","setDefaultValues","_useEmployee","useEmployee","employeeData","isLoading","refetchTeam","role","collectionRef","handleDelete","record","deleteDoc","handleEditTeam","fixed","sorter","a","b","localeCompare","sortDirections","text","Avatar","maskedText","slice","repeat","Tooltip","canEdit","ColorButton","colors","primary","FaEdit","listItemTapColor","canDelete","Popconfirm","QuestionCircleOutlined","red2","onConfirm","MdDeleteForever","Skeleton","active","rowKey","bordered","scroll","x","overflowY","queryEmployee","useFirestoreQuery","docSnapshot","emp","t0","isError","getStatusColor","pending","complete","rejected","canceled","getStatusOnline","offline","online","generateSlugUrl","_str","_str$normalize$replac","_str2","replace","toLowerCase","number","formatCurrency","isNil","parseInt","currency","formatNumber","num","toString","toFixed","canCreate","_permissions$key2","_permissions$key3","_permissions$key4","canViewItem","item","_permissions$key","canView","last3Digits","chain","toArray","takeRight","join","lastWord","s","trim","split","last","defaultTo"],"sourceRoot":""}