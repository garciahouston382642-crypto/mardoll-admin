{"version":3,"file":"static/js/2238.85f6258b.chunk.js","mappings":"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","sources":["components/Form/index.tsx","pages/PriceWedding/CreatePriceWedding/PriceWeddingEdit/index.tsx","pages/PriceWedding/CreatePriceWedding/PriceWeddingForm.tsx","pages/PriceWedding/CreatePriceWedding/index.tsx","pages/PriceWedding/usePriceWedding.ts","../node_modules/@ant-design/icons-svg/es/asn/InboxOutlined.js","../node_modules/@ant-design/icons/es/icons/InboxOutlined.js"],"sourcesContent":["import React from 'react';\nimport { Form as AntdForm } from 'antd';\nimport type { Control, FieldPath, FieldValues } from 'react-hook-form';\nimport { useController } from 'react-hook-form';\nimport _ from 'lodash'\n\ntype AntdFormItemProps = React.ComponentProps<typeof AntdForm.Item>;\n\nexport type FormItemProps<TFieldValues extends FieldValues = FieldValues> = {\n    children: React.ReactNode;\n    control?: Control<TFieldValues>;\n    name: FieldPath<TFieldValues>;\n} & Omit<AntdFormItemProps, 'name' | 'normalize' | 'rules' | 'validateStatus'>;\n\n// TODO: Support `onBlur` `ref`\n// FIXME: `Touched` does not change in devtool\nexport const FormItem = <TFieldValues extends FieldValues = FieldValues>({\n    children,\n    control,\n    name,\n    help,\n    hasFeedback = false,\n    ...props\n}: FormItemProps<TFieldValues>) => {\n    const { field, fieldState, formState: { errors } } = useController({ name, control });\n    const handleNormalize: AntdFormItemProps['normalize'] = (value) => {\n        field.onChange(value);\n        return value;\n    };\n    return (\n        <AntdForm.Item\n            hasFeedback={hasFeedback}\n            name={name as string}\n            // initialValue={field.value}\n            normalize={handleNormalize}\n            validateStatus={fieldState.invalid ? 'error' : undefined}\n            help={(errors[name]?.message ?? help) as string}\n            {...props}\n        >\n            {children}\n        </AntdForm.Item>\n    );\n};","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { InboxOutlined, UploadOutlined } from \"@ant-design/icons\";\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport {\r\n  Button,\r\n  Form as FormAntDeisgn,\r\n  Input,\r\n  Upload,\r\n  UploadProps,\r\n  message,\r\n} from \"antd\";\r\nimport type { FormInstance } from \"antd/es/form\";\r\nimport Dragger from \"antd/es/upload/Dragger\";\r\nimport { collection, doc, updateDoc } from \"firebase/firestore\";\r\nimport { getDownloadURL, ref, uploadBytesResumable } from \"firebase/storage\";\r\nimport { assign, find, isEmpty, map } from \"lodash\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useQueryClient } from \"react-query\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport * as yup from \"yup\";\r\nimport { FormItem } from \"../../../../components/Form\";\r\nimport { storage } from \"../../../../lib/firebase\";\r\n// import { FormItem } from \"../../../../../components/Form\";\r\n// import { firestore, storage } from \"../../../../../lib/firebase\";\r\n\r\nconst schema = yup\r\n  .object({\r\n    title: yup.string().required(\"Vui lòng nhập tiêu đề dịch vụ!\"),\r\n    description: yup.string().required(\"Vui lòng nhập nội dung dịch vụ!\"),\r\n    url: yup\r\n      .mixed()\r\n      .required(\"Vui lòng upload file hình ảnh\")\r\n      .test(\"fileEmpty\", \"Vui lòng upload file hình ảnh\", (value: any) => {\r\n        if (value?.length === 0) return false;\r\n\r\n        return true;\r\n      }),\r\n  })\r\n  .required();\r\n\r\nexport default function PriceWeddingEdit({\r\n  data,\r\n  file,\r\n  handleCancel,\r\n  handleUpdateItem,\r\n}: // refetch,\r\n{\r\n  data: any;\r\n  file: any;\r\n  handleCancel: () => void;\r\n  handleUpdateItem: (nextValue: any[]) => void;\r\n  // refetch: () => void;\r\n}) {\r\n  const priceWeddingItem = find(data, { id: file?.id }) || {};\r\n\r\n  const defaultUrlItem = {\r\n    id: uuidv4(),\r\n    uid: uuidv4(),\r\n    status: \"done\",\r\n    url: priceWeddingItem?.url || \"\",\r\n    name: priceWeddingItem?.name || \"\",\r\n    alt: priceWeddingItem?.alt || \"\",\r\n  };\r\n  const formRef = useRef<FormInstance>(null);\r\n  const [form] = FormAntDeisgn.useForm();\r\n  const [messageApi, contextHolder] = message.useMessage();\r\n  const [loading, setLoading] = useState(false);\r\n  const [fileListUrl, setFileListUrl] = useState<any[]>([defaultUrlItem]);\r\n  // const homePageRef = collection(firestore, \"homePage\");\r\n  //   const mutation = useFirestoreCollectionMutation(homePageRef);\r\n  // const queryClient = useQueryClient();\r\n\r\n  const defaultValues = {\r\n    title: priceWeddingItem?.title || \"\",\r\n    description: priceWeddingItem?.description || \"\",\r\n    url: [defaultUrlItem],\r\n  };\r\n\r\n  const {\r\n    control,\r\n    handleSubmit,\r\n    formState: { errors },\r\n    reset,\r\n    setValue,\r\n  } = useForm<any>({\r\n    defaultValues: defaultValues,\r\n    resolver: yupResolver(schema),\r\n  });\r\n\r\n  useEffect(() => {\r\n    form.setFieldsValue({\r\n      title: priceWeddingItem?.title || \"\",\r\n      description: priceWeddingItem?.description || \"\",\r\n      url: [defaultUrlItem],\r\n    });\r\n    setValue(\"title\", priceWeddingItem?.title || \"\");\r\n    setValue(\"description\", priceWeddingItem?.description || \"\");\r\n    setFileListUrl([defaultUrlItem] || []);\r\n  }, [priceWeddingItem, form]);\r\n\r\n  const handleUploadUrl = async (info: any) => {\r\n    if (info.file.status === \"done\") {\r\n      setFileListUrl([\r\n        {\r\n          id: uuidv4(),\r\n          url: info.file.url,\r\n          name: info.file.name,\r\n          alt: info.file.name.substr(0, info.file.name.lastIndexOf(\".\")),\r\n        },\r\n      ]);\r\n      setValue(\"url\", [\r\n        {\r\n          id: uuidv4(),\r\n          url: info.file.url,\r\n          name: info.file.name,\r\n          alt: info.file.name.substr(0, info.file.name.lastIndexOf(\".\")),\r\n        },\r\n      ]);\r\n      message.success(`${info.file.name} file uploaded successfully`);\r\n    } else if (info.file.status === \"error\") {\r\n      message.error(`${info.file.name} file upload failed.`);\r\n    }\r\n  };\r\n\r\n  const customRequestUrl = async ({ file, onSuccess, onError }: any) => {\r\n    try {\r\n      // const storageRef = ref(storage, `/manager-page/${file.name}`);\r\n\r\n      // const uploadTask = uploadBytesResumable(storageRef, file);\r\n\r\n      // uploadTask.on(\r\n      //   \"state_changed\",\r\n      //   (snapshot) => {\r\n      //     const percent = Math.round(\r\n      //       (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n      //     );\r\n\r\n      //     // update progress\r\n      //     // setPercent(percent);\r\n      //   },\r\n      //   (err) => console.log(err),\r\n      //   () => {\r\n      //     // download url\r\n      //     getDownloadURL(uploadTask.snapshot.ref).then((url) => {\r\n      //       onSuccess();\r\n      //       handleUploadUrl({\r\n      //         file: {\r\n      //           status: \"done\",\r\n      //           name: file.name,\r\n      //           url,\r\n      //         },\r\n      //       });\r\n      //     });\r\n      //   }\r\n      // );\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = (e: any) => {\r\n        const originalImage = new Image() as any;\r\n        originalImage.src = e.target.result;\r\n\r\n        originalImage.onload = () => {\r\n          // Define your desired dimensions\r\n          const maxWidth = 800;\r\n          const maxHeight = 800;\r\n\r\n          // Calculate the new dimensions while preserving the aspect ratio\r\n          const aspectRatio = originalImage.width / originalImage.height;\r\n          let newWidth, newHeight;\r\n          if (\r\n            originalImage.width > maxWidth ||\r\n            originalImage.height > maxHeight\r\n          ) {\r\n            if (aspectRatio > 1) {\r\n              newWidth = maxWidth;\r\n              newHeight = maxWidth / aspectRatio;\r\n            } else {\r\n              newWidth = maxHeight * aspectRatio;\r\n              newHeight = maxHeight;\r\n            }\r\n          } else {\r\n            newWidth = originalImage.width;\r\n            newHeight = originalImage.height;\r\n          }\r\n\r\n          // Create a canvas element to draw the resized image\r\n          const canvas = document.createElement(\"canvas\");\r\n          const ctx = canvas.getContext(\"2d\") as any;\r\n          canvas.width = newWidth;\r\n          canvas.height = newHeight;\r\n\r\n          // Draw the resized image on the canvas\r\n          ctx.drawImage(originalImage, 0, 0, newWidth, newHeight);\r\n\r\n          // Convert the canvas to a Blob (image file)\r\n          canvas.toBlob((blob: any) => {\r\n            // Create a new File object from the Blob\r\n            const resizedFile = new File([blob], file.name, {\r\n              type: file.type,\r\n            });\r\n            const storageRef = ref(\r\n              storage,\r\n              `/manager-page/${resizedFile.name}`\r\n            );\r\n            const uploadTask = uploadBytesResumable(storageRef, resizedFile);\r\n\r\n            uploadTask.on(\r\n              \"state_changed\",\r\n              (snapshot) => {\r\n                const percent = Math.round(\r\n                  (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n                );\r\n\r\n                // update progress\r\n                // setPercent(percent);\r\n              },\r\n              (err) => console.log(err),\r\n              () => {\r\n                // download url\r\n                getDownloadURL(uploadTask.snapshot.ref).then((url) => {\r\n                  onSuccess();\r\n                  handleUploadUrl({\r\n                    file: {\r\n                      status: \"done\",\r\n                      name: resizedFile.name,\r\n                      url,\r\n                    },\r\n                  });\r\n                });\r\n              }\r\n            );\r\n          }, file.type);\r\n        };\r\n      };\r\n    } catch (error) {\r\n      console.error(\"Error uploading file:\", error);\r\n      onError();\r\n    }\r\n  };\r\n  const handleChangeUrl: UploadProps[\"onChange\"] = ({\r\n    fileList: newFileList,\r\n  }) => {\r\n    if (newFileList.length > 0) {\r\n      const matchingUrls = fileListUrl?.reduce((result: any, image: any) => {\r\n        if (newFileList.some((file: any) => image?.id?.includes(file?.id))) {\r\n          result.push(image);\r\n        }\r\n        return result;\r\n      }, []);\r\n      setFileListUrl(matchingUrls);\r\n      setValue(\"serviceUrl\", matchingUrls);\r\n    }\r\n  };\r\n\r\n  const urlProps: UploadProps = {\r\n    name: \"file\",\r\n    multiple: false,\r\n    listType: \"picture\",\r\n    // beforeUpload,\r\n    customRequest: customRequestUrl,\r\n    onChange: handleChangeUrl,\r\n    fileList: fileListUrl,\r\n    onDrop(e) {\r\n      console.log(\"Dropped files\", e.dataTransfer.files);\r\n    },\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {contextHolder}\r\n      <FormAntDeisgn\r\n        form={form}\r\n        name=\"control-edit-create-wedding-ref\"\r\n        ref={formRef}\r\n        layout=\"vertical\"\r\n        initialValues={defaultValues}\r\n        onFinish={handleSubmit(async (values: any) => {\r\n          // console.log('values', values)\r\n          const newPriceWedding = map(data, (item) => {\r\n            if (item.id === file.id) {\r\n              return assign({}, item, {\r\n                name: fileListUrl?.[0]?.name || fileListUrl?.[0]?.url,\r\n                alt: fileListUrl?.[0]?.alt || \"\",\r\n                url: fileListUrl?.[0]?.url || \"\",\r\n                title: values.title,\r\n                description: values.description,\r\n              });\r\n            }\r\n            return item;\r\n          });\r\n          handleUpdateItem?.(newPriceWedding);\r\n          // console.log('newPriceWedding', newPriceWedding)\r\n\r\n          // const payload = {\r\n          //   ...data,\r\n          //   services: newServiceItem,\r\n          // };\r\n          // const docRef = doc(homePageRef, data.id);\r\n          // await updateDoc(docRef, payload);\r\n          // queryClient.invalidateQueries(\"homePage\");\r\n          // setTimeout(async () => await refetch(), 300);\r\n          setLoading(true);\r\n          messageApi.open({\r\n            type: \"success\",\r\n            content: \"Cập nhập thành công!\",\r\n            duration: 5,\r\n          });\r\n          setLoading(false);\r\n          form.resetFields();\r\n          formRef.current?.resetFields();\r\n          reset();\r\n          handleCancel?.();\r\n        })}\r\n      >\r\n        <FormItem\r\n          control={control}\r\n          name=\"url\"\r\n          // valuePropName='fileList'\r\n          label=\"Upload hình ảnh dịch vụ\"\r\n        >\r\n          <Upload {...urlProps}>\r\n            <Button icon={<UploadOutlined />}>Upload</Button>\r\n          </Upload>\r\n        </FormItem>\r\n        <FormItem control={control} name=\"title\" label=\"Tên dịch vụ\">\r\n          <Input allowClear placeholder=\"Nhập tiêu đề dịch vụ\" />\r\n        </FormItem>\r\n        <FormItem control={control} name=\"description\" label=\"Nội dung dịch vụ\">\r\n          <Input allowClear placeholder=\"Nhập nội dung dịch vụ\" />\r\n        </FormItem>\r\n\r\n        <Button\r\n          loading={loading}\r\n          disabled={!isEmpty(errors)}\r\n          type=\"primary\"\r\n          htmlType=\"submit\"\r\n          block\r\n          size=\"large\"\r\n        >\r\n          Cập nhật\r\n        </Button>\r\n      </FormAntDeisgn>\r\n    </>\r\n  );\r\n}\r\n","import React, { useRef, useState } from \"react\";\r\nimport {\r\n  Button,\r\n  Form as FormAntDeisgn,\r\n  Input,\r\n  message,\r\n  Select,\r\n  Upload,\r\n  InputNumber,\r\n  Switch,\r\n  Space,\r\n  Typography,\r\n  Modal,\r\n} from \"antd\";\r\nimport type { FormInstance } from \"antd/es/form\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport * as yup from \"yup\";\r\nimport type { UploadFile, UploadProps } from \"antd\";\r\nimport {\r\n  InboxOutlined,\r\n  EyeInvisibleOutlined,\r\n  EyeTwoTone,\r\n} from \"@ant-design/icons\";\r\nimport { isEmpty } from \"lodash\";\r\nimport { FormItem } from \"../../../components/Form\";\r\nimport { RcFile } from \"antd/es/upload\";\r\nimport { firestore, storage } from \"../../../lib/firebase\";\r\nimport { ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\r\nimport { collection, updateDoc } from \"firebase/firestore\";\r\nimport { useFirestoreCollectionMutation } from \"@react-query-firebase/firestore\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { isVietnamesePhoneNumber, regexPassword } from \"../../../utils\";\r\nimport PriceWeddingEdit from \"./PriceWeddingEdit\";\r\nimport { useQueryClient } from \"react-query\";\r\nimport { usePriceWedding } from \"../usePriceWedding\";\r\n\r\nconst { Dragger } = Upload;\r\n\r\nconst defaultValues = {\r\n  title: \"\",\r\n  gallery: [],\r\n};\r\n\r\nconst schema = yup\r\n  .object({\r\n    title: yup.string().required(\"Vui lòng nhập tiêu đề của bảng giá\"),\r\n    gallery: yup\r\n      .mixed()\r\n      .required(\"Vui lòng upload file hình ảnh bảng giá\")\r\n      .test(\"fileEmpty\", \"Vui lòng upload file hình ảnh\", (value: any) => {\r\n        if (value?.length === 0) return false;\r\n\r\n        return true;\r\n      }),\r\n  })\r\n  .required();\r\n\r\ninterface DraggableUploadListItemProps {\r\n  originNode: React.ReactElement<\r\n    any,\r\n    string | React.JSXElementConstructor<any>\r\n  >;\r\n  file: UploadFile<any>;\r\n}\r\n\r\nexport default function PriceWeddingForm() {\r\n  const formRef = useRef<FormInstance>(null);\r\n  const [form] = FormAntDeisgn.useForm();\r\n  const [messageApi, contextHolder] = message.useMessage();\r\n  const [loading, setLoading] = useState(false);\r\n  const priceWeddingRef = collection(firestore, \"priceWedding\");\r\n  const mutation = useFirestoreCollectionMutation(priceWeddingRef);\r\n  const [fileList, setFileList] = useState<any[]>([]);\r\n  const [itemFile, setItemFile] = useState<any>({});\r\n  const { refetch } = usePriceWedding();\r\n\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const queryClient = useQueryClient();\r\n\r\n  const {\r\n    control,\r\n    handleSubmit,\r\n    formState: { errors },\r\n    reset,\r\n    setValue,\r\n    getValues,\r\n  } = useForm<any>({\r\n    defaultValues,\r\n    resolver: yupResolver(schema),\r\n  });\r\n\r\n  const handleShowModalForm = (item: any) => () => {\r\n    setIsOpen(true);\r\n    setItemFile(item);\r\n  };\r\n\r\n  const handleCloseModalForm = () => {\r\n    setIsOpen(false);\r\n  };\r\n\r\n  const handleUpload = async (info: any) => {\r\n    if (info.file.status === \"done\") {\r\n      setFileList((prev) => [\r\n        ...prev,\r\n        {\r\n          id: uuidv4(),\r\n          url: info.file.url,\r\n          name: info.file.name,\r\n          alt: info.file.name.substr(0, info.file.name.lastIndexOf(\".\")),\r\n        },\r\n      ]);\r\n      setValue(\"gallery\", [\r\n        ...fileList,\r\n        {\r\n          id: uuidv4(),\r\n          url: info.file.url,\r\n          name: info.file.name,\r\n          alt: info.file.name.substr(0, info.file.name.lastIndexOf(\".\")),\r\n        },\r\n      ]);\r\n      message.success(`${info.file.name} file uploaded successfully`);\r\n    } else if (info.file.status === \"error\") {\r\n      message.error(`${info.file.name} file upload failed.`);\r\n    }\r\n  };\r\n\r\n  const customRequest = async ({ file, onSuccess, onError }: any) => {\r\n    try {\r\n      // const storageRef = ref(storage, `/files/${file.name}`);\r\n\r\n      // const uploadTask = uploadBytesResumable(storageRef, file);\r\n\r\n      // uploadTask.on(\r\n      //   \"state_changed\",\r\n      //   (snapshot) => {\r\n      //     const percent = Math.round(\r\n      //       (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n      //     );\r\n\r\n      //     // update progress\r\n      //     // setPercent(percent);\r\n      //   },\r\n      //   (err) => console.log(err),\r\n      //   () => {\r\n      //     // download url\r\n      //     getDownloadURL(uploadTask.snapshot.ref).then((url) => {\r\n      //       onSuccess();\r\n      //       handleUpload({\r\n      //         file: {\r\n      //           status: \"done\",\r\n      //           name: file.name,\r\n      //           url,\r\n      //         },\r\n      //       });\r\n      //     });\r\n      //   }\r\n      // );\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = (e: any) => {\r\n        const originalImage = new Image() as any;\r\n        originalImage.src = e.target.result;\r\n\r\n        originalImage.onload = () => {\r\n          // Define your desired dimensions\r\n          const maxWidth = 800;\r\n          const maxHeight = 800;\r\n\r\n          // Calculate the new dimensions while preserving the aspect ratio\r\n          const aspectRatio = originalImage.width / originalImage.height;\r\n          let newWidth, newHeight;\r\n          if (\r\n            originalImage.width > maxWidth ||\r\n            originalImage.height > maxHeight\r\n          ) {\r\n            if (aspectRatio > 1) {\r\n              newWidth = maxWidth;\r\n              newHeight = maxWidth / aspectRatio;\r\n            } else {\r\n              newWidth = maxHeight * aspectRatio;\r\n              newHeight = maxHeight;\r\n            }\r\n          } else {\r\n            newWidth = originalImage.width;\r\n            newHeight = originalImage.height;\r\n          }\r\n\r\n          // Create a canvas element to draw the resized image\r\n          const canvas = document.createElement(\"canvas\");\r\n          const ctx = canvas.getContext(\"2d\") as any;\r\n          canvas.width = newWidth;\r\n          canvas.height = newHeight;\r\n\r\n          // Draw the resized image on the canvas\r\n          ctx.drawImage(originalImage, 0, 0, newWidth, newHeight);\r\n\r\n          // Convert the canvas to a Blob (image file)\r\n          canvas.toBlob((blob: any) => {\r\n            // Create a new File object from the Blob\r\n            const resizedFile = new File([blob], file.name, {\r\n              type: file.type,\r\n            });\r\n            const storageRef = ref(\r\n              storage,\r\n              `/manager-page/${resizedFile.name}`\r\n            );\r\n            const uploadTask = uploadBytesResumable(storageRef, resizedFile);\r\n\r\n            uploadTask.on(\r\n              \"state_changed\",\r\n              (snapshot) => {\r\n                const percent = Math.round(\r\n                  (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n                );\r\n\r\n                // update progress\r\n                // setPercent(percent);\r\n              },\r\n              (err) => console.log(err),\r\n              () => {\r\n                // download url\r\n                getDownloadURL(uploadTask.snapshot.ref).then((url) => {\r\n                  onSuccess();\r\n                  handleUpload({\r\n                    file: {\r\n                      status: \"done\",\r\n                      name: resizedFile.name,\r\n                      url,\r\n                    },\r\n                  });\r\n                });\r\n              }\r\n            );\r\n          }, file.type);\r\n        };\r\n      };\r\n    } catch (error) {\r\n      console.error(\"Error uploading file:\", error);\r\n      onError();\r\n    }\r\n  };\r\n\r\n  const handleChange: UploadProps[\"onChange\"] = ({ fileList: newFileList }) => {\r\n    if (fileList.length > 0) {\r\n      const matchingUrls = fileList?.reduce((result: any, image: any) => {\r\n        if (newFileList.some((file: any) => image?.id?.includes(file?.id))) {\r\n          result.push(image);\r\n        }\r\n        return result;\r\n      }, []);\r\n      setFileList(matchingUrls);\r\n      setValue(\"gallery\", matchingUrls);\r\n    }\r\n  };\r\n\r\n  const handleUpdateItem = (value: any[]) => {\r\n    setFileList(value);\r\n  };\r\n\r\n  const props: UploadProps = {\r\n    name: \"file\",\r\n    multiple: true,\r\n    listType: \"picture-card\",\r\n    // beforeUpload,\r\n    fileList,\r\n    customRequest,\r\n    onChange: handleChange,\r\n    onDrop(e) {\r\n      console.log(\"Dropped files\", e.dataTransfer.files);\r\n    },\r\n  };\r\n\r\n  const DraggableUploadListItem = ({\r\n    originNode,\r\n    file,\r\n  }: DraggableUploadListItemProps) => {\r\n    return (\r\n      <div className=\"mt-2\">\r\n        {originNode}\r\n        <Button onClick={handleShowModalForm(file)}>Chỉnh sửa</Button>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {contextHolder}\r\n      <FormAntDeisgn\r\n        form={form}\r\n        name=\"control-price-wedding-ref\"\r\n        ref={formRef}\r\n        layout=\"vertical\"\r\n        initialValues={defaultValues}\r\n        onFinish={handleSubmit(async (data) => {\r\n          const payload = {\r\n            title: data?.title || \"\",\r\n            gallery: fileList || [],\r\n          };\r\n          mutation.mutate(payload);\r\n          queryClient.invalidateQueries(\"priceWedding\");\r\n          setTimeout(async () => await refetch(), 300);\r\n          setLoading(true);\r\n          messageApi.open({\r\n            type: \"success\",\r\n            content: \"Tạo thành viên thành công!\",\r\n            duration: 5,\r\n          });\r\n          setLoading(false);\r\n          form.resetFields();\r\n          setFileList([]);\r\n          formRef.current?.resetFields();\r\n          reset();\r\n        })}\r\n      >\r\n        <FormItem control={control} name=\"title\" label=\"Tiêu đề bảng giá\">\r\n          <Input allowClear placeholder=\"Nhập tiêu đề bảng giá\" />\r\n        </FormItem>\r\n        <div className=\"py-6\">\r\n          <FormItem\r\n            control={control}\r\n            name=\"avatar\"\r\n            // valuePropName='fileList'\r\n            label=\"Upload hình ảnh bảng giá\"\r\n          >\r\n            <Dragger\r\n              {...props}\r\n              itemRender={(originNode, file) => {\r\n                return (\r\n                  <DraggableUploadListItem\r\n                    originNode={originNode}\r\n                    file={file}\r\n                  />\r\n                );\r\n              }}\r\n            >\r\n              <p className=\"ant-upload-drag-icon\">\r\n                <InboxOutlined />\r\n              </p>\r\n              <p className=\"ant-upload-text\">\r\n                Nhấp hoặc kéo tệp vào khu vực này để tải lên\r\n              </p>\r\n              <p className=\"ant-upload-hint\">\r\n                Hỗ trợ tải lên một lần hoặc hàng loạt. Nghiêm cấm tải lên dữ\r\n                liệu công ty hoặc các thông tin khác\r\n              </p>\r\n            </Dragger>\r\n          </FormItem>\r\n        </div>\r\n        <Button\r\n          loading={loading}\r\n          disabled={!isEmpty(errors)}\r\n          type=\"primary\"\r\n          htmlType=\"submit\"\r\n          block\r\n          size=\"large\"\r\n        >\r\n          Gửi\r\n        </Button>\r\n      </FormAntDeisgn>\r\n      <Modal\r\n        centered\r\n        footer={null}\r\n        open={isOpen}\r\n        onCancel={handleCloseModalForm}\r\n        title=\"Chỉnh sửa thông tin bảng giá\"\r\n      >\r\n        <PriceWeddingEdit\r\n          data={fileList}\r\n          file={itemFile}\r\n          handleCancel={handleCloseModalForm}\r\n          handleUpdateItem={handleUpdateItem}\r\n        />\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Breadcrumb } from \"antd\";\r\nimport PriceWeddingForm from \"./PriceWeddingForm\";\r\n// import CreateEmployeeForm from './CreateEmployeeForm';\r\n\r\nconst CreatePriceWedding = () => {\r\n  return (\r\n    <div className=\"m-2 p-2 md:p-10 bg-white rounded-3xl\">\r\n      <div className=\"mb-4\">\r\n        <Breadcrumb\r\n          items={[\r\n            {\r\n              href: \"/\",\r\n              title: \"Trang chủ\",\r\n            },\r\n            {\r\n              title: \"Tạo bảng giá\",\r\n            },\r\n          ]}\r\n        />\r\n      </div>\r\n      <PriceWeddingForm />\r\n    </div>\r\n  );\r\n};\r\nexport default CreatePriceWedding;\r\n","import { useFirestoreQuery } from '@react-query-firebase/firestore';\r\nimport { query, collection } from 'firebase/firestore';\r\nimport { firestore } from '../../lib/firebase';\r\nimport { PriceWeddingModel } from '../../models/PriceWeddingModel';\r\n\r\nexport function usePriceWedding() {\r\n\tconst ref = query(collection(firestore, 'priceWedding'));\r\n\t// Provide the query to the hook\r\n\tconst queryPriceWedding = useFirestoreQuery(['priceWedding'], ref);\r\n\tconst snapshot = queryPriceWedding.data;\r\n\tlet data: any[] = [];\r\n\tsnapshot?.forEach((docSnapshot) => {\r\n\t\tdata.push({ id: docSnapshot.id, ...docSnapshot.data() });\r\n\t});\r\n\r\n\tconst refetch = async () => {\r\n\t\ttry {\r\n\t\t\tawait queryPriceWedding.refetch(); // You can use refetch to fetch data again\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error refetching tea, data:', error);\r\n\t\t}\r\n\t};\r\n\treturn {\r\n\t\tisError: queryPriceWedding.isError,\r\n\t\tisLoading: queryPriceWedding.isLoading,\r\n\t\tdata: data as PriceWeddingModel[],\r\n\t\trefetch\r\n\t};\r\n}\r\n","// This icon file is generated automatically.\nvar InboxOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"0 0 1024 1024\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z\" } }] }, \"name\": \"inbox\", \"theme\": \"outlined\" };\nexport default InboxOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport InboxOutlinedSvg from \"@ant-design/icons-svg/es/asn/InboxOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar InboxOutlined = function InboxOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: InboxOutlinedSvg\n  }));\n};\nif (process.env.NODE_ENV !== 'production') {\n  InboxOutlined.displayName = 'InboxOutlined';\n}\nexport default /*#__PURE__*/React.forwardRef(InboxOutlined);"],"names":["FormItem","_ref","_errors$name$message","_errors$name","children","control","name","help","_ref$hasFeedback","hasFeedback","props","_objectWithoutProperties","_excluded","_useController","useController","field","fieldState","errors","formState","_jsx","AntdForm","Item","_objectSpread","normalize","value","onChange","validateStatus","invalid","undefined","message","schema","yup","title","required","description","url","test","length","PriceWeddingEdit","data","file","handleCancel","handleUpdateItem","priceWeddingItem","find","id","defaultUrlItem","uuidv4","uid","status","alt","formRef","useRef","_FormAntDeisgn$useFor","FormAntDeisgn","useForm","form","_slicedToArray","_message$useMessage","useMessage","_message$useMessage2","messageApi","contextHolder","_useState","useState","_useState2","loading","setLoading","_useState3","_useState4","fileListUrl","setFileListUrl","defaultValues","_useForm","resolver","yupResolver","handleSubmit","reset","setValue","useEffect","setFieldsValue","handleUploadUrl","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","info","wrap","_context","prev","next","substr","lastIndexOf","success","concat","error","stop","_x","apply","arguments","customRequestUrl","_ref4","_callee2","_ref3","onSuccess","onError","reader","_context2","FileReader","readAsDataURL","onload","e","originalImage","Image","src","target","result","newWidth","newHeight","aspectRatio","width","height","canvas","document","createElement","ctx","getContext","drawImage","toBlob","blob","resizedFile","File","type","storageRef","ref","storage","uploadTask","uploadBytesResumable","on","snapshot","Math","round","bytesTransferred","totalBytes","err","console","log","getDownloadURL","then","_x2","urlProps","multiple","listType","customRequest","_ref5","newFileList","fileList","matchingUrls","reduce","image","some","_image$id","includes","push","onDrop","dataTransfer","files","_jsxs","_Fragment","layout","initialValues","onFinish","_ref6","_callee3","values","_formRef$current","newPriceWedding","_context3","map","item","_fileListUrl$","_fileListUrl$2","_fileListUrl$3","_fileListUrl$4","assign","open","content","duration","resetFields","current","_x3","label","Upload","Button","icon","UploadOutlined","Input","allowClear","placeholder","disabled","isEmpty","htmlType","block","size","Dragger","gallery","PriceWeddingForm","priceWeddingRef","collection","firestore","mutation","useFirestoreCollectionMutation","setFileList","_useState5","_useState6","itemFile","setItemFile","refetch","usePriceWedding","_useState7","_useState8","isOpen","setIsOpen","queryClient","useQueryClient","handleCloseModalForm","getValues","handleUpload","_toConsumableArray","DraggableUploadListItem","originNode","className","onClick","_callee4","payload","_context4","mutate","invalidateQueries","setTimeout","abrupt","sent","itemRender","InboxOutlined","Modal","centered","footer","onCancel","Breadcrumb","items","href","query","queryPriceWedding","useFirestoreQuery","forEach","docSnapshot","t0","isError","isLoading","React","AntdIcon","_extends","InboxOutlinedSvg"],"sourceRoot":""}